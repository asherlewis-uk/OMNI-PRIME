"use strict";exports.id=499,exports.ids=[499],exports.modules={5499:(e,t,o)=>{o.d(t,{V:()=>r,db:()=>i});var l=o(85890),a=o.n(l),n=o(21970),d=o(48645);let s=new(a())(process.env.DATABASE_URL?.replace("file:","")||"./data/omni.db"),i=(0,n.t)(s,{schema:d}),r=()=>i},48645:(e,t,o)=>{o.r(t),o.d(t,{agentKnowledge:()=>p,agentKnowledgeRelations:()=>L,agentTools:()=>c,agentToolsRelations:()=>_,agents:()=>f,agentsRelations:()=>m,chatSessions:()=>y,chatSessionsRelations:()=>I,knowledgeDocs:()=>v,knowledgeDocsRelations:()=>$,mcpServers:()=>D,mcpServersRelations:()=>b,mcpTools:()=>U,mcpToolsRelations:()=>k,messages:()=>w,messagesRelations:()=>x,swarmDefs:()=>N,swarmDefsRelations:()=>g,toolCalls:()=>h,toolCallsRelations:()=>A,userProfiles:()=>r,userProfilesRelations:()=>u});var l=o(87106),a=o(53586),n=o(5795),d=o(54341),s=o(31626),i=o(95157);let r=(0,l.Px)("user_profiles",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),useCase:(0,a.fL)("use_case").$type().notNull(),objectives:(0,a.fL)("objectives",{mode:"json"}).$type().notNull().default((0,s.i6)`'[]'`),skillLevel:(0,a.fL)("skill_level").$type().notNull().default("intermediate"),workStyle:(0,a.fL)("work_style").$type().notNull().default("solo"),contentTone:(0,a.fL)("content_tone").$type().notNull().default("professional"),toolPreferences:(0,a.fL)("tool_preferences",{mode:"json"}).$type().notNull().default((0,s.i6)`'[]'`),rawAnswers:(0,a.fL)("raw_answers",{mode:"json"}).$type().notNull().default((0,s.i6)`'{}'`),isOnboardingComplete:(0,n._L)("is_onboarding_complete",{mode:"boolean"}).notNull().default(!1),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`),updatedAt:(0,n._L)("updated_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),u=(0,i.lE)(r,({many:e})=>({agents:e(f),swarms:e(N),knowledgeDocs:e(v)})),f=(0,l.Px)("agents",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),ownerId:(0,a.fL)("owner_id").notNull().references(()=>r.id,{onDelete:"cascade"}),name:(0,a.fL)("name").notNull(),avatar:(0,a.fL)("avatar"),description:(0,a.fL)("description"),systemPrompt:(0,a.fL)("system_prompt").notNull(),temperature:(0,d.kw)("temperature").notNull().default(.7),modelPreference:(0,a.fL)("model_preference").notNull().default("ollama/llama3.1"),voiceId:(0,a.fL)("voice_id"),status:(0,a.fL)("status").$type().notNull().default("active"),isTemplate:(0,n._L)("is_template",{mode:"boolean"}).notNull().default(!1),genesisTag:(0,a.fL)("genesis_tag").$type(),templateId:(0,a.fL)("template_id"),totalConversations:(0,n._L)("total_conversations").notNull().default(0),totalMessages:(0,n._L)("total_messages").notNull().default(0),lastActiveAt:(0,n._L)("last_active_at",{mode:"timestamp"}),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`),updatedAt:(0,n._L)("updated_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),m=(0,i.lE)(f,({one:e,many:t})=>({owner:e(r,{fields:[f.ownerId],references:[r.id]}),tools:t(c),knowledge:t(p),sessions:t(y)})),c=(0,l.Px)("agent_tools",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),agentId:(0,a.fL)("agent_id").notNull().references(()=>f.id,{onDelete:"cascade"}),toolId:(0,a.fL)("tool_id").notNull().references(()=>U.id,{onDelete:"cascade"}),config:(0,a.fL)("config",{mode:"json"}).$type().notNull().default((0,s.i6)`'{}'`),isEnabled:(0,n._L)("is_enabled",{mode:"boolean"}).notNull().default(!0),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),_=(0,i.lE)(c,({one:e})=>({agent:e(f,{fields:[c.agentId],references:[f.id]}),tool:e(U,{fields:[c.toolId],references:[U.id]})})),p=(0,l.Px)("agent_knowledge",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),agentId:(0,a.fL)("agent_id").notNull().references(()=>f.id,{onDelete:"cascade"}),docId:(0,a.fL)("doc_id").notNull().references(()=>v.id,{onDelete:"cascade"}),relevanceScore:(0,d.kw)("relevance_score"),customMetadata:(0,a.fL)("custom_metadata",{mode:"json"}).$type().default((0,s.i6)`'{}'`),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),L=(0,i.lE)(p,({one:e})=>({agent:e(f,{fields:[p.agentId],references:[f.id]}),document:e(v,{fields:[p.docId],references:[v.id]})})),N=(0,l.Px)("swarm_defs",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),ownerId:(0,a.fL)("owner_id").notNull().references(()=>r.id,{onDelete:"cascade"}),name:(0,a.fL)("name").notNull(),description:(0,a.fL)("description"),graphJson:(0,a.fL)("graph_json",{mode:"json"}).$type().notNull().default((0,s.i6)`'[]'`),entryAgentId:(0,a.fL)("entry_agent_id").references(()=>f.id),maxIterations:(0,n._L)("max_iterations").notNull().default(10),autoStart:(0,n._L)("auto_start",{mode:"boolean"}).notNull().default(!1),totalExecutions:(0,n._L)("total_executions").notNull().default(0),isActive:(0,n._L)("is_active",{mode:"boolean"}).notNull().default(!0),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`),updatedAt:(0,n._L)("updated_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),g=(0,i.lE)(N,({one:e,many:t})=>({owner:e(r,{fields:[N.ownerId],references:[r.id]}),entryAgent:e(f,{fields:[N.entryAgentId],references:[f.id]}),sessions:t(y)})),y=(0,l.Px)("chat_sessions",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),ownerId:(0,a.fL)("owner_id").notNull().references(()=>r.id,{onDelete:"cascade"}),agentId:(0,a.fL)("agent_id").references(()=>f.id,{onDelete:"set null"}),swarmId:(0,a.fL)("swarm_id").references(()=>N.id,{onDelete:"set null"}),title:(0,a.fL)("title"),modelUsed:(0,a.fL)("model_used"),messageCount:(0,n._L)("message_count").notNull().default(0),isArchived:(0,n._L)("is_archived",{mode:"boolean"}).notNull().default(!1),lastMessageAt:(0,n._L)("last_message_at",{mode:"timestamp"}),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`),updatedAt:(0,n._L)("updated_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),I=(0,i.lE)(y,({one:e,many:t})=>({owner:e(r,{fields:[y.ownerId],references:[r.id]}),agent:e(f,{fields:[y.agentId],references:[f.id]}),swarm:e(N,{fields:[y.swarmId],references:[N.id]}),messages:t(w)})),w=(0,l.Px)("messages",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),sessionId:(0,a.fL)("session_id").notNull().references(()=>y.id,{onDelete:"cascade"}),role:(0,a.fL)("role").$type().notNull(),content:(0,a.fL)("content").notNull(),agentId:(0,a.fL)("agent_id").references(()=>f.id,{onDelete:"set null"}),metadata:(0,a.fL)("metadata",{mode:"json"}).$type().notNull().default((0,s.i6)`'{}'`),promptTokens:(0,n._L)("prompt_tokens"),completionTokens:(0,n._L)("completion_tokens"),totalTokens:(0,n._L)("total_tokens"),isComplete:(0,n._L)("is_complete",{mode:"boolean"}).notNull().default(!0),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),x=(0,i.lE)(w,({one:e,many:t})=>({session:e(y,{fields:[w.sessionId],references:[y.id]}),agent:e(f,{fields:[w.agentId],references:[f.id]}),toolCalls:t(h)})),h=(0,l.Px)("tool_calls",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),messageId:(0,a.fL)("message_id").notNull().references(()=>w.id,{onDelete:"cascade"}),toolId:(0,a.fL)("tool_id").references(()=>U.id,{onDelete:"set null"}),toolName:(0,a.fL)("tool_name").notNull(),arguments:(0,a.fL)("arguments",{mode:"json"}).$type().notNull().default((0,s.i6)`'{}'`),result:(0,a.fL)("result",{mode:"json"}),error:(0,a.fL)("error"),status:(0,a.fL)("status").$type().notNull().default("pending"),startedAt:(0,n._L)("started_at",{mode:"timestamp"}),executedAt:(0,n._L)("executed_at",{mode:"timestamp"}),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),A=(0,i.lE)(h,({one:e})=>({message:e(w,{fields:[h.messageId],references:[w.id]}),tool:e(U,{fields:[h.toolId],references:[U.id]})})),v=(0,l.Px)("knowledge_docs",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),ownerId:(0,a.fL)("owner_id").notNull().references(()=>r.id,{onDelete:"cascade"}),filename:(0,a.fL)("filename").notNull(),originalName:(0,a.fL)("original_name").notNull(),fileType:(0,a.fL)("file_type").notNull(),fileSize:(0,n._L)("file_size").notNull(),contentHash:(0,a.fL)("content_hash").notNull(),storagePath:(0,a.fL)("storage_path").notNull(),vectorCount:(0,n._L)("vector_count").notNull().default(0),chunkSize:(0,n._L)("chunk_size").default(1e3),chunkOverlap:(0,n._L)("chunk_overlap").default(200),status:(0,a.fL)("status").$type().notNull().default("pending"),errorMessage:(0,a.fL)("error_message"),indexedAt:(0,n._L)("indexed_at",{mode:"timestamp"}),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`),updatedAt:(0,n._L)("updated_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),$=(0,i.lE)(v,({one:e,many:t})=>({owner:e(r,{fields:[v.ownerId],references:[r.id]}),agentLinks:t(p)})),D=(0,l.Px)("mcp_servers",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),ownerId:(0,a.fL)("owner_id").notNull().references(()=>r.id,{onDelete:"cascade"}),name:(0,a.fL)("name").notNull(),description:(0,a.fL)("description"),transport:(0,a.fL)("transport").$type().notNull(),command:(0,a.fL)("command"),args:(0,a.fL)("args",{mode:"json"}).$type().default((0,s.i6)`'[]'`),url:(0,a.fL)("url"),env:(0,a.fL)("env",{mode:"json"}).$type().default((0,s.i6)`'{}'`),config:(0,a.fL)("config",{mode:"json"}).$type().default((0,s.i6)`'{}'`),status:(0,a.fL)("status").$type().notNull().default("disconnected"),statusMessage:(0,a.fL)("status_message"),lastSyncedAt:(0,n._L)("last_synced_at",{mode:"timestamp"}),toolCount:(0,n._L)("tool_count").notNull().default(0),isBuiltIn:(0,n._L)("is_built_in",{mode:"boolean"}).notNull().default(!1),isEnabled:(0,n._L)("is_enabled",{mode:"boolean"}).notNull().default(!0),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`),updatedAt:(0,n._L)("updated_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),b=(0,i.lE)(D,({one:e,many:t})=>({owner:e(r,{fields:[D.ownerId],references:[r.id]}),tools:t(U)})),U=(0,l.Px)("mcp_tools",{id:(0,a.fL)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),serverId:(0,a.fL)("server_id").notNull().references(()=>D.id,{onDelete:"cascade"}),name:(0,a.fL)("name").notNull(),description:(0,a.fL)("description"),inputSchema:(0,a.fL)("input_schema",{mode:"json"}).$type().notNull().default((0,s.i6)`'{}'`),isBuiltIn:(0,n._L)("is_built_in",{mode:"boolean"}).notNull().default(!1),isEnabled:(0,n._L)("is_enabled",{mode:"boolean"}).notNull().default(!0),useCount:(0,n._L)("use_count").notNull().default(0),lastUsedAt:(0,n._L)("last_used_at",{mode:"timestamp"}),createdAt:(0,n._L)("created_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`),updatedAt:(0,n._L)("updated_at",{mode:"timestamp"}).notNull().default((0,s.i6)`(unixepoch())`)}),k=(0,i.lE)(U,({one:e,many:t})=>({server:e(D,{fields:[U.serverId],references:[D.id]}),agentAssignments:t(c),toolCalls:t(h)}))}};