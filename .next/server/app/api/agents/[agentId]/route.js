"use strict";(()=>{var e={};e.id=666,e.ids=[666],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},38089:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>I,patchFetch:()=>q,requestAsyncStorage:()=>f,routeModule:()=>v,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var n={};r.r(n),r.d(n,{DELETE:()=>m,GET:()=>g,PATCH:()=>w});var o=r(49303),a=r(88716),s=r(60670),i=r(87070),d=r(5499),u=r(48645),l=r(57745),p=r(84770),c=r.n(p);async function g(e,{params:t}){try{let{agentId:e}=t,r=(0,d.V)(),n=await r.query.agents.findFirst({where:(0,l.eq)(u.DQ.id,e),with:{tools:{with:{tool:{with:{server:!0}}}},knowledge:{with:{document:!0}}}});if(!n)return i.NextResponse.json({error:"Agent not found"},{status:404});return i.NextResponse.json({agent:n})}catch(e){return console.error("[Agent Detail API] Error:",e),i.NextResponse.json({error:"Failed to get agent"},{status:500})}}async function w(e,{params:t}){try{let{agentId:r}=t,n=await e.json(),o=(0,d.V)();if(!await o.query.agents.findFirst({where:(0,l.eq)(u.DQ.id,r)}))return i.NextResponse.json({error:"Agent not found"},{status:404});let a={updatedAt:new Date};if(void 0!==n.name&&(a.name=n.name),void 0!==n.avatar&&(a.avatar=n.avatar),void 0!==n.description&&(a.description=n.description),void 0!==n.systemPrompt&&(a.systemPrompt=n.systemPrompt),void 0!==n.temperature&&(a.temperature=n.temperature),void 0!==n.modelPreference&&(a.modelPreference=n.modelPreference),void 0!==n.voiceId&&(a.voiceId=n.voiceId),await o.update(u.DQ).set(a).where((0,l.eq)(u.DQ.id,r)),void 0!==n.toolIds)for(let e of(await o.delete(u.rY).where((0,l.eq)(u.rY.agentId,r)),n.toolIds))await o.insert(u.rY).values({id:c().randomUUID(),agentId:r,toolId:e,config:{},isEnabled:!0});if(void 0!==n.knowledgeDocIds)for(let e of(await o.delete(u.Jx).where((0,l.eq)(u.Jx.agentId,r)),n.knowledgeDocIds))await o.insert(u.Jx).values({id:c().randomUUID(),agentId:r,docId:e});let s=await o.query.agents.findFirst({where:(0,l.eq)(u.DQ.id,r),with:{tools:{with:{tool:{with:{server:!0}}}},knowledge:{with:{document:!0}}}});return i.NextResponse.json({agent:s})}catch(e){return console.error("[Agent Detail API] Error updating agent:",e),i.NextResponse.json({error:"Failed to update agent"},{status:500})}}async function m(e,{params:t}){try{let{agentId:e}=t,r=(0,d.V)();if(!await r.query.agents.findFirst({where:(0,l.eq)(u.DQ.id,e)}))return i.NextResponse.json({error:"Agent not found"},{status:404});return await r.delete(u.DQ).where((0,l.eq)(u.DQ.id,e)),i.NextResponse.json({success:!0})}catch(e){return console.error("[Agent Detail API] Error deleting agent:",e),i.NextResponse.json({error:"Failed to delete agent"},{status:500})}}let v=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/agents/[agentId]/route",pathname:"/api/agents/[agentId]",filename:"route",bundlePath:"app/api/agents/[agentId]/route"},resolvedPagePath:"C:\\Users\\asher\\PROJECTS\\OMNI-PRIME\\src\\app\\api\\agents\\[agentId]\\route.ts",nextConfigOutput:"export",userland:n}),{requestAsyncStorage:f,staticGenerationAsyncStorage:h,serverHooks:x}=v,I="/api/agents/[agentId]/route";function q(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}},57745:(e,t,r)=>{r.d(t,{eq:()=>i,xD:()=>d});var n=r(83596),o=r(19326),a=r(80298),s=r(22070);let i=(e,t)=>(0,s.i6)`${e} = ${(function(e,t){return!(0,s._B)(t)||(0,s.zl)(e)||(0,o.is)(e,s.dO)||(0,o.is)(e,s.Vm)||(0,o.is)(e,n.s)||(0,o.is)(e,a.iA)||(0,o.is)(e,s.G7)?e:new s.dO(e,t)})(t,e)}`;function d(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new s.$s(1===t.length?t:[new s.Zm("("),s.i6.join(t,new s.Zm(" and ")),new s.Zm(")")])}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,656,70,148],()=>r(38089));module.exports=n})();