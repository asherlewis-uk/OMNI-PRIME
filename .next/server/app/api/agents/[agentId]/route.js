"use strict";(()=>{var e={};e.id=666,e.ids=[666],e.modules={85890:e=>{e.exports=require("better-sqlite3")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},84770:e=>{e.exports=require("crypto")},38089:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>I,patchFetch:()=>q,requestAsyncStorage:()=>v,routeModule:()=>h,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var n={};r.r(n),r.d(n,{DELETE:()=>m,GET:()=>c,PATCH:()=>w});var a=r(49303),o=r(88716),s=r(60670),i=r(87070),d=r(5499),u=r(48645),g=r(57745),l=r(84770),p=r.n(l);async function c(e,{params:t}){try{let{agentId:e}=t,r=await (0,d.V)(),n=await r.query.agents.findFirst({where:(0,g.eq)(u.agents.id,e),with:{tools:{with:{tool:{with:{server:!0}}}},knowledge:{with:{document:!0}}}});if(!n)return i.NextResponse.json({error:"Agent not found"},{status:404});return i.NextResponse.json({agent:n})}catch(e){return console.error("[Agent Detail API] Error:",e),i.NextResponse.json({error:"Failed to get agent"},{status:500})}}async function w(e,{params:t}){try{let{agentId:r}=t,n=await e.json(),a=await (0,d.V)();if(!await a.query.agents.findFirst({where:(0,g.eq)(u.agents.id,r)}))return i.NextResponse.json({error:"Agent not found"},{status:404});let o={updatedAt:new Date};if(void 0!==n.name&&(o.name=n.name),void 0!==n.avatar&&(o.avatar=n.avatar),void 0!==n.description&&(o.description=n.description),void 0!==n.systemPrompt&&(o.systemPrompt=n.systemPrompt),void 0!==n.temperature&&(o.temperature=n.temperature),void 0!==n.modelPreference&&(o.modelPreference=n.modelPreference),void 0!==n.voiceId&&(o.voiceId=n.voiceId),await a.update(u.agents).set(o).where((0,g.eq)(u.agents.id,r)),void 0!==n.toolIds)for(let e of(await a.delete(u.agentTools).where((0,g.eq)(u.agentTools.agentId,r)),n.toolIds))await a.insert(u.agentTools).values({id:p().randomUUID(),agentId:r,toolId:e,config:{},isEnabled:!0});if(void 0!==n.knowledgeDocIds)for(let e of(await a.delete(u.agentKnowledge).where((0,g.eq)(u.agentKnowledge.agentId,r)),n.knowledgeDocIds))await a.insert(u.agentKnowledge).values({id:p().randomUUID(),agentId:r,docId:e});let s=await a.query.agents.findFirst({where:(0,g.eq)(u.agents.id,r),with:{tools:{with:{tool:{with:{server:!0}}}},knowledge:{with:{document:!0}}}});return i.NextResponse.json({agent:s})}catch(e){return console.error("[Agent Detail API] Error updating agent:",e),i.NextResponse.json({error:"Failed to update agent"},{status:500})}}async function m(e,{params:t}){try{let{agentId:e}=t,r=await (0,d.V)();if(!await r.query.agents.findFirst({where:(0,g.eq)(u.agents.id,e)}))return i.NextResponse.json({error:"Agent not found"},{status:404});return await r.delete(u.agents).where((0,g.eq)(u.agents.id,e)),i.NextResponse.json({success:!0})}catch(e){return console.error("[Agent Detail API] Error deleting agent:",e),i.NextResponse.json({error:"Failed to delete agent"},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/agents/[agentId]/route",pathname:"/api/agents/[agentId]",filename:"route",bundlePath:"app/api/agents/[agentId]/route"},resolvedPagePath:"C:\\Users\\asher\\PROJECTS\\OMNI-PRIME\\src\\app\\api\\agents\\[agentId]\\route.ts",nextConfigOutput:"export",userland:n}),{requestAsyncStorage:v,staticGenerationAsyncStorage:f,serverHooks:x}=h,I="/api/agents/[agentId]/route";function q(){return(0,s.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,349,70,499],()=>r(38089));module.exports=n})();