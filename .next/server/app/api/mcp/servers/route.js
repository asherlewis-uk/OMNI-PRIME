(()=>{var e={};e.id=935,e.ids=[935],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},92048:e=>{"use strict";e.exports=require("fs")},55315:e=>{"use strict";e.exports=require("path")},6005:e=>{"use strict";e.exports=require("node:crypto")},84492:e=>{"use strict";e.exports=require("node:stream")},1950:(e,t,r)=>{"use strict";let s;r.r(t),r.d(t,{originalPathname:()=>ak,patchFetch:()=>aE,requestAsyncStorage:()=>aw,routeModule:()=>ag,serverHooks:()=>ab,staticGenerationAsyncStorage:()=>a$});var o={};r.r(o),r.d(o,{GET:()=>ay,POST:()=>av});var n=r(49303),i=r(88716),a=r(60670),l=r(87070),u=r(5499),c=r(48645);let d=Object.freeze({status:"aborted"});function p(e,t,r){function s(r,s){var o;for(let n in Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(o=r._zod).traits??(o.traits=new Set),r._zod.traits.add(e),t(r,s),i.prototype)n in r||Object.defineProperty(r,n,{value:i.prototype[n].bind(r)});r._zod.constr=i,r._zod.def=s}let o=r?.Parent??Object;class n extends o{}function i(e){var t;let o=r?.Parent?new n:this;for(let r of(s(o,e),(t=o._zod).deferred??(t.deferred=[]),o._zod.deferred))r();return o}return Object.defineProperty(n,"name",{value:e}),Object.defineProperty(i,"init",{value:s}),Object.defineProperty(i,Symbol.hasInstance,{value:t=>!!r?.Parent&&t instanceof r.Parent||t?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}Symbol("zod_brand");class h extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}let f={};function m(e){return e&&Object.assign(f,e),f}function _(e,t){return"bigint"==typeof t?t.toString():t}function y(e){return{get value(){{let t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function v(e){let t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function g(e,t,r){Object.defineProperty(e,t,{get(){{let s=r();return e[t]=s,s}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function w(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function $(e){return JSON.stringify(e)}let b=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function k(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let E=y(()=>{if("undefined"!=typeof navigator&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{return Function(""),!0}catch(e){return!1}});function S(e){if(!1===k(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!1!==k(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}let T=new Set(["string","number","symbol"]);function P(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function x(e,t,r){let s=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(s._zod.parent=e),s}function I(e){if(!e)return{};if("string"==typeof e)return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw Error("Cannot specify both `message` and `error` params");e.error=e.message}return(delete e.message,"string"==typeof e.error)?{...e,error:()=>e.error}:e}let z={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function C(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function N(e,t){return t.map(t=>(t.path??(t.path=[]),t.path.unshift(e),t))}function j(e){return"string"==typeof e?e:e?.message}function O(e,t,r){let s={...e,path:e.path??[]};if(!e.message){let o=j(e.inst?._zod.def?.error?.(e))??j(t?.error?.(e))??j(r.customError?.(e))??j(r.localeError?.(e))??"Invalid input";s.message=o}return delete s.inst,delete s.continue,t?.reportInput||delete s.input,s}function R(e){return Array.isArray(e)?"array":"string"==typeof e?"string":"unknown"}function M(...e){let[t,r,s]=e;return"string"==typeof t?{message:t,code:"custom",input:r,inst:s}:{...t}}let A=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,_,2),enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},q=p("$ZodError",A),U=p("$ZodError",A,{Parent:Error}),D=e=>(t,r,s)=>{let o=s?{...s,async:!1}:{async:!1},n=t._zod.run({value:r,issues:[]},o);if(n instanceof Promise)throw new h;return n.issues.length?{success:!1,error:new(e??q)(n.issues.map(e=>O(e,o,m())))}:{success:!0,data:n.value}},V=D(U),L=e=>async(t,r,s)=>{let o=s?Object.assign(s,{async:!0}):{async:!0},n=t._zod.run({value:r,issues:[]},o);return n instanceof Promise&&(n=await n),n.issues.length?{success:!1,error:new e(n.issues.map(e=>O(e,o,m())))}:{success:!0,data:n.value}},F=L(U);function Z(e){return!!e._zod}function H(e,t){return Z(e)?V(e,t):e.safeParse(t)}function K(e){let t;if(e&&(t=Z(e)?e._zod?.def?.shape:e.shape)){if("function"==typeof t)try{return t()}catch{return}return t}}let W=/^[cC][^\s-]{8,}$/,G=/^[0-9a-z]+$/,B=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,J=/^[0-9a-vA-V]{20}$/,Q=/^[A-Za-z0-9]{27}$/,Y=/^[a-zA-Z0-9_-]{21}$/,X=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,ee=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,et=e=>e?RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,er=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,es=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eo=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,en=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,ei=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ea=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,el=/^[A-Za-z0-9_-]*$/,eu=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,ec=/^\+(?:[0-9]){6,14}[0-9]$/,ed="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",ep=RegExp(`^${ed}$`);function eh(e){let t="(?:[01]\\d|2[0-3]):[0-5]\\d";return"number"==typeof e.precision?-1===e.precision?`${t}`:0===e.precision?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}let ef=e=>{let t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return RegExp(`^${t}$`)},em=/^\d+$/,e_=/^-?\d+(?:\.\d+)?/i,ey=/true|false/i,ev=/null/i,eg=/^[^A-Z]*$/,ew=/^[^a-z]*$/,e$=p("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),eb={number:"number",bigint:"bigint",object:"date"},ek=p("$ZodCheckLessThan",(e,t)=>{e$.init(e,t);let r=eb[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,s=(t.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<s&&(t.inclusive?r.maximum=t.value:r.exclusiveMaximum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value<=t.value:s.value<t.value)||s.issues.push({origin:r,code:"too_big",maximum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eE=p("$ZodCheckGreaterThan",(e,t)=>{e$.init(e,t);let r=eb[typeof t.value];e._zod.onattach.push(e=>{let r=e._zod.bag,s=(t.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>s&&(t.inclusive?r.minimum=t.value:r.exclusiveMinimum=t.value)}),e._zod.check=s=>{(t.inclusive?s.value>=t.value:s.value>t.value)||s.issues.push({origin:r,code:"too_small",minimum:t.value,input:s.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),eS=p("$ZodCheckMultipleOf",(e,t)=>{e$.init(e,t),e._zod.onattach.push(e=>{var r;(r=e._zod.bag).multipleOf??(r.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw Error("Cannot mix number and bigint in multiple_of check.");("bigint"==typeof r.value?r.value%t.value===BigInt(0):0===function(e,t){let r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,o=r>s?r:s;return Number.parseInt(e.toFixed(o).replace(".",""))%Number.parseInt(t.toFixed(o).replace(".",""))/10**o}(r.value,t.value))||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),eT=p("$ZodCheckNumberFormat",(e,t)=>{e$.init(e,t),t.format=t.format||"float64";let r=t.format?.includes("int"),s=r?"int":"number",[o,n]=z[t.format];e._zod.onattach.push(e=>{let s=e._zod.bag;s.format=t.format,s.minimum=o,s.maximum=n,r&&(s.pattern=em)}),e._zod.check=i=>{let a=i.value;if(r){if(!Number.isInteger(a)){i.issues.push({expected:s,format:t.format,code:"invalid_type",input:a,inst:e});return}if(!Number.isSafeInteger(a)){a>0?i.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort}):i.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,continue:!t.abort});return}}a<o&&i.issues.push({origin:"number",input:a,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),a>n&&i.issues.push({origin:"number",input:a,code:"too_big",maximum:n,inst:e})}}),eP=p("$ZodCheckMaxLength",(e,t)=>{var r;e$.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<r&&(e._zod.bag.maximum=t.maximum)}),e._zod.check=r=>{let s=r.value;if(s.length<=t.maximum)return;let o=R(s);r.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),ex=p("$ZodCheckMinLength",(e,t)=>{var r;e$.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>r&&(e._zod.bag.minimum=t.minimum)}),e._zod.check=r=>{let s=r.value;if(s.length>=t.minimum)return;let o=R(s);r.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),eI=p("$ZodCheckLengthEquals",(e,t)=>{var r;e$.init(e,t),(r=e._zod.def).when??(r.when=e=>{let t=e.value;return null!=t&&void 0!==t.length}),e._zod.onattach.push(e=>{let r=e._zod.bag;r.minimum=t.length,r.maximum=t.length,r.length=t.length}),e._zod.check=r=>{let s=r.value,o=s.length;if(o===t.length)return;let n=R(s),i=o>t.length;r.issues.push({origin:n,...i?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:r.value,inst:e,continue:!t.abort})}}),ez=p("$ZodCheckStringFormat",(e,t)=>{var r,s;e$.init(e,t),e._zod.onattach.push(e=>{let r=e._zod.bag;r.format=t.format,t.pattern&&(r.patterns??(r.patterns=new Set),r.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:t.format,input:r.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(s=e._zod).check??(s.check=()=>{})}),eC=p("$ZodCheckRegex",(e,t)=>{ez.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,t.pattern.test(r.value)||r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),eN=p("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=eg),ez.init(e,t)}),ej=p("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=ew),ez.init(e,t)}),eO=p("$ZodCheckIncludes",(e,t)=>{e$.init(e,t);let r=P(t.includes),s=new RegExp("number"==typeof t.position?`^.{${t.position}}${r}`:r);t.pattern=s,e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(s)}),e._zod.check=r=>{r.value.includes(t.includes,t.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:r.value,inst:e,continue:!t.abort})}}),eR=p("$ZodCheckStartsWith",(e,t)=>{e$.init(e,t);let r=RegExp(`^${P(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.startsWith(t.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:r.value,inst:e,continue:!t.abort})}}),eM=p("$ZodCheckEndsWith",(e,t)=>{e$.init(e,t);let r=RegExp(`.*${P(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(e=>{let t=e._zod.bag;t.patterns??(t.patterns=new Set),t.patterns.add(r)}),e._zod.check=r=>{r.value.endsWith(t.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:r.value,inst:e,continue:!t.abort})}}),eA=p("$ZodCheckOverwrite",(e,t)=>{e$.init(e,t),e._zod.check=e=>{e.value=t.tx(e.value)}});class eq{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if("function"==typeof e){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let t=e.split("\n").filter(e=>e),r=Math.min(...t.map(e=>e.length-e.trimStart().length));for(let e of t.map(e=>e.slice(r)).map(e=>" ".repeat(2*this.indent)+e))this.content.push(e)}compile(){return Function(...this?.args,[...(this?.content??[""]).map(e=>`  ${e}`)].join("\n"))}}let eU={major:4,minor:0,patch:0},eD=p("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=eU;let s=[...e._zod.def.checks??[]];for(let t of(e._zod.traits.has("$ZodCheck")&&s.unshift(e),s))for(let r of t._zod.onattach)r(e);if(0===s.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{let t=(e,t,r)=>{let s,o=C(e);for(let n of t){if(n._zod.def.when){if(!n._zod.def.when(e))continue}else if(o)continue;let t=e.issues.length,i=n._zod.check(e);if(i instanceof Promise&&r?.async===!1)throw new h;if(s||i instanceof Promise)s=(s??Promise.resolve()).then(async()=>{await i,e.issues.length===t||o||(o=C(e,t))});else{if(e.issues.length===t)continue;o||(o=C(e,t))}}return s?s.then(()=>e):e};e._zod.run=(r,o)=>{let n=e._zod.parse(r,o);if(n instanceof Promise){if(!1===o.async)throw new h;return n.then(e=>t(e,s,o))}return t(n,s,o)}}e["~standard"]={validate:t=>{try{let r=V(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return F(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),eV=p("$ZodString",(e,t)=>{eD.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??ef(e._zod.bag),e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=String(r.value)}catch(e){}return"string"==typeof r.value||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),eL=p("$ZodStringFormat",(e,t)=>{ez.init(e,t),eV.init(e,t)}),eF=p("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=ee),eL.init(e,t)}),eZ=p("$ZodUUID",(e,t)=>{if(t.version){let e={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(void 0===e)throw Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=et(e))}else t.pattern??(t.pattern=et());eL.init(e,t)}),eH=p("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=er),eL.init(e,t)}),eK=p("$ZodURL",(e,t)=>{eL.init(e,t),e._zod.check=r=>{try{let s=r.value,o=new URL(s),n=o.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(o.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:eu.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(o.protocol.endsWith(":")?o.protocol.slice(0,-1):o.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!s.endsWith("/")&&n.endsWith("/")?r.value=n.slice(0,-1):r.value=n;return}catch(s){r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),eW=p("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),eL.init(e,t)}),eG=p("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Y),eL.init(e,t)}),eB=p("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=W),eL.init(e,t)}),eJ=p("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=G),eL.init(e,t)}),eQ=p("$ZodULID",(e,t)=>{t.pattern??(t.pattern=B),eL.init(e,t)}),eY=p("$ZodXID",(e,t)=>{t.pattern??(t.pattern=J),eL.init(e,t)}),eX=p("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Q),eL.init(e,t)}),e0=p("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=function(e){let t=eh({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");let s=`${t}(?:${r.join("|")})`;return RegExp(`^${ed}T(?:${s})$`)}(t)),eL.init(e,t)}),e1=p("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=ep),eL.init(e,t)}),e9=p("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=RegExp(`^${eh(t)}$`)),eL.init(e,t)}),e2=p("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=X),eL.init(e,t)}),e4=p("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=es),eL.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv4"})}),e3=p("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=eo),eL.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),e7=p("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=en),eL.init(e,t)}),e5=p("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=ei),eL.init(e,t),e._zod.check=r=>{let[s,o]=r.value.split("/");try{if(!o)throw Error();let e=Number(o);if(`${e}`!==o||e<0||e>128)throw Error();new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function e6(e){if(""===e)return!0;if(e.length%4!=0)return!1;try{return atob(e),!0}catch{return!1}}let e8=p("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=ea),eL.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{e6(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}}),te=p("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=el),eL.init(e,t),e._zod.onattach.push(e=>{e._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{!function(e){if(!el.test(e))return!1;let t=e.replace(/[-_]/g,e=>"-"===e?"+":"/");return e6(t.padEnd(4*Math.ceil(t.length/4),"="))}(r.value)&&r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),tt=p("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ec),eL.init(e,t)}),tr=p("$ZodJWT",(e,t)=>{eL.init(e,t),e._zod.check=r=>{!function(e,t=null){try{let r=e.split(".");if(3!==r.length)return!1;let[s]=r;if(!s)return!1;let o=JSON.parse(atob(s));if("typ"in o&&o?.typ!=="JWT"||!o.alg||t&&(!("alg"in o)||o.alg!==t))return!1;return!0}catch{return!1}}(r.value,t.alg)&&r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),ts=p("$ZodNumber",(e,t)=>{eD.init(e,t),e._zod.pattern=e._zod.bag.pattern??e_,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=Number(r.value)}catch(e){}let o=r.value;if("number"==typeof o&&!Number.isNaN(o)&&Number.isFinite(o))return r;let n="number"==typeof o?Number.isNaN(o)?"NaN":Number.isFinite(o)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:o,inst:e,...n?{received:n}:{}}),r}}),to=p("$ZodNumber",(e,t)=>{eT.init(e,t),ts.init(e,t)}),tn=p("$ZodBoolean",(e,t)=>{eD.init(e,t),e._zod.pattern=ey,e._zod.parse=(r,s)=>{if(t.coerce)try{r.value=!!r.value}catch(e){}let o=r.value;return"boolean"==typeof o||r.issues.push({expected:"boolean",code:"invalid_type",input:o,inst:e}),r}}),ti=p("$ZodNull",(e,t)=>{eD.init(e,t),e._zod.pattern=ev,e._zod.values=new Set([null]),e._zod.parse=(t,r)=>{let s=t.value;return null===s||t.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),t}}),ta=p("$ZodAny",(e,t)=>{eD.init(e,t),e._zod.parse=e=>e}),tl=p("$ZodUnknown",(e,t)=>{eD.init(e,t),e._zod.parse=e=>e}),tu=p("$ZodNever",(e,t)=>{eD.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});function tc(e,t,r){e.issues.length&&t.issues.push(...N(r,e.issues)),t.value[r]=e.value}let td=p("$ZodArray",(e,t)=>{eD.init(e,t),e._zod.parse=(r,s)=>{let o=r.value;if(!Array.isArray(o))return r.issues.push({expected:"array",code:"invalid_type",input:o,inst:e}),r;r.value=Array(o.length);let n=[];for(let e=0;e<o.length;e++){let i=o[e],a=t.element._zod.run({value:i,issues:[]},s);a instanceof Promise?n.push(a.then(t=>tc(t,r,e))):tc(a,r,e)}return n.length?Promise.all(n).then(()=>r):r}});function tp(e,t,r){e.issues.length&&t.issues.push(...N(r,e.issues)),t.value[r]=e.value}function th(e,t,r,s){e.issues.length?void 0===s[r]?r in s?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...N(r,e.issues)):void 0===e.value?r in s&&(t.value[r]=void 0):t.value[r]=e.value}let tf=p("$ZodObject",(e,t)=>{let r,s;eD.init(e,t);let o=y(()=>{let e=Object.keys(t.shape);for(let r of e)if(!(t.shape[r]instanceof eD))throw Error(`Invalid element at key "${r}": expected a Zod schema`);let r=function(e){return Object.keys(e).filter(t=>"optional"===e[t]._zod.optin&&"optional"===e[t]._zod.optout)}(t.shape);return{shape:t.shape,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(r)}});g(e._zod,"propValues",()=>{let e=t.shape,r={};for(let t in e){let s=e[t]._zod;if(s.values)for(let e of(r[t]??(r[t]=new Set),s.values))r[t].add(e)}return r});let n=e=>{let t=new eq(["shape","payload","ctx"]),r=o.value,s=e=>{let t=$(e);return`shape[${t}]._zod.run({ value: input[${t}], issues: [] }, ctx)`};t.write("const input = payload.value;");let n=Object.create(null),i=0;for(let e of r.keys)n[e]=`key_${i++}`;for(let e of(t.write("const newResult = {}"),r.keys))if(r.optionalKeys.has(e)){let r=n[e];t.write(`const ${r} = ${s(e)};`);let o=$(e);t.write(`
        if (${r}.issues.length) {
          if (input[${o}] === undefined) {
            if (${o} in input) {
              newResult[${o}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${r}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${o}, ...iss.path] : [${o}],
              }))
            );
          }
        } else if (${r}.value === undefined) {
          if (${o} in input) newResult[${o}] = undefined;
        } else {
          newResult[${o}] = ${r}.value;
        }
        `)}else{let r=n[e];t.write(`const ${r} = ${s(e)};`),t.write(`
          if (${r}.issues.length) payload.issues = payload.issues.concat(${r}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$(e)}, ...iss.path] : [${$(e)}]
          })));`),t.write(`newResult[${$(e)}] = ${r}.value`)}t.write("payload.value = newResult;"),t.write("return payload;");let a=t.compile();return(t,r)=>a(e,t,r)},i=!f.jitless,a=i&&E.value,l=t.catchall;e._zod.parse=(u,c)=>{s??(s=o.value);let d=u.value;if(!k(d))return u.issues.push({expected:"object",code:"invalid_type",input:d,inst:e}),u;let p=[];if(i&&a&&c?.async===!1&&!0!==c.jitless)r||(r=n(t.shape)),u=r(u,c);else{u.value={};let e=s.shape;for(let t of s.keys){let r=e[t],s=r._zod.run({value:d[t],issues:[]},c),o="optional"===r._zod.optin&&"optional"===r._zod.optout;s instanceof Promise?p.push(s.then(e=>o?th(e,u,t,d):tp(e,u,t))):o?th(s,u,t,d):tp(s,u,t)}}if(!l)return p.length?Promise.all(p).then(()=>u):u;let h=[],f=s.keySet,m=l._zod,_=m.def.type;for(let e of Object.keys(d)){if(f.has(e))continue;if("never"===_){h.push(e);continue}let t=m.run({value:d[e],issues:[]},c);t instanceof Promise?p.push(t.then(t=>tp(t,u,e))):tp(t,u,e)}return(h.length&&u.issues.push({code:"unrecognized_keys",keys:h,input:d,inst:e}),p.length)?Promise.all(p).then(()=>u):u}});function tm(e,t,r,s){for(let r of e)if(0===r.issues.length)return t.value=r.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(e=>e.issues.map(e=>O(e,s,m())))}),t}let t_=p("$ZodUnion",(e,t)=>{eD.init(e,t),g(e._zod,"optin",()=>t.options.some(e=>"optional"===e._zod.optin)?"optional":void 0),g(e._zod,"optout",()=>t.options.some(e=>"optional"===e._zod.optout)?"optional":void 0),g(e._zod,"values",()=>{if(t.options.every(e=>e._zod.values))return new Set(t.options.flatMap(e=>Array.from(e._zod.values)))}),g(e._zod,"pattern",()=>{if(t.options.every(e=>e._zod.pattern)){let e=t.options.map(e=>e._zod.pattern);return RegExp(`^(${e.map(e=>v(e.source)).join("|")})$`)}}),e._zod.parse=(r,s)=>{let o=!1,n=[];for(let e of t.options){let t=e._zod.run({value:r.value,issues:[]},s);if(t instanceof Promise)n.push(t),o=!0;else{if(0===t.issues.length)return t;n.push(t)}}return o?Promise.all(n).then(t=>tm(t,r,e,s)):tm(n,r,e,s)}}),ty=p("$ZodDiscriminatedUnion",(e,t)=>{t_.init(e,t);let r=e._zod.parse;g(e._zod,"propValues",()=>{let e={};for(let r of t.options){let s=r._zod.propValues;if(!s||0===Object.keys(s).length)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(r)}"`);for(let[t,r]of Object.entries(s))for(let s of(e[t]||(e[t]=new Set),r))e[t].add(s)}return e});let s=y(()=>{let e=t.options,r=new Map;for(let s of e){let e=s._zod.propValues[t.discriminator];if(!e||0===e.size)throw Error(`Invalid discriminated union option at index "${t.options.indexOf(s)}"`);for(let t of e){if(r.has(t))throw Error(`Duplicate discriminator value "${String(t)}"`);r.set(t,s)}}return r});e._zod.parse=(o,n)=>{let i=o.value;if(!k(i))return o.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),o;let a=s.value.get(i?.[t.discriminator]);return a?a._zod.run(o,n):t.unionFallback?r(o,n):(o.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),o)}}),tv=p("$ZodIntersection",(e,t)=>{eD.init(e,t),e._zod.parse=(e,r)=>{let s=e.value,o=t.left._zod.run({value:s,issues:[]},r),n=t.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||n instanceof Promise?Promise.all([o,n]).then(([t,r])=>tg(e,t,r)):tg(e,o,n)}});function tg(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),C(e))return e;let s=function e(t,r){if(t===r||t instanceof Date&&r instanceof Date&&+t==+r)return{valid:!0,data:t};if(S(t)&&S(r)){let s=Object.keys(r),o=Object.keys(t).filter(e=>-1!==s.indexOf(e)),n={...t,...r};for(let s of o){let o=e(t[s],r[s]);if(!o.valid)return{valid:!1,mergeErrorPath:[s,...o.mergeErrorPath]};n[s]=o.data}return{valid:!0,data:n}}if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return{valid:!1,mergeErrorPath:[]};let s=[];for(let o=0;o<t.length;o++){let n=e(t[o],r[o]);if(!n.valid)return{valid:!1,mergeErrorPath:[o,...n.mergeErrorPath]};s.push(n.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}(t.value,r.value);if(!s.valid)throw Error(`Unmergable intersection. Error path: ${JSON.stringify(s.mergeErrorPath)}`);return e.value=s.data,e}let tw=p("$ZodRecord",(e,t)=>{eD.init(e,t),e._zod.parse=(r,s)=>{let o=r.value;if(!S(o))return r.issues.push({expected:"record",code:"invalid_type",input:o,inst:e}),r;let n=[];if(t.keyType._zod.values){let i;let a=t.keyType._zod.values;for(let e of(r.value={},a))if("string"==typeof e||"number"==typeof e||"symbol"==typeof e){let i=t.valueType._zod.run({value:o[e],issues:[]},s);i instanceof Promise?n.push(i.then(t=>{t.issues.length&&r.issues.push(...N(e,t.issues)),r.value[e]=t.value})):(i.issues.length&&r.issues.push(...N(e,i.issues)),r.value[e]=i.value)}for(let e in o)a.has(e)||(i=i??[]).push(e);i&&i.length>0&&r.issues.push({code:"unrecognized_keys",input:o,inst:e,keys:i})}else for(let i of(r.value={},Reflect.ownKeys(o))){if("__proto__"===i)continue;let a=t.keyType._zod.run({value:i,issues:[]},s);if(a instanceof Promise)throw Error("Async schemas not supported in object keys currently");if(a.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:a.issues.map(e=>O(e,s,m())),input:i,path:[i],inst:e}),r.value[a.value]=a.value;continue}let l=t.valueType._zod.run({value:o[i],issues:[]},s);l instanceof Promise?n.push(l.then(e=>{e.issues.length&&r.issues.push(...N(i,e.issues)),r.value[a.value]=e.value})):(l.issues.length&&r.issues.push(...N(i,l.issues)),r.value[a.value]=l.value)}return n.length?Promise.all(n).then(()=>r):r}}),t$=p("$ZodEnum",(e,t)=>{eD.init(e,t);let r=function(e){let t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}(t.entries);e._zod.values=new Set(r),e._zod.pattern=RegExp(`^(${r.filter(e=>T.has(typeof e)).map(e=>"string"==typeof e?P(e):e.toString()).join("|")})$`),e._zod.parse=(t,s)=>{let o=t.value;return e._zod.values.has(o)||t.issues.push({code:"invalid_value",values:r,input:o,inst:e}),t}}),tb=p("$ZodLiteral",(e,t)=>{eD.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=RegExp(`^(${t.values.map(e=>"string"==typeof e?P(e):e?e.toString():String(e)).join("|")})$`),e._zod.parse=(r,s)=>{let o=r.value;return e._zod.values.has(o)||r.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),r}}),tk=p("$ZodTransform",(e,t)=>{eD.init(e,t),e._zod.parse=(e,r)=>{let s=t.transform(e.value,e);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(t=>(e.value=t,e));if(s instanceof Promise)throw new h;return e.value=s,e}}),tE=p("$ZodOptional",(e,t)=>{eD.init(e,t),e._zod.optin="optional",e._zod.optout="optional",g(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),g(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${v(e.source)})?$`):void 0}),e._zod.parse=(e,r)=>"optional"===t.innerType._zod.optin?t.innerType._zod.run(e,r):void 0===e.value?e:t.innerType._zod.run(e,r)}),tS=p("$ZodNullable",(e,t)=>{eD.init(e,t),g(e._zod,"optin",()=>t.innerType._zod.optin),g(e._zod,"optout",()=>t.innerType._zod.optout),g(e._zod,"pattern",()=>{let e=t.innerType._zod.pattern;return e?RegExp(`^(${v(e.source)}|null)$`):void 0}),g(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(e,r)=>null===e.value?e:t.innerType._zod.run(e,r)}),tT=p("$ZodDefault",(e,t)=>{eD.init(e,t),e._zod.optin="optional",g(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{if(void 0===e.value)return e.value=t.defaultValue,e;let s=t.innerType._zod.run(e,r);return s instanceof Promise?s.then(e=>tP(e,t)):tP(s,t)}});function tP(e,t){return void 0===e.value&&(e.value=t.defaultValue),e}let tx=p("$ZodPrefault",(e,t)=>{eD.init(e,t),e._zod.optin="optional",g(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>(void 0===e.value&&(e.value=t.defaultValue),t.innerType._zod.run(e,r))}),tI=p("$ZodNonOptional",(e,t)=>{eD.init(e,t),g(e._zod,"values",()=>{let e=t.innerType._zod.values;return e?new Set([...e].filter(e=>void 0!==e)):void 0}),e._zod.parse=(r,s)=>{let o=t.innerType._zod.run(r,s);return o instanceof Promise?o.then(t=>tz(t,e)):tz(o,e)}});function tz(e,t){return e.issues.length||void 0!==e.value||e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}let tC=p("$ZodCatch",(e,t)=>{eD.init(e,t),e._zod.optin="optional",g(e._zod,"optout",()=>t.innerType._zod.optout),g(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(e,r)=>{let s=t.innerType._zod.run(e,r);return s instanceof Promise?s.then(s=>(e.value=s.value,s.issues.length&&(e.value=t.catchValue({...e,error:{issues:s.issues.map(e=>O(e,r,m()))},input:e.value}),e.issues=[]),e)):(e.value=s.value,s.issues.length&&(e.value=t.catchValue({...e,error:{issues:s.issues.map(e=>O(e,r,m()))},input:e.value}),e.issues=[]),e)}}),tN=p("$ZodPipe",(e,t)=>{eD.init(e,t),g(e._zod,"values",()=>t.in._zod.values),g(e._zod,"optin",()=>t.in._zod.optin),g(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(e,r)=>{let s=t.in._zod.run(e,r);return s instanceof Promise?s.then(e=>tj(e,t,r)):tj(s,t,r)}});function tj(e,t,r){return C(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}let tO=p("$ZodReadonly",(e,t)=>{eD.init(e,t),g(e._zod,"propValues",()=>t.innerType._zod.propValues),g(e._zod,"values",()=>t.innerType._zod.values),g(e._zod,"optin",()=>t.innerType._zod.optin),g(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(e,r)=>{let s=t.innerType._zod.run(e,r);return s instanceof Promise?s.then(tR):tR(s)}});function tR(e){return e.value=Object.freeze(e.value),e}let tM=p("$ZodCustom",(e,t)=>{e$.init(e,t),eD.init(e,t),e._zod.parse=(e,t)=>e,e._zod.check=r=>{let s=r.value,o=t.fn(s);if(o instanceof Promise)return o.then(t=>tA(t,r,s,e));tA(o,r,s,e)}});function tA(e,t,r,s){if(!e){let e={code:"custom",input:r,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(e.params=s._zod.def.params),t.issues.push(M(e))}}Symbol("ZodOutput"),Symbol("ZodInput");class tq{constructor(){this._map=new Map,this._idmap=new Map}add(e,...t){let r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&"object"==typeof t&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}let tU=new tq;function tD(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...I(t)})}function tV(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...I(t)})}function tL(e,t){return new ek({check:"less_than",...I(t),value:e,inclusive:!1})}function tF(e,t){return new ek({check:"less_than",...I(t),value:e,inclusive:!0})}function tZ(e,t){return new eE({check:"greater_than",...I(t),value:e,inclusive:!1})}function tH(e,t){return new eE({check:"greater_than",...I(t),value:e,inclusive:!0})}function tK(e,t){return new eS({check:"multiple_of",...I(t),value:e})}function tW(e,t){return new eP({check:"max_length",...I(t),maximum:e})}function tG(e,t){return new ex({check:"min_length",...I(t),minimum:e})}function tB(e,t){return new eI({check:"length_equals",...I(t),length:e})}function tJ(e){return new eA({check:"overwrite",tx:e})}let tQ=p("ZodISODateTime",(e,t)=>{e0.init(e,t),rr.init(e,t)});function tY(e){return new tQ({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...I(e)})}let tX=p("ZodISODate",(e,t)=>{e1.init(e,t),rr.init(e,t)}),t0=p("ZodISOTime",(e,t)=>{e9.init(e,t),rr.init(e,t)}),t1=p("ZodISODuration",(e,t)=>{e2.init(e,t),rr.init(e,t)}),t9=(e,t)=>{q.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:t=>(function(e,t){let r=t||function(e){return e.message},s={_errors:[]},o=e=>{for(let t of e.issues)if("invalid_union"===t.code&&t.errors.length)t.errors.map(e=>o({issues:e}));else if("invalid_key"===t.code)o({issues:t.issues});else if("invalid_element"===t.code)o({issues:t.issues});else if(0===t.path.length)s._errors.push(r(t));else{let e=s,o=0;for(;o<t.path.length;){let s=t.path[o];o===t.path.length-1?(e[s]=e[s]||{_errors:[]},e[s]._errors.push(r(t))):e[s]=e[s]||{_errors:[]},e=e[s],o++}}};return o(e),s})(e,t)},flatten:{value:t=>(function(e,t=e=>e.message){let r={},s=[];for(let o of e.issues)o.path.length>0?(r[o.path[0]]=r[o.path[0]]||[],r[o.path[0]].push(t(o))):s.push(t(o));return{formErrors:s,fieldErrors:r}})(e,t)},addIssue:{value:t=>e.issues.push(t)},addIssues:{value:t=>e.issues.push(...t)},isEmpty:{get:()=>0===e.issues.length}})};p("ZodError",t9);let t2=p("ZodError",t9,{Parent:Error}),t4=(e,t,r,s)=>{let o=r?Object.assign(r,{async:!1}):{async:!1},n=e._zod.run({value:t,issues:[]},o);if(n instanceof Promise)throw new h;if(n.issues.length){let e=new(s?.Err??t2)(n.issues.map(e=>O(e,o,m())));throw b(e,s?.callee),e}return n.value},t3=async(e,t,r,s)=>{let o=r?Object.assign(r,{async:!0}):{async:!0},n=e._zod.run({value:t,issues:[]},o);if(n instanceof Promise&&(n=await n),n.issues.length){let e=new(s?.Err??t2)(n.issues.map(e=>O(e,o,m())));throw b(e,s?.callee),e}return n.value},t7=D(t2),t5=L(t2),t6=p("ZodType",(e,t)=>(eD.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(e=>"function"==typeof e?{_zod:{check:e,def:{check:"custom"},onattach:[]}}:e)]}),e.clone=(t,r)=>x(e,t,r),e.brand=()=>e,e.register=(t,r)=>(t.add(e,r),e),e.parse=(t,r)=>t4(e,t,r,{callee:e.parse}),e.safeParse=(t,r)=>t7(e,t,r),e.parseAsync=async(t,r)=>t3(e,t,r,{callee:e.parseAsync}),e.safeParseAsync=async(t,r)=>t5(e,t,r),e.spa=e.safeParseAsync,e.refine=(t,r)=>e.check(function(e,t={}){return new se({type:"custom",check:"custom",fn:e,...I(t)})}(t,r)),e.superRefine=t=>e.check(function(e){let t=function(e){let t=new e$({check:"custom"});return t._zod.check=e,t}(r=>(r.addIssue=e=>{"string"==typeof e?r.issues.push(M(e,r.value,t._zod.def)):(e.fatal&&(e.continue=!1),e.code??(e.code="custom"),e.input??(e.input=r.value),e.inst??(e.inst=t),e.continue??(e.continue=!t._zod.def.abort),r.issues.push(M(e)))},e(r.value,r)));return t}(t)),e.overwrite=t=>e.check(tJ(t)),e.optional=()=>r0(e),e.nullable=()=>r9(e),e.nullish=()=>r0(r9(e)),e.nonoptional=t=>new r3({type:"nonoptional",innerType:e,...I(t)}),e.array=()=>rR(e),e.or=t=>rD([e,t]),e.and=t=>rZ(e,t),e.transform=t=>r6(e,rY(t)),e.default=t=>(function(e,t){return new r2({type:"default",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})})(e,t),e.prefault=t=>(function(e,t){return new r4({type:"prefault",innerType:e,get defaultValue(){return"function"==typeof t?t():t}})})(e,t),e.catch=t=>(function(e,t){return new r7({type:"catch",innerType:e,catchValue:"function"==typeof t?t:()=>t})})(e,t),e.pipe=t=>r6(e,t),e.readonly=()=>new r8({type:"readonly",innerType:e}),e.describe=t=>{let r=e.clone();return tU.add(r,{description:t}),r},Object.defineProperty(e,"description",{get:()=>tU.get(e)?.description,configurable:!0}),e.meta=(...t)=>{if(0===t.length)return tU.get(e);let r=e.clone();return tU.add(r,t[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),t8=p("_ZodString",(e,t)=>{eV.init(e,t),t6.init(e,t);let r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...t)=>e.check(function(e,t){return new eC({check:"string_format",format:"regex",...I(t),pattern:e})}(...t)),e.includes=(...t)=>e.check(function(e,t){return new eO({check:"string_format",format:"includes",...I(t),includes:e})}(...t)),e.startsWith=(...t)=>e.check(function(e,t){return new eR({check:"string_format",format:"starts_with",...I(t),prefix:e})}(...t)),e.endsWith=(...t)=>e.check(function(e,t){return new eM({check:"string_format",format:"ends_with",...I(t),suffix:e})}(...t)),e.min=(...t)=>e.check(tG(...t)),e.max=(...t)=>e.check(tW(...t)),e.length=(...t)=>e.check(tB(...t)),e.nonempty=(...t)=>e.check(tG(1,...t)),e.lowercase=t=>e.check(new eN({check:"string_format",format:"lowercase",...I(t)})),e.uppercase=t=>e.check(new ej({check:"string_format",format:"uppercase",...I(t)})),e.trim=()=>e.check(tJ(e=>e.trim())),e.normalize=(...t)=>e.check(function(e){return tJ(t=>t.normalize(e))}(...t)),e.toLowerCase=()=>e.check(tJ(e=>e.toLowerCase())),e.toUpperCase=()=>e.check(tJ(e=>e.toUpperCase()))}),re=p("ZodString",(e,t)=>{eV.init(e,t),t8.init(e,t),e.email=t=>e.check(new rs({type:"string",format:"email",check:"string_format",abort:!1,...I(t)})),e.url=t=>e.check(tV(ri,t)),e.jwt=t=>e.check(new r$({type:"string",format:"jwt",check:"string_format",abort:!1,...I(t)})),e.emoji=t=>e.check(new ra({type:"string",format:"emoji",check:"string_format",abort:!1,...I(t)})),e.guid=t=>e.check(tD(ro,t)),e.uuid=t=>e.check(new rn({type:"string",format:"uuid",check:"string_format",abort:!1,...I(t)})),e.uuidv4=t=>e.check(new rn({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...I(t)})),e.uuidv6=t=>e.check(new rn({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...I(t)})),e.uuidv7=t=>e.check(new rn({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...I(t)})),e.nanoid=t=>e.check(new rl({type:"string",format:"nanoid",check:"string_format",abort:!1,...I(t)})),e.guid=t=>e.check(tD(ro,t)),e.cuid=t=>e.check(new ru({type:"string",format:"cuid",check:"string_format",abort:!1,...I(t)})),e.cuid2=t=>e.check(new rc({type:"string",format:"cuid2",check:"string_format",abort:!1,...I(t)})),e.ulid=t=>e.check(new rd({type:"string",format:"ulid",check:"string_format",abort:!1,...I(t)})),e.base64=t=>e.check(new rv({type:"string",format:"base64",check:"string_format",abort:!1,...I(t)})),e.base64url=t=>e.check(new rg({type:"string",format:"base64url",check:"string_format",abort:!1,...I(t)})),e.xid=t=>e.check(new rp({type:"string",format:"xid",check:"string_format",abort:!1,...I(t)})),e.ksuid=t=>e.check(new rh({type:"string",format:"ksuid",check:"string_format",abort:!1,...I(t)})),e.ipv4=t=>e.check(new rf({type:"string",format:"ipv4",check:"string_format",abort:!1,...I(t)})),e.ipv6=t=>e.check(new rm({type:"string",format:"ipv6",check:"string_format",abort:!1,...I(t)})),e.cidrv4=t=>e.check(new r_({type:"string",format:"cidrv4",check:"string_format",abort:!1,...I(t)})),e.cidrv6=t=>e.check(new ry({type:"string",format:"cidrv6",check:"string_format",abort:!1,...I(t)})),e.e164=t=>e.check(new rw({type:"string",format:"e164",check:"string_format",abort:!1,...I(t)})),e.datetime=t=>e.check(tY(t)),e.date=t=>e.check(new tX({type:"string",format:"date",check:"string_format",...I(t)})),e.time=t=>e.check(new t0({type:"string",format:"time",check:"string_format",precision:null,...I(t)})),e.duration=t=>e.check(new t1({type:"string",format:"duration",check:"string_format",...I(t)}))});function rt(e){return new re({type:"string",...I(e)})}let rr=p("ZodStringFormat",(e,t)=>{eL.init(e,t),t8.init(e,t)}),rs=p("ZodEmail",(e,t)=>{eH.init(e,t),rr.init(e,t)}),ro=p("ZodGUID",(e,t)=>{eF.init(e,t),rr.init(e,t)}),rn=p("ZodUUID",(e,t)=>{eZ.init(e,t),rr.init(e,t)}),ri=p("ZodURL",(e,t)=>{eK.init(e,t),rr.init(e,t)}),ra=p("ZodEmoji",(e,t)=>{eW.init(e,t),rr.init(e,t)}),rl=p("ZodNanoID",(e,t)=>{eG.init(e,t),rr.init(e,t)}),ru=p("ZodCUID",(e,t)=>{eB.init(e,t),rr.init(e,t)}),rc=p("ZodCUID2",(e,t)=>{eJ.init(e,t),rr.init(e,t)}),rd=p("ZodULID",(e,t)=>{eQ.init(e,t),rr.init(e,t)}),rp=p("ZodXID",(e,t)=>{eY.init(e,t),rr.init(e,t)}),rh=p("ZodKSUID",(e,t)=>{eX.init(e,t),rr.init(e,t)}),rf=p("ZodIPv4",(e,t)=>{e4.init(e,t),rr.init(e,t)}),rm=p("ZodIPv6",(e,t)=>{e3.init(e,t),rr.init(e,t)}),r_=p("ZodCIDRv4",(e,t)=>{e7.init(e,t),rr.init(e,t)}),ry=p("ZodCIDRv6",(e,t)=>{e5.init(e,t),rr.init(e,t)}),rv=p("ZodBase64",(e,t)=>{e8.init(e,t),rr.init(e,t)}),rg=p("ZodBase64URL",(e,t)=>{te.init(e,t),rr.init(e,t)}),rw=p("ZodE164",(e,t)=>{tt.init(e,t),rr.init(e,t)}),r$=p("ZodJWT",(e,t)=>{tr.init(e,t),rr.init(e,t)}),rb=p("ZodNumber",(e,t)=>{ts.init(e,t),t6.init(e,t),e.gt=(t,r)=>e.check(tZ(t,r)),e.gte=(t,r)=>e.check(tH(t,r)),e.min=(t,r)=>e.check(tH(t,r)),e.lt=(t,r)=>e.check(tL(t,r)),e.lte=(t,r)=>e.check(tF(t,r)),e.max=(t,r)=>e.check(tF(t,r)),e.int=t=>e.check(rS(t)),e.safe=t=>e.check(rS(t)),e.positive=t=>e.check(tZ(0,t)),e.nonnegative=t=>e.check(tH(0,t)),e.negative=t=>e.check(tL(0,t)),e.nonpositive=t=>e.check(tF(0,t)),e.multipleOf=(t,r)=>e.check(tK(t,r)),e.step=(t,r)=>e.check(tK(t,r)),e.finite=()=>e;let r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function rk(e){return new rb({type:"number",checks:[],...I(e)})}let rE=p("ZodNumberFormat",(e,t)=>{to.init(e,t),rb.init(e,t)});function rS(e){return new rE({type:"number",check:"number_format",abort:!1,format:"safeint",...I(e)})}let rT=p("ZodBoolean",(e,t)=>{tn.init(e,t),t6.init(e,t)});function rP(e){return new rT({type:"boolean",...I(e)})}let rx=p("ZodNull",(e,t)=>{ti.init(e,t),t6.init(e,t)});function rI(e){return new rx({type:"null",...I(e)})}let rz=p("ZodAny",(e,t)=>{ta.init(e,t),t6.init(e,t)}),rC=p("ZodUnknown",(e,t)=>{tl.init(e,t),t6.init(e,t)});function rN(){return new rC({type:"unknown"})}let rj=p("ZodNever",(e,t)=>{tu.init(e,t),t6.init(e,t)}),rO=p("ZodArray",(e,t)=>{td.init(e,t),t6.init(e,t),e.element=t.element,e.min=(t,r)=>e.check(tG(t,r)),e.nonempty=t=>e.check(tG(1,t)),e.max=(t,r)=>e.check(tW(t,r)),e.length=(t,r)=>e.check(tB(t,r)),e.unwrap=()=>e.element});function rR(e,t){return new rO({type:"array",element:e,...I(t)})}let rM=p("ZodObject",(e,t)=>{tf.init(e,t),t6.init(e,t),g(e,"shape",()=>t.shape),e.keyof=()=>rG(Object.keys(e._zod.def.shape)),e.catchall=t=>e.clone({...e._zod.def,catchall:t}),e.passthrough=()=>e.clone({...e._zod.def,catchall:rN()}),e.loose=()=>e.clone({...e._zod.def,catchall:rN()}),e.strict=()=>e.clone({...e._zod.def,catchall:new rj({type:"never",...I(void 0)})}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=t=>(function(e,t){if(!S(t))throw Error("Invalid input to extend: expected a plain object");let r={...e._zod.def,get shape(){let r={...e._zod.def.shape,...t};return w(this,"shape",r),r},checks:[]};return x(e,r)})(e,t),e.merge=t=>(function(e,t){return x(e,{...e._zod.def,get shape(){let r={...e._zod.def.shape,...t._zod.def.shape};return w(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})})(e,t),e.pick=t=>(function(e,t){let r={},s=e._zod.def;for(let e in t){if(!(e in s.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&(r[e]=s.shape[e])}return x(e,{...e._zod.def,shape:r,checks:[]})})(e,t),e.omit=t=>(function(e,t){let r={...e._zod.def.shape},s=e._zod.def;for(let e in t){if(!(e in s.shape))throw Error(`Unrecognized key: "${e}"`);t[e]&&delete r[e]}return x(e,{...e._zod.def,shape:r,checks:[]})})(e,t),e.partial=(...t)=>(function(e,t,r){let s=t._zod.def.shape,o={...s};if(r)for(let t in r){if(!(t in s))throw Error(`Unrecognized key: "${t}"`);r[t]&&(o[t]=e?new e({type:"optional",innerType:s[t]}):s[t])}else for(let t in s)o[t]=e?new e({type:"optional",innerType:s[t]}):s[t];return x(t,{...t._zod.def,shape:o,checks:[]})})(rX,e,t[0]),e.required=(...t)=>(function(e,t,r){let s=t._zod.def.shape,o={...s};if(r)for(let t in r){if(!(t in o))throw Error(`Unrecognized key: "${t}"`);r[t]&&(o[t]=new e({type:"nonoptional",innerType:s[t]}))}else for(let t in s)o[t]=new e({type:"nonoptional",innerType:s[t]});return x(t,{...t._zod.def,shape:o,checks:[]})})(r3,e,t[0])});function rA(e,t){return new rM({type:"object",get shape(){return w(this,"shape",{...e}),this.shape},...I(t)})}function rq(e,t){return new rM({type:"object",get shape(){return w(this,"shape",{...e}),this.shape},catchall:rN(),...I(t)})}let rU=p("ZodUnion",(e,t)=>{t_.init(e,t),t6.init(e,t),e.options=t.options});function rD(e,t){return new rU({type:"union",options:e,...I(t)})}let rV=p("ZodDiscriminatedUnion",(e,t)=>{rU.init(e,t),ty.init(e,t)});function rL(e,t,r){return new rV({type:"union",options:t,discriminator:e,...I(r)})}let rF=p("ZodIntersection",(e,t)=>{tv.init(e,t),t6.init(e,t)});function rZ(e,t){return new rF({type:"intersection",left:e,right:t})}let rH=p("ZodRecord",(e,t)=>{tw.init(e,t),t6.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function rK(e,t,r){return new rH({type:"record",keyType:e,valueType:t,...I(r)})}let rW=p("ZodEnum",(e,t)=>{t$.init(e,t),t6.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let r=new Set(Object.keys(t.entries));e.extract=(e,s)=>{let o={};for(let s of e)if(r.has(s))o[s]=t.entries[s];else throw Error(`Key ${s} not found in enum`);return new rW({...t,checks:[],...I(s),entries:o})},e.exclude=(e,s)=>{let o={...t.entries};for(let t of e)if(r.has(t))delete o[t];else throw Error(`Key ${t} not found in enum`);return new rW({...t,checks:[],...I(s),entries:o})}});function rG(e,t){return new rW({type:"enum",entries:Array.isArray(e)?Object.fromEntries(e.map(e=>[e,e])):e,...I(t)})}let rB=p("ZodLiteral",(e,t)=>{tb.init(e,t),t6.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function rJ(e,t){return new rB({type:"literal",values:Array.isArray(e)?e:[e],...I(t)})}let rQ=p("ZodTransform",(e,t)=>{tk.init(e,t),t6.init(e,t),e._zod.parse=(r,s)=>{r.addIssue=s=>{"string"==typeof s?r.issues.push(M(s,r.value,t)):(s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=e),s.continue??(s.continue=!0),r.issues.push(M(s)))};let o=t.transform(r.value,r);return o instanceof Promise?o.then(e=>(r.value=e,r)):(r.value=o,r)}});function rY(e){return new rQ({type:"transform",transform:e})}let rX=p("ZodOptional",(e,t)=>{tE.init(e,t),t6.init(e,t),e.unwrap=()=>e._zod.def.innerType});function r0(e){return new rX({type:"optional",innerType:e})}let r1=p("ZodNullable",(e,t)=>{tS.init(e,t),t6.init(e,t),e.unwrap=()=>e._zod.def.innerType});function r9(e){return new r1({type:"nullable",innerType:e})}let r2=p("ZodDefault",(e,t)=>{tT.init(e,t),t6.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap}),r4=p("ZodPrefault",(e,t)=>{tx.init(e,t),t6.init(e,t),e.unwrap=()=>e._zod.def.innerType}),r3=p("ZodNonOptional",(e,t)=>{tI.init(e,t),t6.init(e,t),e.unwrap=()=>e._zod.def.innerType}),r7=p("ZodCatch",(e,t)=>{tC.init(e,t),t6.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap}),r5=p("ZodPipe",(e,t)=>{tN.init(e,t),t6.init(e,t),e.in=t.in,e.out=t.out});function r6(e,t){return new r5({type:"pipe",in:e,out:t})}let r8=p("ZodReadonly",(e,t)=>{tO.init(e,t),t6.init(e,t)}),se=p("ZodCustom",(e,t)=>{tM.init(e,t),t6.init(e,t)}),st="2025-11-25",sr=[st,"2025-06-18","2025-03-26","2024-11-05","2024-10-07"],ss="io.modelcontextprotocol/related-task",so=function(e,t,r){let s=I(r);return s.abort??(s.abort=!0),new e({type:"custom",check:"custom",fn:t,...s})}(se,(e=>null!==e&&("object"==typeof e||"function"==typeof e))??(()=>!0),void 0),sn=rD([rt(),rk().int()]),si=rt();rq({ttl:rD([rk(),rI()]).optional(),pollInterval:rk().optional()});let sa=rA({ttl:rk().optional()}),sl=rA({taskId:rt()}),su=rq({progressToken:sn.optional(),[ss]:sl.optional()}),sc=rA({_meta:su.optional()}),sd=sc.extend({task:sa.optional()}),sp=e=>sd.safeParse(e).success,sh=rA({method:rt(),params:sc.loose().optional()}),sf=rA({_meta:su.optional()}),sm=rA({method:rt(),params:sf.loose().optional()}),s_=rq({_meta:su.optional()}),sy=rD([rt(),rk().int()]),sv=rA({jsonrpc:rJ("2.0"),id:sy,...sh.shape}).strict(),sg=e=>sv.safeParse(e).success,sw=rA({jsonrpc:rJ("2.0"),...sm.shape}).strict(),s$=e=>sw.safeParse(e).success,sb=rA({jsonrpc:rJ("2.0"),id:sy,result:s_}).strict(),sk=e=>sb.safeParse(e).success;!function(e){e[e.ConnectionClosed=-32e3]="ConnectionClosed",e[e.RequestTimeout=-32001]="RequestTimeout",e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.UrlElicitationRequired=-32042]="UrlElicitationRequired"}(nK||(nK={}));let sE=rA({jsonrpc:rJ("2.0"),id:sy.optional(),error:rA({code:rk().int(),message:rt(),data:rN().optional()})}).strict(),sS=e=>sE.safeParse(e).success,sT=rD([sv,sw,sb,sE]);rD([sb,sE]);let sP=s_.strict(),sx=sf.extend({requestId:sy.optional(),reason:rt().optional()}),sI=sm.extend({method:rJ("notifications/cancelled"),params:sx}),sz=rA({src:rt(),mimeType:rt().optional(),sizes:rR(rt()).optional(),theme:rG(["light","dark"]).optional()}),sC=rA({icons:rR(sz).optional()}),sN=rA({name:rt(),title:rt().optional()}),sj=sN.extend({...sN.shape,...sC.shape,version:rt(),websiteUrl:rt().optional(),description:rt().optional()}),sO=rZ(rA({applyDefaults:rP().optional()}),rK(rt(),rN())),sR=(nL=e=>e&&"object"==typeof e&&!Array.isArray(e)&&0===Object.keys(e).length?{form:{}}:e,nF=rZ(rA({form:sO.optional(),url:so.optional()}),rK(rt(),rN()).optional()),r6(rY(nL),nF)),sM=rq({list:so.optional(),cancel:so.optional(),requests:rq({sampling:rq({createMessage:so.optional()}).optional(),elicitation:rq({create:so.optional()}).optional()}).optional()}),sA=rq({list:so.optional(),cancel:so.optional(),requests:rq({tools:rq({call:so.optional()}).optional()}).optional()}),sq=rA({experimental:rK(rt(),so).optional(),sampling:rA({context:so.optional(),tools:so.optional()}).optional(),elicitation:sR.optional(),roots:rA({listChanged:rP().optional()}).optional(),tasks:sM.optional()}),sU=sc.extend({protocolVersion:rt(),capabilities:sq,clientInfo:sj}),sD=sh.extend({method:rJ("initialize"),params:sU}),sV=rA({experimental:rK(rt(),so).optional(),logging:so.optional(),completions:so.optional(),prompts:rA({listChanged:rP().optional()}).optional(),resources:rA({subscribe:rP().optional(),listChanged:rP().optional()}).optional(),tools:rA({listChanged:rP().optional()}).optional(),tasks:sA.optional()}),sL=s_.extend({protocolVersion:rt(),capabilities:sV,serverInfo:sj,instructions:rt().optional()}),sF=sm.extend({method:rJ("notifications/initialized"),params:sf.optional()}),sZ=sh.extend({method:rJ("ping"),params:sc.optional()}),sH=rA({progress:rk(),total:r0(rk()),message:r0(rt())}),sK=rA({...sf.shape,...sH.shape,progressToken:sn}),sW=sm.extend({method:rJ("notifications/progress"),params:sK}),sG=sc.extend({cursor:si.optional()}),sB=sh.extend({params:sG.optional()}),sJ=s_.extend({nextCursor:si.optional()}),sQ=rG(["working","input_required","completed","failed","cancelled"]),sY=rA({taskId:rt(),status:sQ,ttl:rD([rk(),rI()]),createdAt:rt(),lastUpdatedAt:rt(),pollInterval:r0(rk()),statusMessage:r0(rt())}),sX=s_.extend({task:sY}),s0=sf.merge(sY),s1=sm.extend({method:rJ("notifications/tasks/status"),params:s0}),s9=sh.extend({method:rJ("tasks/get"),params:sc.extend({taskId:rt()})}),s2=s_.merge(sY),s4=sh.extend({method:rJ("tasks/result"),params:sc.extend({taskId:rt()})});s_.loose();let s3=sB.extend({method:rJ("tasks/list")}),s7=sJ.extend({tasks:rR(sY)}),s5=sh.extend({method:rJ("tasks/cancel"),params:sc.extend({taskId:rt()})}),s6=s_.merge(sY),s8=rA({uri:rt(),mimeType:r0(rt()),_meta:rK(rt(),rN()).optional()}),oe=s8.extend({text:rt()}),ot=rt().refine(e=>{try{return atob(e),!0}catch{return!1}},{message:"Invalid Base64 string"}),or=s8.extend({blob:ot}),os=rG(["user","assistant"]),oo=rA({audience:rR(os).optional(),priority:rk().min(0).max(1).optional(),lastModified:tY({offset:!0}).optional()}),on=rA({...sN.shape,...sC.shape,uri:rt(),description:r0(rt()),mimeType:r0(rt()),annotations:oo.optional(),_meta:r0(rq({}))}),oi=rA({...sN.shape,...sC.shape,uriTemplate:rt(),description:r0(rt()),mimeType:r0(rt()),annotations:oo.optional(),_meta:r0(rq({}))}),oa=sB.extend({method:rJ("resources/list")}),ol=sJ.extend({resources:rR(on)}),ou=sB.extend({method:rJ("resources/templates/list")}),oc=sJ.extend({resourceTemplates:rR(oi)}),od=sc.extend({uri:rt()}),op=sh.extend({method:rJ("resources/read"),params:od}),oh=s_.extend({contents:rR(rD([oe,or]))}),of=sm.extend({method:rJ("notifications/resources/list_changed"),params:sf.optional()}),om=sh.extend({method:rJ("resources/subscribe"),params:od}),o_=sh.extend({method:rJ("resources/unsubscribe"),params:od}),oy=sf.extend({uri:rt()}),ov=sm.extend({method:rJ("notifications/resources/updated"),params:oy}),og=rA({name:rt(),description:r0(rt()),required:r0(rP())}),ow=rA({...sN.shape,...sC.shape,description:r0(rt()),arguments:r0(rR(og)),_meta:r0(rq({}))}),o$=sB.extend({method:rJ("prompts/list")}),ob=sJ.extend({prompts:rR(ow)}),ok=sc.extend({name:rt(),arguments:rK(rt(),rt()).optional()}),oE=sh.extend({method:rJ("prompts/get"),params:ok}),oS=rA({type:rJ("text"),text:rt(),annotations:oo.optional(),_meta:rK(rt(),rN()).optional()}),oT=rA({type:rJ("image"),data:ot,mimeType:rt(),annotations:oo.optional(),_meta:rK(rt(),rN()).optional()}),oP=rA({type:rJ("audio"),data:ot,mimeType:rt(),annotations:oo.optional(),_meta:rK(rt(),rN()).optional()}),ox=rA({type:rJ("tool_use"),name:rt(),id:rt(),input:rK(rt(),rN()),_meta:rK(rt(),rN()).optional()}),oI=rA({type:rJ("resource"),resource:rD([oe,or]),annotations:oo.optional(),_meta:rK(rt(),rN()).optional()}),oz=rD([oS,oT,oP,on.extend({type:rJ("resource_link")}),oI]),oC=rA({role:os,content:oz}),oN=s_.extend({description:rt().optional(),messages:rR(oC)}),oj=sm.extend({method:rJ("notifications/prompts/list_changed"),params:sf.optional()}),oO=rA({title:rt().optional(),readOnlyHint:rP().optional(),destructiveHint:rP().optional(),idempotentHint:rP().optional(),openWorldHint:rP().optional()}),oR=rA({taskSupport:rG(["required","optional","forbidden"]).optional()}),oM=rA({...sN.shape,...sC.shape,description:rt().optional(),inputSchema:rA({type:rJ("object"),properties:rK(rt(),so).optional(),required:rR(rt()).optional()}).catchall(rN()),outputSchema:rA({type:rJ("object"),properties:rK(rt(),so).optional(),required:rR(rt()).optional()}).catchall(rN()).optional(),annotations:oO.optional(),execution:oR.optional(),_meta:rK(rt(),rN()).optional()}),oA=sB.extend({method:rJ("tools/list")}),oq=sJ.extend({tools:rR(oM)}),oU=s_.extend({content:rR(oz).default([]),structuredContent:rK(rt(),rN()).optional(),isError:rP().optional()});oU.or(s_.extend({toolResult:rN()}));let oD=sd.extend({name:rt(),arguments:rK(rt(),rN()).optional()}),oV=sh.extend({method:rJ("tools/call"),params:oD}),oL=sm.extend({method:rJ("notifications/tools/list_changed"),params:sf.optional()}),oF=rA({autoRefresh:rP().default(!0),debounceMs:rk().int().nonnegative().default(300)}),oZ=rG(["debug","info","notice","warning","error","critical","alert","emergency"]),oH=sc.extend({level:oZ}),oK=sh.extend({method:rJ("logging/setLevel"),params:oH}),oW=sf.extend({level:oZ,logger:rt().optional(),data:rN()}),oG=sm.extend({method:rJ("notifications/message"),params:oW}),oB=rA({name:rt().optional()}),oJ=rA({hints:rR(oB).optional(),costPriority:rk().min(0).max(1).optional(),speedPriority:rk().min(0).max(1).optional(),intelligencePriority:rk().min(0).max(1).optional()}),oQ=rA({mode:rG(["auto","required","none"]).optional()}),oY=rA({type:rJ("tool_result"),toolUseId:rt().describe("The unique identifier for the corresponding tool call."),content:rR(oz).default([]),structuredContent:rA({}).loose().optional(),isError:rP().optional(),_meta:rK(rt(),rN()).optional()}),oX=rL("type",[oS,oT,oP]),o0=rL("type",[oS,oT,oP,ox,oY]),o1=rA({role:os,content:rD([o0,rR(o0)]),_meta:rK(rt(),rN()).optional()}),o9=sd.extend({messages:rR(o1),modelPreferences:oJ.optional(),systemPrompt:rt().optional(),includeContext:rG(["none","thisServer","allServers"]).optional(),temperature:rk().optional(),maxTokens:rk().int(),stopSequences:rR(rt()).optional(),metadata:so.optional(),tools:rR(oM).optional(),toolChoice:oQ.optional()}),o2=sh.extend({method:rJ("sampling/createMessage"),params:o9}),o4=s_.extend({model:rt(),stopReason:r0(rG(["endTurn","stopSequence","maxTokens"]).or(rt())),role:os,content:oX}),o3=s_.extend({model:rt(),stopReason:r0(rG(["endTurn","stopSequence","maxTokens","toolUse"]).or(rt())),role:os,content:rD([o0,rR(o0)])}),o7=rA({type:rJ("boolean"),title:rt().optional(),description:rt().optional(),default:rP().optional()}),o5=rA({type:rJ("string"),title:rt().optional(),description:rt().optional(),minLength:rk().optional(),maxLength:rk().optional(),format:rG(["email","uri","date","date-time"]).optional(),default:rt().optional()}),o6=rA({type:rG(["number","integer"]),title:rt().optional(),description:rt().optional(),minimum:rk().optional(),maximum:rk().optional(),default:rk().optional()}),o8=rA({type:rJ("string"),title:rt().optional(),description:rt().optional(),enum:rR(rt()),default:rt().optional()}),ne=rA({type:rJ("string"),title:rt().optional(),description:rt().optional(),oneOf:rR(rA({const:rt(),title:rt()})),default:rt().optional()}),nt=rA({type:rJ("string"),title:rt().optional(),description:rt().optional(),enum:rR(rt()),enumNames:rR(rt()).optional(),default:rt().optional()}),nr=rD([o8,ne]),ns=rD([rA({type:rJ("array"),title:rt().optional(),description:rt().optional(),minItems:rk().optional(),maxItems:rk().optional(),items:rA({type:rJ("string"),enum:rR(rt())}),default:rR(rt()).optional()}),rA({type:rJ("array"),title:rt().optional(),description:rt().optional(),minItems:rk().optional(),maxItems:rk().optional(),items:rA({anyOf:rR(rA({const:rt(),title:rt()}))}),default:rR(rt()).optional()})]),no=rD([nt,nr,ns]),nn=rD([no,o7,o5,o6]),ni=rD([sd.extend({mode:rJ("form").optional(),message:rt(),requestedSchema:rA({type:rJ("object"),properties:rK(rt(),nn),required:rR(rt()).optional()})}),sd.extend({mode:rJ("url"),message:rt(),elicitationId:rt(),url:rt().url()})]),na=sh.extend({method:rJ("elicitation/create"),params:ni}),nl=sf.extend({elicitationId:rt()}),nu=sm.extend({method:rJ("notifications/elicitation/complete"),params:nl}),nc=s_.extend({action:rG(["accept","decline","cancel"]),content:(nZ=e=>null===e?void 0:e,nH=rK(rt(),rD([rt(),rk(),rP(),rR(rt())])).optional(),r6(rY(nZ),nH))}),nd=rA({type:rJ("ref/resource"),uri:rt()}),np=rA({type:rJ("ref/prompt"),name:rt()}),nh=sc.extend({ref:rD([np,nd]),argument:rA({name:rt(),value:rt()}),context:rA({arguments:rK(rt(),rt()).optional()}).optional()}),nf=sh.extend({method:rJ("completion/complete"),params:nh}),nm=s_.extend({completion:rq({values:rR(rt()).max(100),total:r0(rk().int()),hasMore:r0(rP())})}),n_=rA({uri:rt().startsWith("file://"),name:rt().optional(),_meta:rK(rt(),rN()).optional()}),ny=sh.extend({method:rJ("roots/list"),params:sc.optional()}),nv=s_.extend({roots:rR(n_)}),ng=sm.extend({method:rJ("notifications/roots/list_changed"),params:sf.optional()});rD([sZ,sD,nf,oK,oE,o$,oa,ou,op,om,o_,oV,oA,s9,s4,s3,s5]),rD([sI,sW,sF,ng,s1]),rD([sP,o4,o3,nc,nv,s2,s7,sX]),rD([sZ,o2,na,ny,s9,s4,s3,s5]),rD([sI,sW,oG,ov,of,oL,oj,s1,nu]),rD([sP,sL,nm,oN,ob,ol,oc,oh,oU,oq,s2,s7,sX]);class nw extends Error{constructor(e,t,r){super(`MCP error ${e}: ${t}`),this.code=e,this.data=r,this.name="McpError"}static fromError(e,t,r){return e===nK.UrlElicitationRequired&&r&&r.elicitations?new n$(r.elicitations,t):new nw(e,t,r)}}class n$ extends nw{constructor(e,t=`URL elicitation${e.length>1?"s":""} required`){super(nK.UrlElicitationRequired,t,{elicitations:e})}get elicitations(){return this.data?.elicitations??[]}}function nb(e){return"completed"===e||"failed"===e||"cancelled"===e}Symbol("Let zodToJsonSchema decide on which parser to use");function nk(e){let t=K(e),r=t?.method;if(!r)throw Error("Schema is missing a method literal");let s=function(e){if(Z(e)){let t=e._zod?.def;if(t){if(void 0!==t.value)return t.value;if(Array.isArray(t.values)&&t.values.length>0)return t.values[0]}}let t=e._def;if(t){if(void 0!==t.value)return t.value;if(Array.isArray(t.values)&&t.values.length>0)return t.values[0]}let r=e.value;if(void 0!==r)return r}(r);if("string"!=typeof s)throw Error("Schema method literal must be a string");return s}function nE(e,t){let r=H(e,t);if(!r.success)throw r.error;return r.data}class nS{constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this._pendingDebouncedNotifications=new Set,this._taskProgressTokens=new Map,this._requestResolvers=new Map,this.setNotificationHandler(sI,e=>{this._oncancel(e)}),this.setNotificationHandler(sW,e=>{this._onprogress(e)}),this.setRequestHandler(sZ,e=>({})),this._taskStore=e?.taskStore,this._taskMessageQueue=e?.taskMessageQueue,this._taskStore&&(this.setRequestHandler(s9,async(e,t)=>{let r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new nw(nK.InvalidParams,"Failed to retrieve task: Task not found");return{...r}}),this.setRequestHandler(s4,async(e,t)=>{let r=async()=>{let s=e.params.taskId;if(this._taskMessageQueue){let e;for(;e=await this._taskMessageQueue.dequeue(s,t.sessionId);){if("response"===e.type||"error"===e.type){let t=e.message,r=t.id,s=this._requestResolvers.get(r);if(s)this._requestResolvers.delete(r),s("response"===e.type?t:new nw(t.error.code,t.error.message,t.error.data));else{let t="response"===e.type?"Response":"Error";this._onerror(Error(`${t} handler missing for request ${r}`))}continue}await this._transport?.send(e.message,{relatedRequestId:t.requestId})}}let o=await this._taskStore.getTask(s,t.sessionId);if(!o)throw new nw(nK.InvalidParams,`Task not found: ${s}`);if(!nb(o.status))return await this._waitForTaskUpdate(s,t.signal),await r();if(nb(o.status)){let e=await this._taskStore.getTaskResult(s,t.sessionId);return this._clearTaskQueue(s),{...e,_meta:{...e._meta,[ss]:{taskId:s}}}}return await r()};return await r()}),this.setRequestHandler(s3,async(e,t)=>{try{let{tasks:r,nextCursor:s}=await this._taskStore.listTasks(e.params?.cursor,t.sessionId);return{tasks:r,nextCursor:s,_meta:{}}}catch(e){throw new nw(nK.InvalidParams,`Failed to list tasks: ${e instanceof Error?e.message:String(e)}`)}}),this.setRequestHandler(s5,async(e,t)=>{try{let r=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!r)throw new nw(nK.InvalidParams,`Task not found: ${e.params.taskId}`);if(nb(r.status))throw new nw(nK.InvalidParams,`Cannot cancel task in terminal status: ${r.status}`);await this._taskStore.updateTaskStatus(e.params.taskId,"cancelled","Client cancelled task execution.",t.sessionId),this._clearTaskQueue(e.params.taskId);let s=await this._taskStore.getTask(e.params.taskId,t.sessionId);if(!s)throw new nw(nK.InvalidParams,`Task not found after cancellation: ${e.params.taskId}`);return{_meta:{},...s}}catch(e){if(e instanceof nw)throw e;throw new nw(nK.InvalidRequest,`Failed to cancel task: ${e instanceof Error?e.message:String(e)}`)}}))}async _oncancel(e){if(!e.params.requestId)return;let t=this._requestHandlerAbortControllers.get(e.params.requestId);t?.abort(e.params.reason)}_setupTimeout(e,t,r,s,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(s,t),startTime:Date.now(),timeout:t,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:s})}_resetTimeout(e){let t=this._timeoutInfo.get(e);if(!t)return!1;let r=Date.now()-t.startTime;if(t.maxTotalTimeout&&r>=t.maxTotalTimeout)throw this._timeoutInfo.delete(e),nw.fromError(nK.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:t.maxTotalTimeout,totalElapsed:r});return clearTimeout(t.timeoutId),t.timeoutId=setTimeout(t.onTimeout,t.timeout),!0}_cleanupTimeout(e){let t=this._timeoutInfo.get(e);t&&(clearTimeout(t.timeoutId),this._timeoutInfo.delete(e))}async connect(e){if(this._transport)throw Error("Already connected to a transport. Call close() before connecting to a new transport, or use a separate Protocol instance per connection.");this._transport=e;let t=this.transport?.onclose;this._transport.onclose=()=>{t?.(),this._onclose()};let r=this.transport?.onerror;this._transport.onerror=e=>{r?.(e),this._onerror(e)};let s=this._transport?.onmessage;this._transport.onmessage=(e,t)=>{s?.(e,t),sk(e)||sS(e)?this._onresponse(e):sg(e)?this._onrequest(e,t):s$(e)?this._onnotification(e):this._onerror(Error(`Unknown message type: ${JSON.stringify(e)}`))},await this._transport.start()}_onclose(){let e=this._responseHandlers;for(let e of(this._responseHandlers=new Map,this._progressHandlers.clear(),this._taskProgressTokens.clear(),this._pendingDebouncedNotifications.clear(),this._requestHandlerAbortControllers.values()))e.abort();this._requestHandlerAbortControllers.clear();let t=nw.fromError(nK.ConnectionClosed,"Connection closed");for(let r of(this._transport=void 0,this.onclose?.(),e.values()))r(t)}_onerror(e){this.onerror?.(e)}_onnotification(e){let t=this._notificationHandlers.get(e.method)??this.fallbackNotificationHandler;void 0!==t&&Promise.resolve().then(()=>t(e)).catch(e=>this._onerror(Error(`Uncaught error in notification handler: ${e}`)))}_onrequest(e,t){let r=this._requestHandlers.get(e.method)??this.fallbackRequestHandler,s=this._transport,o=e.params?._meta?.[ss]?.taskId;if(void 0===r){let t={jsonrpc:"2.0",id:e.id,error:{code:nK.MethodNotFound,message:"Method not found"}};o&&this._taskMessageQueue?this._enqueueTaskMessage(o,{type:"error",message:t,timestamp:Date.now()},s?.sessionId).catch(e=>this._onerror(Error(`Failed to enqueue error response: ${e}`))):s?.send(t).catch(e=>this._onerror(Error(`Failed to send an error response: ${e}`)));return}let n=new AbortController;this._requestHandlerAbortControllers.set(e.id,n);let i=sp(e.params)?e.params.task:void 0,a=this._taskStore?this.requestTaskStore(e,s?.sessionId):void 0,l={signal:n.signal,sessionId:s?.sessionId,_meta:e.params?._meta,sendNotification:async t=>{if(n.signal.aborted)return;let r={relatedRequestId:e.id};o&&(r.relatedTask={taskId:o}),await this.notification(t,r)},sendRequest:async(t,r,s)=>{if(n.signal.aborted)throw new nw(nK.ConnectionClosed,"Request was cancelled");let i={...s,relatedRequestId:e.id};o&&!i.relatedTask&&(i.relatedTask={taskId:o});let l=i.relatedTask?.taskId??o;return l&&a&&await a.updateTaskStatus(l,"input_required"),await this.request(t,r,i)},authInfo:t?.authInfo,requestId:e.id,requestInfo:t?.requestInfo,taskId:o,taskStore:a,taskRequestedTtl:i?.ttl,closeSSEStream:t?.closeSSEStream,closeStandaloneSSEStream:t?.closeStandaloneSSEStream};Promise.resolve().then(()=>{i&&this.assertTaskHandlerCapability(e.method)}).then(()=>r(e,l)).then(async t=>{if(n.signal.aborted)return;let r={result:t,jsonrpc:"2.0",id:e.id};o&&this._taskMessageQueue?await this._enqueueTaskMessage(o,{type:"response",message:r,timestamp:Date.now()},s?.sessionId):await s?.send(r)},async t=>{if(n.signal.aborted)return;let r={jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(t.code)?t.code:nK.InternalError,message:t.message??"Internal error",...void 0!==t.data&&{data:t.data}}};o&&this._taskMessageQueue?await this._enqueueTaskMessage(o,{type:"error",message:r,timestamp:Date.now()},s?.sessionId):await s?.send(r)}).catch(e=>this._onerror(Error(`Failed to send response: ${e}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:t,...r}=e.params,s=Number(t),o=this._progressHandlers.get(s);if(!o){this._onerror(Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let n=this._responseHandlers.get(s),i=this._timeoutInfo.get(s);if(i&&n&&i.resetTimeoutOnProgress)try{this._resetTimeout(s)}catch(e){this._responseHandlers.delete(s),this._progressHandlers.delete(s),this._cleanupTimeout(s),n(e);return}o(r)}_onresponse(e){let t=Number(e.id),r=this._requestResolvers.get(t);if(r){this._requestResolvers.delete(t),r(sk(e)?e:new nw(e.error.code,e.error.message,e.error.data));return}let s=this._responseHandlers.get(t);if(void 0===s){this._onerror(Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}this._responseHandlers.delete(t),this._cleanupTimeout(t);let o=!1;if(sk(e)&&e.result&&"object"==typeof e.result){let r=e.result;if(r.task&&"object"==typeof r.task){let e=r.task;"string"==typeof e.taskId&&(o=!0,this._taskProgressTokens.set(e.taskId,t))}}o||this._progressHandlers.delete(t),s(sk(e)?e:nw.fromError(e.error.code,e.error.message,e.error.data))}get transport(){return this._transport}async close(){await this._transport?.close()}async *requestStream(e,t,r){let s;let{task:o}=r??{};if(!o){try{let s=await this.request(e,t,r);yield{type:"result",result:s}}catch(e){yield{type:"error",error:e instanceof nw?e:new nw(nK.InternalError,String(e))}}return}try{let o=await this.request(e,sX,r);if(o.task)s=o.task.taskId,yield{type:"taskCreated",task:o.task};else throw new nw(nK.InternalError,"Task creation did not return a task");for(;;){let e=await this.getTask({taskId:s},r);if(yield{type:"taskStatus",task:e},nb(e.status)){if("completed"===e.status){let e=await this.getTaskResult({taskId:s},t,r);yield{type:"result",result:e}}else"failed"===e.status?yield{type:"error",error:new nw(nK.InternalError,`Task ${s} failed`)}:"cancelled"===e.status&&(yield{type:"error",error:new nw(nK.InternalError,`Task ${s} was cancelled`)});return}if("input_required"===e.status){let e=await this.getTaskResult({taskId:s},t,r);yield{type:"result",result:e};return}let o=e.pollInterval??this._options?.defaultTaskPollInterval??1e3;await new Promise(e=>setTimeout(e,o)),r?.signal?.throwIfAborted()}}catch(e){yield{type:"error",error:e instanceof nw?e:new nw(nK.InternalError,String(e))}}}request(e,t,r){let{relatedRequestId:s,resumptionToken:o,onresumptiontoken:n,task:i,relatedTask:a}=r??{};return new Promise((l,u)=>{let c=e=>{u(e)};if(!this._transport){c(Error("Not connected"));return}if(this._options?.enforceStrictCapabilities===!0)try{this.assertCapabilityForMethod(e.method),i&&this.assertTaskCapability(e.method)}catch(e){c(e);return}r?.signal?.throwIfAborted();let d=this._requestMessageId++,p={...e,jsonrpc:"2.0",id:d};r?.onprogress&&(this._progressHandlers.set(d,r.onprogress),p.params={...e.params,_meta:{...e.params?._meta||{},progressToken:d}}),i&&(p.params={...p.params,task:i}),a&&(p.params={...p.params,_meta:{...p.params?._meta||{},[ss]:a}});let h=e=>{this._responseHandlers.delete(d),this._progressHandlers.delete(d),this._cleanupTimeout(d),this._transport?.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:d,reason:String(e)}},{relatedRequestId:s,resumptionToken:o,onresumptiontoken:n}).catch(e=>this._onerror(Error(`Failed to send cancellation: ${e}`))),u(e instanceof nw?e:new nw(nK.RequestTimeout,String(e)))};this._responseHandlers.set(d,e=>{if(!r?.signal?.aborted){if(e instanceof Error)return u(e);try{let r=H(t,e.result);r.success?l(r.data):u(r.error)}catch(e){u(e)}}}),r?.signal?.addEventListener("abort",()=>{h(r?.signal?.reason)});let f=r?.timeout??6e4;this._setupTimeout(d,f,r?.maxTotalTimeout,()=>h(nw.fromError(nK.RequestTimeout,"Request timed out",{timeout:f})),r?.resetTimeoutOnProgress??!1);let m=a?.taskId;m?(this._requestResolvers.set(d,e=>{let t=this._responseHandlers.get(d);t?t(e):this._onerror(Error(`Response handler missing for side-channeled request ${d}`))}),this._enqueueTaskMessage(m,{type:"request",message:p,timestamp:Date.now()}).catch(e=>{this._cleanupTimeout(d),u(e)})):this._transport.send(p,{relatedRequestId:s,resumptionToken:o,onresumptiontoken:n}).catch(e=>{this._cleanupTimeout(d),u(e)})})}async getTask(e,t){return this.request({method:"tasks/get",params:e},s2,t)}async getTaskResult(e,t,r){return this.request({method:"tasks/result",params:e},t,r)}async listTasks(e,t){return this.request({method:"tasks/list",params:e},s7,t)}async cancelTask(e,t){return this.request({method:"tasks/cancel",params:e},s6,t)}async notification(e,t){if(!this._transport)throw Error("Not connected");this.assertNotificationCapability(e.method);let r=t?.relatedTask?.taskId;if(r){let s={...e,jsonrpc:"2.0",params:{...e.params,_meta:{...e.params?._meta||{},[ss]:t.relatedTask}}};await this._enqueueTaskMessage(r,{type:"notification",message:s,timestamp:Date.now()});return}if((this._options?.debouncedNotificationMethods??[]).includes(e.method)&&!e.params&&!t?.relatedRequestId&&!t?.relatedTask){if(this._pendingDebouncedNotifications.has(e.method))return;this._pendingDebouncedNotifications.add(e.method),Promise.resolve().then(()=>{if(this._pendingDebouncedNotifications.delete(e.method),!this._transport)return;let r={...e,jsonrpc:"2.0"};t?.relatedTask&&(r={...r,params:{...r.params,_meta:{...r.params?._meta||{},[ss]:t.relatedTask}}}),this._transport?.send(r,t).catch(e=>this._onerror(e))});return}let s={...e,jsonrpc:"2.0"};t?.relatedTask&&(s={...s,params:{...s.params,_meta:{...s.params?._meta||{},[ss]:t.relatedTask}}}),await this._transport.send(s,t)}setRequestHandler(e,t){let r=nk(e);this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(r,s)=>Promise.resolve(t(nE(e,r),s)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,t){let r=nk(e);this._notificationHandlers.set(r,r=>Promise.resolve(t(nE(e,r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}_cleanupTaskProgressHandler(e){let t=this._taskProgressTokens.get(e);void 0!==t&&(this._progressHandlers.delete(t),this._taskProgressTokens.delete(e))}async _enqueueTaskMessage(e,t,r){if(!this._taskStore||!this._taskMessageQueue)throw Error("Cannot enqueue task message: taskStore and taskMessageQueue are not configured");let s=this._options?.maxTaskQueueSize;await this._taskMessageQueue.enqueue(e,t,r,s)}async _clearTaskQueue(e,t){if(this._taskMessageQueue){for(let r of(await this._taskMessageQueue.dequeueAll(e,t)))if("request"===r.type&&sg(r.message)){let t=r.message.id,s=this._requestResolvers.get(t);s?(s(new nw(nK.InternalError,"Task cancelled or completed")),this._requestResolvers.delete(t)):this._onerror(Error(`Resolver missing for request ${t} during task ${e} cleanup`))}}}async _waitForTaskUpdate(e,t){let r=this._options?.defaultTaskPollInterval??1e3;try{let t=await this._taskStore?.getTask(e);t?.pollInterval&&(r=t.pollInterval)}catch{}return new Promise((e,s)=>{if(t.aborted){s(new nw(nK.InvalidRequest,"Request cancelled"));return}let o=setTimeout(e,r);t.addEventListener("abort",()=>{clearTimeout(o),s(new nw(nK.InvalidRequest,"Request cancelled"))},{once:!0})})}requestTaskStore(e,t){let r=this._taskStore;if(!r)throw Error("No task store configured");return{createTask:async s=>{if(!e)throw Error("No request provided");return await r.createTask(s,e.id,{method:e.method,params:e.params},t)},getTask:async e=>{let s=await r.getTask(e,t);if(!s)throw new nw(nK.InvalidParams,"Failed to retrieve task: Task not found");return s},storeTaskResult:async(e,s,o)=>{await r.storeTaskResult(e,s,o,t);let n=await r.getTask(e,t);if(n){let t=s1.parse({method:"notifications/tasks/status",params:n});await this.notification(t),nb(n.status)&&this._cleanupTaskProgressHandler(e)}},getTaskResult:e=>r.getTaskResult(e,t),updateTaskStatus:async(e,s,o)=>{let n=await r.getTask(e,t);if(!n)throw new nw(nK.InvalidParams,`Task "${e}" not found - it may have been cleaned up`);if(nb(n.status))throw new nw(nK.InvalidParams,`Cannot update task "${e}" from terminal status "${n.status}" to "${s}". Terminal states (completed, failed, cancelled) cannot transition to other states.`);await r.updateTaskStatus(e,s,o,t);let i=await r.getTask(e,t);if(i){let t=s1.parse({method:"notifications/tasks/status",params:i});await this.notification(t),nb(i.status)&&this._cleanupTaskProgressHandler(e)}},listTasks:e=>r.listTasks(e,t)}}}function nT(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var nP=r(19619),nx=r(28586);class nI{constructor(e){this._ajv=e??function(){let e=new nP({strict:!1,validateFormats:!0,validateSchema:!1,allErrors:!0});return nx(e),e}()}getValidator(e){let t="$id"in e&&"string"==typeof e.$id?this._ajv.getSchema(e.$id)??this._ajv.compile(e):this._ajv.compile(e);return e=>t(e)?{valid:!0,data:e,errorMessage:void 0}:{valid:!1,data:void 0,errorMessage:this._ajv.errorsText(t.errors)}}}class nz{constructor(e){this._client=e}async *callToolStream(e,t=oU,r){let s=this._client,o={...r,task:r?.task??(s.isToolTask(e.name)?{}:void 0)},n=s.requestStream({method:"tools/call",params:e},t,o),i=s.getToolOutputValidator(e.name);for await(let t of n){if("result"===t.type&&i){let r=t.result;if(!r.structuredContent&&!r.isError){yield{type:"error",error:new nw(nK.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`)};return}if(r.structuredContent)try{let e=i(r.structuredContent);if(!e.valid){yield{type:"error",error:new nw(nK.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)};return}}catch(e){if(e instanceof nw){yield{type:"error",error:e};return}yield{type:"error",error:new nw(nK.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)};return}}yield t}}async getTask(e,t){return this._client.getTask({taskId:e},t)}async getTaskResult(e,t,r){return this._client.getTaskResult({taskId:e},t,r)}async listTasks(e,t){return this._client.listTasks(e?{cursor:e}:void 0,t)}async cancelTask(e,t){return this._client.cancelTask({taskId:e},t)}requestStream(e,t,r){return this._client.requestStream(e,t,r)}}class nC extends nS{constructor(e,t){super(t),this._clientInfo=e,this._cachedToolOutputValidators=new Map,this._cachedKnownTaskTools=new Set,this._cachedRequiredTaskTools=new Set,this._listChangedDebounceTimers=new Map,this._capabilities=t?.capabilities??{},this._jsonSchemaValidator=t?.jsonSchemaValidator??new nI,t?.listChanged&&(this._pendingListChangedConfig=t.listChanged)}_setupListChangedHandlers(e){e.tools&&this._serverCapabilities?.tools?.listChanged&&this._setupListChangedHandler("tools",oL,e.tools,async()=>(await this.listTools()).tools),e.prompts&&this._serverCapabilities?.prompts?.listChanged&&this._setupListChangedHandler("prompts",oj,e.prompts,async()=>(await this.listPrompts()).prompts),e.resources&&this._serverCapabilities?.resources?.listChanged&&this._setupListChangedHandler("resources",of,e.resources,async()=>(await this.listResources()).resources)}get experimental(){return this._experimental||(this._experimental={tasks:new nz(this)}),this._experimental}registerCapabilities(e){if(this.transport)throw Error("Cannot register capabilities after connecting to transport");this._capabilities=function(e,t){let r={...e};for(let e in t){let s=t[e];if(void 0===s)continue;let o=r[e];nT(o)&&nT(s)?r[e]={...o,...s}:r[e]=s}return r}(this._capabilities,e)}setRequestHandler(e,t){let r;let s=K(e),o=s?.method;if(!o)throw Error("Schema is missing a method literal");if(Z(o)){let e=o._zod?.def;r=e?.value??o.value}else{let e=o._def;r=e?.value??o.value}if("string"!=typeof r)throw Error("Schema method literal must be a string");let n=r;if("elicitation/create"===n){let r=async(e,r)=>{let s=H(na,e);if(!s.success){let e=s.error instanceof Error?s.error.message:String(s.error);throw new nw(nK.InvalidParams,`Invalid elicitation request: ${e}`)}let{params:o}=s.data;o.mode=o.mode??"form";let{supportsFormMode:n,supportsUrlMode:i}=function(e){if(!e)return{supportsFormMode:!1,supportsUrlMode:!1};let t=void 0!==e.form,r=void 0!==e.url;return{supportsFormMode:t||!t&&!r,supportsUrlMode:r}}(this._capabilities.elicitation);if("form"===o.mode&&!n)throw new nw(nK.InvalidParams,"Client does not support form-mode elicitation requests");if("url"===o.mode&&!i)throw new nw(nK.InvalidParams,"Client does not support URL-mode elicitation requests");let a=await Promise.resolve(t(e,r));if(o.task){let e=H(sX,a);if(!e.success){let t=e.error instanceof Error?e.error.message:String(e.error);throw new nw(nK.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}let l=H(nc,a);if(!l.success){let e=l.error instanceof Error?l.error.message:String(l.error);throw new nw(nK.InvalidParams,`Invalid elicitation result: ${e}`)}let u=l.data,c="form"===o.mode?o.requestedSchema:void 0;if("form"===o.mode&&"accept"===u.action&&u.content&&c&&this._capabilities.elicitation?.form?.applyDefaults)try{!function e(t,r){if(t&&null!==r&&"object"==typeof r){if("object"===t.type&&t.properties&&"object"==typeof t.properties){let s=t.properties;for(let t of Object.keys(s)){let o=s[t];void 0===r[t]&&Object.prototype.hasOwnProperty.call(o,"default")&&(r[t]=o.default),void 0!==r[t]&&e(o,r[t])}}if(Array.isArray(t.anyOf))for(let s of t.anyOf)"boolean"!=typeof s&&e(s,r);if(Array.isArray(t.oneOf))for(let s of t.oneOf)"boolean"!=typeof s&&e(s,r)}}(c,u.content)}catch{}return u};return super.setRequestHandler(e,r)}if("sampling/createMessage"===n){let r=async(e,r)=>{let s=H(o2,e);if(!s.success){let e=s.error instanceof Error?s.error.message:String(s.error);throw new nw(nK.InvalidParams,`Invalid sampling request: ${e}`)}let{params:o}=s.data,n=await Promise.resolve(t(e,r));if(o.task){let e=H(sX,n);if(!e.success){let t=e.error instanceof Error?e.error.message:String(e.error);throw new nw(nK.InvalidParams,`Invalid task creation result: ${t}`)}return e.data}let i=H(o.tools||o.toolChoice?o3:o4,n);if(!i.success){let e=i.error instanceof Error?i.error.message:String(i.error);throw new nw(nK.InvalidParams,`Invalid sampling result: ${e}`)}return i.data};return super.setRequestHandler(e,r)}return super.setRequestHandler(e,t)}assertCapability(e,t){if(!this._serverCapabilities?.[e])throw Error(`Server does not support ${e} (required for ${t})`)}async connect(e,t){if(await super.connect(e),void 0===e.sessionId)try{let r=await this.request({method:"initialize",params:{protocolVersion:st,capabilities:this._capabilities,clientInfo:this._clientInfo}},sL,t);if(void 0===r)throw Error(`Server sent invalid initialize result: ${r}`);if(!sr.includes(r.protocolVersion))throw Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,e.setProtocolVersion&&e.setProtocolVersion(r.protocolVersion),this._instructions=r.instructions,await this.notification({method:"notifications/initialized"}),this._pendingListChangedConfig&&(this._setupListChangedHandlers(this._pendingListChangedConfig),this._pendingListChangedConfig=void 0)}catch(e){throw this.close(),e}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){switch(e){case"logging/setLevel":if(!this._serverCapabilities?.logging)throw Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!this._serverCapabilities?.prompts)throw Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!this._serverCapabilities?.resources)throw Error(`Server does not support resources (required for ${e})`);if("resources/subscribe"===e&&!this._serverCapabilities.resources.subscribe)throw Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!this._serverCapabilities?.tools)throw Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!this._serverCapabilities?.completions)throw Error(`Server does not support completions (required for ${e})`)}}assertNotificationCapability(e){if("notifications/roots/list_changed"===e&&!this._capabilities.roots?.listChanged)throw Error(`Client does not support roots list changed notifications (required for ${e})`)}assertRequestHandlerCapability(e){if(this._capabilities)switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw Error(`Client does not support sampling capability (required for ${e})`);break;case"elicitation/create":if(!this._capabilities.elicitation)throw Error(`Client does not support elicitation capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw Error(`Client does not support roots capability (required for ${e})`);break;case"tasks/get":case"tasks/list":case"tasks/result":case"tasks/cancel":if(!this._capabilities.tasks)throw Error(`Client does not support tasks capability (required for ${e})`)}}assertTaskCapability(e){!function(e,t,r){if(!e)throw Error(`${r} does not support task creation (required for ${t})`);if("tools/call"===t&&!e.tools?.call)throw Error(`${r} does not support task creation for tools/call (required for ${t})`)}(this._serverCapabilities?.tasks?.requests,e,"Server")}assertTaskHandlerCapability(e){this._capabilities&&function(e,t,r){if(!e)throw Error(`${r} does not support task creation (required for ${t})`);switch(t){case"sampling/createMessage":if(!e.sampling?.createMessage)throw Error(`${r} does not support task creation for sampling/createMessage (required for ${t})`);break;case"elicitation/create":if(!e.elicitation?.create)throw Error(`${r} does not support task creation for elicitation/create (required for ${t})`)}}(this._capabilities.tasks?.requests,e,"Client")}async ping(e){return this.request({method:"ping"},sP,e)}async complete(e,t){return this.request({method:"completion/complete",params:e},nm,t)}async setLoggingLevel(e,t){return this.request({method:"logging/setLevel",params:{level:e}},sP,t)}async getPrompt(e,t){return this.request({method:"prompts/get",params:e},oN,t)}async listPrompts(e,t){return this.request({method:"prompts/list",params:e},ob,t)}async listResources(e,t){return this.request({method:"resources/list",params:e},ol,t)}async listResourceTemplates(e,t){return this.request({method:"resources/templates/list",params:e},oc,t)}async readResource(e,t){return this.request({method:"resources/read",params:e},oh,t)}async subscribeResource(e,t){return this.request({method:"resources/subscribe",params:e},sP,t)}async unsubscribeResource(e,t){return this.request({method:"resources/unsubscribe",params:e},sP,t)}async callTool(e,t=oU,r){if(this.isToolTaskRequired(e.name))throw new nw(nK.InvalidRequest,`Tool "${e.name}" requires task-based execution. Use client.experimental.tasks.callToolStream() instead.`);let s=await this.request({method:"tools/call",params:e},t,r),o=this.getToolOutputValidator(e.name);if(o){if(!s.structuredContent&&!s.isError)throw new nw(nK.InvalidRequest,`Tool ${e.name} has an output schema but did not return structured content`);if(s.structuredContent)try{let e=o(s.structuredContent);if(!e.valid)throw new nw(nK.InvalidParams,`Structured content does not match the tool's output schema: ${e.errorMessage}`)}catch(e){if(e instanceof nw)throw e;throw new nw(nK.InvalidParams,`Failed to validate structured content: ${e instanceof Error?e.message:String(e)}`)}}return s}isToolTask(e){return!!this._serverCapabilities?.tasks?.requests?.tools?.call&&this._cachedKnownTaskTools.has(e)}isToolTaskRequired(e){return this._cachedRequiredTaskTools.has(e)}cacheToolMetadata(e){for(let t of(this._cachedToolOutputValidators.clear(),this._cachedKnownTaskTools.clear(),this._cachedRequiredTaskTools.clear(),e)){if(t.outputSchema){let e=this._jsonSchemaValidator.getValidator(t.outputSchema);this._cachedToolOutputValidators.set(t.name,e)}let e=t.execution?.taskSupport;("required"===e||"optional"===e)&&this._cachedKnownTaskTools.add(t.name),"required"===e&&this._cachedRequiredTaskTools.add(t.name)}}getToolOutputValidator(e){return this._cachedToolOutputValidators.get(e)}async listTools(e,t){let r=await this.request({method:"tools/list",params:e},oq,t);return this.cacheToolMetadata(r.tools),r}_setupListChangedHandler(e,t,r,s){let o=oF.safeParse(r);if(!o.success)throw Error(`Invalid ${e} listChanged options: ${o.error.message}`);if("function"!=typeof r.onChanged)throw Error(`Invalid ${e} listChanged options: onChanged must be a function`);let{autoRefresh:n,debounceMs:i}=o.data,{onChanged:a}=r,l=async()=>{if(!n){a(null,null);return}try{let e=await s();a(null,e)}catch(e){a(e instanceof Error?e:Error(String(e)),null)}};this.setNotificationHandler(t,()=>{if(i){let t=this._listChangedDebounceTimers.get(e);t&&clearTimeout(t);let r=setTimeout(l,i);this._listChangedDebounceTimers.set(e,r)}else l()})}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}}var nN=r(56916);let nj=require("node:process");var nO=r(84492);class nR{append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf("\n");if(-1===e)return null;let t=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),sT.parse(JSON.parse(t))}clear(){this._buffer=void 0}}let nM="win32"===nj.platform?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE","PROGRAMFILES"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];class nA{constructor(e){this._readBuffer=new nR,this._stderrStream=null,this._serverParams=e,("pipe"===e.stderr||"overlapped"===e.stderr)&&(this._stderrStream=new nO.PassThrough)}async start(){if(this._process)throw Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,t)=>{this._process=nN(this._serverParams.command,this._serverParams.args??[],{env:{...function(){let e={};for(let t of nM){let r=nj.env[t];void 0===r||r.startsWith("()")||(e[t]=r)}return e}(),...this._serverParams.env},stdio:["pipe","pipe",this._serverParams.stderr??"inherit"],shell:!1,windowsHide:"win32"===nj.platform&&""in nj,cwd:this._serverParams.cwd}),this._process.on("error",e=>{t(e),this.onerror?.(e)}),this._process.on("spawn",()=>{e()}),this._process.on("close",e=>{this._process=void 0,this.onclose?.()}),this._process.stdin?.on("error",e=>{this.onerror?.(e)}),this._process.stdout?.on("data",e=>{this._readBuffer.append(e),this.processReadBuffer()}),this._process.stdout?.on("error",e=>{this.onerror?.(e)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){return this._stderrStream?this._stderrStream:this._process?.stderr??null}get pid(){return this._process?.pid??null}processReadBuffer(){for(;;)try{let e=this._readBuffer.readMessage();if(null===e)break;this.onmessage?.(e)}catch(e){this.onerror?.(e)}}async close(){if(this._process){let e=this._process;this._process=void 0;let t=new Promise(t=>{e.once("close",()=>{t()})});try{e.stdin?.end()}catch{}if(await Promise.race([t,new Promise(e=>setTimeout(e,2e3).unref())]),null===e.exitCode){try{e.kill("SIGTERM")}catch{}await Promise.race([t,new Promise(e=>setTimeout(e,2e3).unref())])}if(null===e.exitCode)try{e.kill("SIGKILL")}catch{}}this._readBuffer.clear()}send(e){return new Promise(t=>{if(!this._process?.stdin)throw Error("Not connected");let r=JSON.stringify(e)+"\n";this._process.stdin.write(r)?t():this._process.stdin.once("drain",t)})}}class nq extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function nU(e){}class nD extends Event{constructor(e,t){var r,s;super(e),this.code=null!=(r=null==t?void 0:t.code)?r:void 0,this.message=null!=(s=null==t?void 0:t.message)?s:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,t,r){return r(nV(this),t)}[Symbol.for("Deno.customInspect")](e,t){return e(nV(this),t)}}function nV(e){return{type:e.type,message:e.message,code:e.code,defaultPrevented:e.defaultPrevented,cancelable:e.cancelable,timeStamp:e.timeStamp}}var nL,nF,nZ,nH,nK,nW,nG,nB,nJ,nQ,nY,nX,n0,n1,n9,n2,n4,n3,n7,n5,n6,n8,ie,it,ir,is,io,ii,ia=e=>{throw TypeError(e)},il=(e,t,r)=>t.has(e)||ia("Cannot "+r),iu=(e,t,r)=>(il(e,t,"read from private field"),r?r.call(e):t.get(e)),ic=(e,t,r)=>t.has(e)?ia("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),id=(e,t,r,s)=>(il(e,t,"write to private field"),t.set(e,r),r),ip=(e,t,r)=>(il(e,t,"access private method"),r);class ih extends EventTarget{constructor(e,t){var r,s;super(),ic(this,n7),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,ic(this,nW),ic(this,nG),ic(this,nB),ic(this,nJ),ic(this,nQ),ic(this,nY),ic(this,nX),ic(this,n0,null),ic(this,n1),ic(this,n9),ic(this,n2,null),ic(this,n4,null),ic(this,n3,null),ic(this,n6,async e=>{var t;iu(this,n9).reset();let{body:r,redirected:s,status:o,headers:n}=e;if(204===o){ip(this,n7,is).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(s?id(this,nB,new URL(e.url)):id(this,nB,void 0),200!==o){ip(this,n7,is).call(this,`Non-200 status code (${o})`,o);return}if(!(n.get("content-type")||"").startsWith("text/event-stream")){ip(this,n7,is).call(this,'Invalid content type, expected "text/event-stream"',o);return}if(iu(this,nW)===this.CLOSED)return;id(this,nW,this.OPEN);let i=new Event("open");if(null==(t=iu(this,n3))||t.call(this,i),this.dispatchEvent(i),"object"!=typeof r||!r||!("getReader"in r)){ip(this,n7,is).call(this,"Invalid response body, expected a web ReadableStream",o),this.close();return}let a=new TextDecoder,l=r.getReader(),u=!0;do{let{done:e,value:t}=await l.read();t&&iu(this,n9).feed(a.decode(t,{stream:!e})),e&&(u=!1,iu(this,n9).reset(),ip(this,n7,io).call(this))}while(u)}),ic(this,n8,e=>{id(this,n1,void 0),"AbortError"===e.name||"aborted"===e.type||ip(this,n7,io).call(this,function e(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(e).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${e(t.cause)}`:t.message:`${t}`}(e))}),ic(this,it,e=>{"string"==typeof e.id&&id(this,n0,e.id);let t=new MessageEvent(e.event||"message",{data:e.data,origin:iu(this,nB)?iu(this,nB).origin:iu(this,nG).origin,lastEventId:e.id||""});iu(this,n4)&&(!e.event||"message"===e.event)&&iu(this,n4).call(this,t),this.dispatchEvent(t)}),ic(this,ir,e=>{id(this,nY,e)}),ic(this,ii,()=>{id(this,nX,void 0),iu(this,nW)===this.CONNECTING&&ip(this,n7,n5).call(this)});try{if(e instanceof URL)id(this,nG,e);else if("string"==typeof e)id(this,nG,new URL(e,function(){let e="document"in globalThis?globalThis.document:void 0;return e&&"object"==typeof e&&"baseURI"in e&&"string"==typeof e.baseURI?e.baseURI:void 0}()));else throw Error("Invalid URL")}catch{throw function(e){let t=globalThis.DOMException;return"function"==typeof t?new t(e,"SyntaxError"):SyntaxError(e)}("An invalid or illegal string was specified")}id(this,n9,function(e){if("function"==typeof e)throw TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:t=nU,onError:r=nU,onRetry:s=nU,onComment:o}=e,n="",i=!0,a,l="",u="";function c(e){if(""===e){l.length>0&&t({id:a,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),a=void 0,l="",u="";return}if(e.startsWith(":")){o&&o(e.slice(e.startsWith(": ")?2:1));return}let r=e.indexOf(":");if(-1!==r){let t=e.slice(0,r),s=" "===e[r+1]?2:1;d(t,e.slice(r+s),e);return}d(e,"",e)}function d(e,t,o){switch(e){case"event":u=t;break;case"data":l=`${l}${t}
`;break;case"id":a=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?s(parseInt(t,10)):r(new nq(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:o}));break;default:r(new nq(`Unknown field "${e.length>20?`${e.slice(0,20)}\u2026`:e}"`,{type:"unknown-field",field:e,value:t,line:o}))}}return{feed:function(e){let t=i?e.replace(/^\xEF\xBB\xBF/,""):e,[r,s]=function(e){let t=[],r="",s=0;for(;s<e.length;){let o=e.indexOf("\r",s),n=e.indexOf(`
`,s),i=-1;if(-1!==o&&-1!==n?i=Math.min(o,n):-1!==o?i=o===e.length-1?-1:o:-1!==n&&(i=n),-1===i){r=e.slice(s);break}{let r=e.slice(s,i);t.push(r),"\r"===e[(s=i+1)-1]&&e[s]===`
`&&s++}}return[t,r]}(`${n}${t}`);for(let e of r)c(e);n=s,i=!1},reset:function(e={}){n&&e.consume&&c(n),i=!0,a=void 0,l="",u="",n=""}}}({onEvent:iu(this,it),onRetry:iu(this,ir)})),id(this,nW,this.CONNECTING),id(this,nY,3e3),id(this,nQ,null!=(r=null==t?void 0:t.fetch)?r:globalThis.fetch),id(this,nJ,null!=(s=null==t?void 0:t.withCredentials)&&s),ip(this,n7,n5).call(this)}get readyState(){return iu(this,nW)}get url(){return iu(this,nG).href}get withCredentials(){return iu(this,nJ)}get onerror(){return iu(this,n2)}set onerror(e){id(this,n2,e)}get onmessage(){return iu(this,n4)}set onmessage(e){id(this,n4,e)}get onopen(){return iu(this,n3)}set onopen(e){id(this,n3,e)}addEventListener(e,t,r){super.addEventListener(e,t,r)}removeEventListener(e,t,r){super.removeEventListener(e,t,r)}close(){iu(this,nX)&&clearTimeout(iu(this,nX)),iu(this,nW)!==this.CLOSED&&(iu(this,n1)&&iu(this,n1).abort(),id(this,nW,this.CLOSED),id(this,n1,void 0))}}function im(e){return e?e instanceof Headers?Object.fromEntries(e.entries()):Array.isArray(e)?Object.fromEntries(e):{...e}:{}}async function i_(e){return(await s).getRandomValues(new Uint8Array(e))}async function iy(e){let t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",r=256-256%t.length,s="";for(;s.length<e;)for(let o of(await i_(e-s.length)))o<r&&(s+=t[o%t.length]);return s}async function iv(e){return await iy(e)}async function ig(e){return btoa(String.fromCharCode(...new Uint8Array(await (await s).subtle.digest("SHA-256",new TextEncoder().encode(e))))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}async function iw(e){if(e||(e=43),e<43||e>128)throw`Expected a length between 43 and 128. Received ${e}.`;let t=await iv(e),r=await ig(t);return{code_verifier:t,code_challenge:r}}nW=new WeakMap,nG=new WeakMap,nB=new WeakMap,nJ=new WeakMap,nQ=new WeakMap,nY=new WeakMap,nX=new WeakMap,n0=new WeakMap,n1=new WeakMap,n9=new WeakMap,n2=new WeakMap,n4=new WeakMap,n3=new WeakMap,n7=new WeakSet,n5=function(){id(this,nW,this.CONNECTING),id(this,n1,new AbortController),iu(this,nQ)(iu(this,nG),ip(this,n7,ie).call(this)).then(iu(this,n6)).catch(iu(this,n8))},n6=new WeakMap,n8=new WeakMap,ie=function(){var e;let t={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...iu(this,n0)?{"Last-Event-ID":iu(this,n0)}:void 0},cache:"no-store",signal:null==(e=iu(this,n1))?void 0:e.signal};return"window"in globalThis&&(t.credentials=this.withCredentials?"include":"same-origin"),t},it=new WeakMap,ir=new WeakMap,is=function(e,t){var r;iu(this,nW)!==this.CLOSED&&id(this,nW,this.CLOSED);let s=new nD("error",{code:t,message:e});null==(r=iu(this,n2))||r.call(this,s),this.dispatchEvent(s)},io=function(e,t){var r;if(iu(this,nW)===this.CLOSED)return;id(this,nW,this.CONNECTING);let s=new nD("error",{code:t,message:e});null==(r=iu(this,n2))||r.call(this,s),this.dispatchEvent(s),id(this,nX,setTimeout(iu(this,ii),iu(this,nY)))},ii=new WeakMap,ih.CONNECTING=0,ih.OPEN=1,ih.CLOSED=2,s=globalThis.crypto?.webcrypto??globalThis.crypto??Promise.resolve().then(r.t.bind(r,6005,19)).then(e=>e.webcrypto);let i$={custom:"custom"},ib=tV(ri,void 0).superRefine((e,t)=>{if(!URL.canParse(e))return t.addIssue({code:i$.custom,message:"URL must be parseable",fatal:!0}),d}).refine(e=>{let t=new URL(e);return"javascript:"!==t.protocol&&"data:"!==t.protocol&&"vbscript:"!==t.protocol},{message:"URL cannot use javascript:, data:, or vbscript: scheme"}),ik=rq({resource:rt().url(),authorization_servers:rR(ib).optional(),jwks_uri:rt().url().optional(),scopes_supported:rR(rt()).optional(),bearer_methods_supported:rR(rt()).optional(),resource_signing_alg_values_supported:rR(rt()).optional(),resource_name:rt().optional(),resource_documentation:rt().optional(),resource_policy_uri:rt().url().optional(),resource_tos_uri:rt().url().optional(),tls_client_certificate_bound_access_tokens:rP().optional(),authorization_details_types_supported:rR(rt()).optional(),dpop_signing_alg_values_supported:rR(rt()).optional(),dpop_bound_access_tokens_required:rP().optional()}),iE=rq({issuer:rt(),authorization_endpoint:ib,token_endpoint:ib,registration_endpoint:ib.optional(),scopes_supported:rR(rt()).optional(),response_types_supported:rR(rt()),response_modes_supported:rR(rt()).optional(),grant_types_supported:rR(rt()).optional(),token_endpoint_auth_methods_supported:rR(rt()).optional(),token_endpoint_auth_signing_alg_values_supported:rR(rt()).optional(),service_documentation:ib.optional(),revocation_endpoint:ib.optional(),revocation_endpoint_auth_methods_supported:rR(rt()).optional(),revocation_endpoint_auth_signing_alg_values_supported:rR(rt()).optional(),introspection_endpoint:rt().optional(),introspection_endpoint_auth_methods_supported:rR(rt()).optional(),introspection_endpoint_auth_signing_alg_values_supported:rR(rt()).optional(),code_challenge_methods_supported:rR(rt()).optional(),client_id_metadata_document_supported:rP().optional()}),iS=rA({...rq({issuer:rt(),authorization_endpoint:ib,token_endpoint:ib,userinfo_endpoint:ib.optional(),jwks_uri:ib,registration_endpoint:ib.optional(),scopes_supported:rR(rt()).optional(),response_types_supported:rR(rt()),response_modes_supported:rR(rt()).optional(),grant_types_supported:rR(rt()).optional(),acr_values_supported:rR(rt()).optional(),subject_types_supported:rR(rt()),id_token_signing_alg_values_supported:rR(rt()),id_token_encryption_alg_values_supported:rR(rt()).optional(),id_token_encryption_enc_values_supported:rR(rt()).optional(),userinfo_signing_alg_values_supported:rR(rt()).optional(),userinfo_encryption_alg_values_supported:rR(rt()).optional(),userinfo_encryption_enc_values_supported:rR(rt()).optional(),request_object_signing_alg_values_supported:rR(rt()).optional(),request_object_encryption_alg_values_supported:rR(rt()).optional(),request_object_encryption_enc_values_supported:rR(rt()).optional(),token_endpoint_auth_methods_supported:rR(rt()).optional(),token_endpoint_auth_signing_alg_values_supported:rR(rt()).optional(),display_values_supported:rR(rt()).optional(),claim_types_supported:rR(rt()).optional(),claims_supported:rR(rt()).optional(),service_documentation:rt().optional(),claims_locales_supported:rR(rt()).optional(),ui_locales_supported:rR(rt()).optional(),claims_parameter_supported:rP().optional(),request_parameter_supported:rP().optional(),request_uri_parameter_supported:rP().optional(),require_request_uri_registration:rP().optional(),op_policy_uri:ib.optional(),op_tos_uri:ib.optional(),client_id_metadata_document_supported:rP().optional()}).shape,...iE.pick({code_challenge_methods_supported:!0}).shape}),iT=rA({access_token:rt(),id_token:rt().optional(),token_type:rt(),expires_in:new rb({type:"number",coerce:!0,checks:[],...I(void 0)}).optional(),scope:rt().optional(),refresh_token:rt().optional()}).strip(),iP=rA({error:rt(),error_description:rt().optional(),error_uri:rt().optional()}),ix=ib.optional().or(rJ("").transform(()=>void 0)),iI=rA({redirect_uris:rR(ib),token_endpoint_auth_method:rt().optional(),grant_types:rR(rt()).optional(),response_types:rR(rt()).optional(),client_name:rt().optional(),client_uri:ib.optional(),logo_uri:ix,scope:rt().optional(),contacts:rR(rt()).optional(),tos_uri:ix,policy_uri:rt().optional(),jwks_uri:ib.optional(),jwks:new rz({type:"any"}).optional(),software_id:rt().optional(),software_version:rt().optional(),software_statement:rt().optional()}).strip(),iz=rA({client_id:rt(),client_secret:rt().optional(),client_id_issued_at:rk().optional(),client_secret_expires_at:rk().optional()}).strip(),iC=iI.merge(iz);rA({error:rt(),error_description:rt().optional()}).strip(),rA({token:rt(),token_type_hint:rt().optional()}).strip();class iN extends Error{constructor(e,t){super(e),this.errorUri=t,this.name=this.constructor.name}toResponseObject(){let e={error:this.errorCode,error_description:this.message};return this.errorUri&&(e.error_uri=this.errorUri),e}get errorCode(){return this.constructor.errorCode}}class ij extends iN{}ij.errorCode="invalid_request";class iO extends iN{}iO.errorCode="invalid_client";class iR extends iN{}iR.errorCode="invalid_grant";class iM extends iN{}iM.errorCode="unauthorized_client";class iA extends iN{}iA.errorCode="unsupported_grant_type";class iq extends iN{}iq.errorCode="invalid_scope";class iU extends iN{}iU.errorCode="access_denied";class iD extends iN{}iD.errorCode="server_error";class iV extends iN{}iV.errorCode="temporarily_unavailable";class iL extends iN{}iL.errorCode="unsupported_response_type";class iF extends iN{}iF.errorCode="unsupported_token_type";class iZ extends iN{}iZ.errorCode="invalid_token";class iH extends iN{}iH.errorCode="method_not_allowed";class iK extends iN{}iK.errorCode="too_many_requests";class iW extends iN{}iW.errorCode="invalid_client_metadata";class iG extends iN{}iG.errorCode="insufficient_scope";class iB extends iN{}iB.errorCode="invalid_target";let iJ={[ij.errorCode]:ij,[iO.errorCode]:iO,[iR.errorCode]:iR,[iM.errorCode]:iM,[iA.errorCode]:iA,[iq.errorCode]:iq,[iU.errorCode]:iU,[iD.errorCode]:iD,[iV.errorCode]:iV,[iL.errorCode]:iL,[iF.errorCode]:iF,[iZ.errorCode]:iZ,[iH.errorCode]:iH,[iK.errorCode]:iK,[iW.errorCode]:iW,[iG.errorCode]:iG,[iB.errorCode]:iB};class iQ extends Error{constructor(e){super(e??"Unauthorized")}}let iY="code",iX="S256";async function i0(e){let t=e instanceof Response?e.status:void 0,r=e instanceof Response?await e.text():e;try{let{error:e,error_description:t,error_uri:s}=iP.parse(JSON.parse(r));return new(iJ[e]||iD)(t||"",s)}catch(e){return new iD(`${t?`HTTP ${t}: `:""}Invalid OAuth error response: ${e}. Raw body: ${r}`)}}async function i1(e,t){try{return await i9(e,t)}catch(r){if(r instanceof iO||r instanceof iM)return await e.invalidateCredentials?.("all"),await i9(e,t);if(r instanceof iR)return await e.invalidateCredentials?.("tokens"),await i9(e,t);throw r}}async function i9(e,{serverUrl:t,authorizationCode:r,scope:s,resourceMetadataUrl:o,fetchFn:n}){let i,a,l;let u=await e.discoveryState?.(),c=o;if(!c&&u?.resourceMetadataUrl&&(c=new URL(u.resourceMetadataUrl)),u?.authorizationServerUrl){if(a=u.authorizationServerUrl,i=u.resourceMetadata,l=u.authorizationServerMetadata??await ae(a,{fetchFn:n}),!i)try{i=await i7(t,{resourceMetadataUrl:c},n)}catch{}(l!==u.authorizationServerMetadata||i!==u.resourceMetadata)&&await e.saveDiscoveryState?.({authorizationServerUrl:String(a),resourceMetadataUrl:c?.toString(),resourceMetadata:i,authorizationServerMetadata:l})}else{let r=await at(t,{resourceMetadataUrl:c,fetchFn:n});a=r.authorizationServerUrl,l=r.authorizationServerMetadata,i=r.resourceMetadata,await e.saveDiscoveryState?.({authorizationServerUrl:String(a),resourceMetadataUrl:c?.toString(),resourceMetadata:i,authorizationServerMetadata:l})}let d=await i2(t,e,i),p=await Promise.resolve(e.clientInformation());if(!p){if(void 0!==r)throw Error("Existing OAuth client information is required when exchanging an authorization code");let t=l?.client_id_metadata_document_supported===!0,s=e.clientMetadataUrl;if(s&&!function(e){if(!e)return!1;try{let t=new URL(e);return"https:"===t.protocol&&"/"!==t.pathname}catch{return!1}}(s))throw new iW(`clientMetadataUrl must be a valid HTTPS URL with a non-root pathname, got: ${s}`);if(t&&s)p={client_id:s},await e.saveClientInformation?.(p);else{if(!e.saveClientInformation)throw Error("OAuth client information must be saveable for dynamic registration");let t=await ai(a,{metadata:l,clientMetadata:e.clientMetadata,fetchFn:n});await e.saveClientInformation(t),p=t}}let h=!e.redirectUrl;if(void 0!==r||h){let t=await an(e,a,{metadata:l,resource:d,authorizationCode:r,fetchFn:n});return await e.saveTokens(t),"AUTHORIZED"}let f=await e.tokens();if(f?.refresh_token)try{let t=await ao(a,{metadata:l,clientInformation:p,refreshToken:f.refresh_token,resource:d,addClientAuthentication:e.addClientAuthentication,fetchFn:n});return await e.saveTokens(t),"AUTHORIZED"}catch(e){if(!(e instanceof iN)||e instanceof iD);else throw e}let m=e.state?await e.state():void 0,{authorizationUrl:_,codeVerifier:y}=await ar(a,{metadata:l,clientInformation:p,state:m,redirectUrl:e.redirectUrl,scope:s||i?.scopes_supported?.join(" ")||e.clientMetadata.scope,resource:d});return await e.saveCodeVerifier(y),await e.redirectToAuthorization(_),"REDIRECT"}async function i2(e,t,r){let s=function(e){let t=new URL("string"==typeof e?e:e.href);return t.hash="",t}(e);if(t.validateResourceURL)return await t.validateResourceURL(s,r?.resource);if(r){if(!function({requestedResource:e,configuredResource:t}){let r=new URL("string"==typeof e?e:e.href),s=new URL("string"==typeof t?t:t.href);if(r.origin!==s.origin||r.pathname.length<s.pathname.length)return!1;let o=r.pathname.endsWith("/")?r.pathname:r.pathname+"/",n=s.pathname.endsWith("/")?s.pathname:s.pathname+"/";return o.startsWith(n)}({requestedResource:s,configuredResource:r.resource}))throw Error(`Protected resource ${r.resource} does not match expected ${s} (or origin)`);return new URL(r.resource)}}function i4(e){let t;let r=e.headers.get("WWW-Authenticate");if(!r)return{};let[s,o]=r.split(" ");if("bearer"!==s.toLowerCase()||!o)return{};let n=i3(e,"resource_metadata")||void 0;if(n)try{t=new URL(n)}catch{}return{resourceMetadataUrl:t,scope:i3(e,"scope")||void 0,error:i3(e,"error")||void 0}}function i3(e,t){let r=e.headers.get("WWW-Authenticate");if(!r)return null;let s=RegExp(`${t}=(?:"([^"]+)"|([^\\s,]+))`),o=r.match(s);return o?o[1]||o[2]:null}async function i7(e,t,r=fetch){let s=await i8(e,"oauth-protected-resource",r,{protocolVersion:t?.protocolVersion,metadataUrl:t?.resourceMetadataUrl});if(!s||404===s.status)throw await s?.body?.cancel(),Error("Resource server does not implement OAuth 2.0 Protected Resource Metadata.");if(!s.ok)throw await s.body?.cancel(),Error(`HTTP ${s.status} trying to load well-known OAuth protected resource metadata.`);return ik.parse(await s.json())}async function i5(e,t,r=fetch){try{return await r(e,{headers:t})}catch(s){if(s instanceof TypeError){if(t)return i5(e,void 0,r);return}throw s}}async function i6(e,t,r=fetch){return await i5(e,{"MCP-Protocol-Version":t},r)}async function i8(e,t,r,s){var o,n;let i;let a=new URL(e),l=s?.protocolVersion??st;s?.metadataUrl?i=new URL(s.metadataUrl):(i=new URL(function(e,t="",r={}){return t.endsWith("/")&&(t=t.slice(0,-1)),r.prependPathname?`${t}/.well-known/${e}`:`/.well-known/${e}${t}`}(t,a.pathname),s?.metadataServerUrl??a)).search=a.search;let u=await i6(i,l,r);if(!s?.metadataUrl&&(o=u,n=a.pathname,!o||o.status>=400&&o.status<500&&"/"!==n)){let e=new URL(`/.well-known/${t}`,a);u=await i6(e,l,r)}return u}async function ae(e,{fetchFn:t=fetch,protocolVersion:r=st}={}){let s={"MCP-Protocol-Version":r,Accept:"application/json"};for(let{url:r,type:o}of function(e){let t="string"==typeof e?new URL(e):e,r="/"!==t.pathname,s=[];if(!r)return s.push({url:new URL("/.well-known/oauth-authorization-server",t.origin),type:"oauth"}),s.push({url:new URL("/.well-known/openid-configuration",t.origin),type:"oidc"}),s;let o=t.pathname;return o.endsWith("/")&&(o=o.slice(0,-1)),s.push({url:new URL(`/.well-known/oauth-authorization-server${o}`,t.origin),type:"oauth"}),s.push({url:new URL(`/.well-known/openid-configuration${o}`,t.origin),type:"oidc"}),s.push({url:new URL(`${o}/.well-known/openid-configuration`,t.origin),type:"oidc"}),s}(e)){let e=await i5(r,s,t);if(e){if(!e.ok){if(await e.body?.cancel(),e.status>=400&&e.status<500)continue;throw Error(`HTTP ${e.status} trying to load ${"oauth"===o?"OAuth":"OpenID provider"} metadata from ${r}`)}if("oauth"===o)return iE.parse(await e.json());return iS.parse(await e.json())}}}async function at(e,t){let r,s;try{(r=await i7(e,{resourceMetadataUrl:t?.resourceMetadataUrl},t?.fetchFn)).authorization_servers&&r.authorization_servers.length>0&&(s=r.authorization_servers[0])}catch{}s||(s=String(new URL("/",e)));let o=await ae(s,{fetchFn:t?.fetchFn});return{authorizationServerUrl:s,authorizationServerMetadata:o,resourceMetadata:r}}async function ar(e,{metadata:t,clientInformation:r,redirectUrl:s,scope:o,state:n,resource:i}){let a;if(t){if(a=new URL(t.authorization_endpoint),!t.response_types_supported.includes(iY))throw Error(`Incompatible auth server: does not support response type ${iY}`);if(t.code_challenge_methods_supported&&!t.code_challenge_methods_supported.includes(iX))throw Error(`Incompatible auth server: does not support code challenge method ${iX}`)}else a=new URL("/authorize",e);let l=await iw(),u=l.code_verifier,c=l.code_challenge;return a.searchParams.set("response_type",iY),a.searchParams.set("client_id",r.client_id),a.searchParams.set("code_challenge",c),a.searchParams.set("code_challenge_method",iX),a.searchParams.set("redirect_uri",String(s)),n&&a.searchParams.set("state",n),o&&a.searchParams.set("scope",o),o?.includes("offline_access")&&a.searchParams.append("prompt","consent"),i&&a.searchParams.set("resource",i.href),{authorizationUrl:a,codeVerifier:u}}async function as(e,{metadata:t,tokenRequestParams:r,clientInformation:s,addClientAuthentication:o,resource:n,fetchFn:i}){let a=t?.token_endpoint?new URL(t.token_endpoint):new URL("/token",e),l=new Headers({"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"});n&&r.set("resource",n.href),o?await o(l,r,a,t):s&&function(e,t,r,s){let{client_id:o,client_secret:n}=t;switch(e){case"client_secret_basic":(function(e,t,r){if(!t)throw Error("client_secret_basic authentication requires a client_secret");let s=btoa(`${e}:${t}`);r.set("Authorization",`Basic ${s}`)})(o,n,r);return;case"client_secret_post":s.set("client_id",o),n&&s.set("client_secret",n);return;case"none":(function(e,t){t.set("client_id",e)})(o,s);return;default:throw Error(`Unsupported client authentication method: ${e}`)}}(function(e,t){let r=void 0!==e.client_secret;return 0===t.length?r?"client_secret_post":"none":"token_endpoint_auth_method"in e&&e.token_endpoint_auth_method&&["client_secret_basic","client_secret_post","none"].includes(e.token_endpoint_auth_method)&&t.includes(e.token_endpoint_auth_method)?e.token_endpoint_auth_method:r&&t.includes("client_secret_basic")?"client_secret_basic":r&&t.includes("client_secret_post")?"client_secret_post":t.includes("none")?"none":r?"client_secret_post":"none"}(s,t?.token_endpoint_auth_methods_supported??[]),s,l,r);let u=await (i??fetch)(a,{method:"POST",headers:l,body:r});if(!u.ok)throw await i0(u);return iT.parse(await u.json())}async function ao(e,{metadata:t,clientInformation:r,refreshToken:s,resource:o,addClientAuthentication:n,fetchFn:i}){let a=new URLSearchParams({grant_type:"refresh_token",refresh_token:s});return{refresh_token:s,...await as(e,{metadata:t,tokenRequestParams:a,clientInformation:r,addClientAuthentication:n,resource:o,fetchFn:i})}}async function an(e,t,{metadata:r,resource:s,authorizationCode:o,fetchFn:n}={}){let i;let a=e.clientMetadata.scope;if(e.prepareTokenRequest&&(i=await e.prepareTokenRequest(a)),!i){if(!o)throw Error("Either provider.prepareTokenRequest() or authorizationCode is required");if(!e.redirectUrl)throw Error("redirectUrl is required for authorization_code flow");i=new URLSearchParams({grant_type:"authorization_code",code:o,code_verifier:await e.codeVerifier(),redirect_uri:String(e.redirectUrl)})}return as(t,{metadata:r,tokenRequestParams:i,clientInformation:await e.clientInformation()??void 0,addClientAuthentication:e.addClientAuthentication,resource:s,fetchFn:n})}async function ai(e,{metadata:t,clientMetadata:r,fetchFn:s}){let o;if(t){if(!t.registration_endpoint)throw Error("Incompatible auth server: does not support dynamic client registration");o=new URL(t.registration_endpoint)}else o=new URL("/register",e);let n=await (s??fetch)(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!n.ok)throw await i0(n);return iC.parse(await n.json())}class aa extends Error{constructor(e,t,r){super(`SSE error: ${t}`),this.code=e,this.event=r}}class al{constructor(e,t){this._url=e,this._resourceMetadataUrl=void 0,this._scope=void 0,this._eventSourceInit=t?.eventSourceInit,this._requestInit=t?.requestInit,this._authProvider=t?.authProvider,this._fetch=t?.fetch,this._fetchWithInit=function(e=fetch,t){return t?async(r,s)=>e(r,{...t,...s,headers:s?.headers?{...im(t.headers),...im(s.headers)}:t.headers}):e}(t?.fetch,t?.requestInit)}async _authThenStart(){let e;if(!this._authProvider)throw new iQ("No auth provider");try{e=await i1(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit})}catch(e){throw this.onerror?.(e),e}if("AUTHORIZED"!==e)throw new iQ;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let t=await this._authProvider.tokens();t&&(e.Authorization=`Bearer ${t.access_token}`)}this._protocolVersion&&(e["mcp-protocol-version"]=this._protocolVersion);let t=im(this._requestInit?.headers);return new Headers({...e,...t})}_startOrAuth(){let e=this?._eventSourceInit?.fetch??this._fetch??fetch;return new Promise((t,r)=>{this._eventSource=new ih(this._url.href,{...this._eventSourceInit,fetch:async(t,r)=>{let s=await this._commonHeaders();s.set("Accept","text/event-stream");let o=await e(t,{...r,headers:s});if(401===o.status&&o.headers.has("www-authenticate")){let{resourceMetadataUrl:e,scope:t}=i4(o);this._resourceMetadataUrl=e,this._scope=t}return o}}),this._abortController=new AbortController,this._eventSource.onerror=e=>{if(401===e.code&&this._authProvider){this._authThenStart().then(t,r);return}let s=new aa(e.code,e.message,e);r(s),this.onerror?.(s)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",e=>{try{if(this._endpoint=new URL(e.data,this._url),this._endpoint.origin!==this._url.origin)throw Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(e){r(e),this.onerror?.(e),this.close();return}t()}),this._eventSource.onmessage=e=>{let t;try{t=sT.parse(JSON.parse(e.data))}catch(e){this.onerror?.(e);return}this.onmessage?.(t)}})}async start(){if(this._eventSource)throw Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new iQ("No auth provider");if("AUTHORIZED"!==await i1(this._authProvider,{serverUrl:this._url,authorizationCode:e,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit}))throw new iQ("Failed to authorize")}async close(){this._abortController?.abort(),this._eventSource?.close(),this.onclose?.()}async send(e){if(!this._endpoint)throw Error("Not connected");try{let t=await this._commonHeaders();t.set("content-type","application/json");let r={...this._requestInit,method:"POST",headers:t,body:JSON.stringify(e),signal:this._abortController?.signal},s=await (this._fetch??fetch)(this._endpoint,r);if(!s.ok){let t=await s.text().catch(()=>null);if(401===s.status&&this._authProvider){let{resourceMetadataUrl:t,scope:r}=i4(s);this._resourceMetadataUrl=t,this._scope=r;let o=await i1(this._authProvider,{serverUrl:this._url,resourceMetadataUrl:this._resourceMetadataUrl,scope:this._scope,fetchFn:this._fetchWithInit});if("AUTHORIZED"!==o)throw new iQ;return this.send(e)}throw Error(`Error POSTing to endpoint (HTTP ${s.status}): ${t}`)}await s.body?.cancel()}catch(e){throw this.onerror?.(e),e}}setProtocolVersion(e){this._protocolVersion=e}}class au{constructor(e){this.client=null,this.transport=null,this.isConnected=!1,this.server=e.server,this.timeoutMs=e.timeoutMs??3e4,this.requestTimeoutMs=e.requestTimeoutMs??6e4}async connect(){if(!this.isConnected)try{this.transport=this.createTransport(this.server.transport),this.client=new nC({name:"omni-prime-mcp-client",version:"1.0.0"},{capabilities:{}}),await this.withTimeout(this.client.connect(this.transport),this.timeoutMs,`Connection to ${this.server.name} timed out`),this.isConnected=!0}catch(e){throw this.cleanup(),e}}async disconnect(){this.cleanup(),this.isConnected=!1}isActive(){return this.isConnected&&null!==this.client}async listTools(){return this.ensureConnected(),(await this.withTimeout(this.client.listTools(),this.requestTimeoutMs,"Tool listing timed out")).tools.map(e=>({id:`${this.server.id}:${e.name}`,serverId:this.server.id,name:e.name,description:e.description??null,inputSchema:e.inputSchema,isBuiltIn:this.server.isBuiltIn,isEnabled:!0,useCount:0,lastUsedAt:null,createdAt:new Date,updatedAt:new Date}))}async callTool(e,t,r){this.ensureConnected();let s=Date.now();try{let o;r?.({status:"started",message:`Executing ${e}...`,percentComplete:0});let n=await this.withTimeout(this.client.callTool({name:e,arguments:t}),this.requestTimeoutMs,`Tool execution for ${e} timed out`);if(r?.({status:"completed",message:`${e} completed`,percentComplete:100}),n.content&&Array.isArray(n.content)){let e=n.content.filter(e=>"text"===e.type).map(e=>e.text).join("\n"),t=n.content.filter(e=>"image"===e.type).map(e=>({type:"image",data:e.data,mimeType:e.mimeType}));if(t.length>0)o={text:e||void 0,images:t};else try{o=JSON.parse(e)}catch{o=e}}else o=n;return{success:!0,result:o,executionTimeMs:Date.now()-s}}catch(e){return r?.({status:"error",message:e instanceof Error?e.message:"Unknown error occurred"}),{success:!1,error:e instanceof Error?e.message:"Unknown error",executionTimeMs:Date.now()-s}}}createTransport(e){switch(e){case"stdio":{if(!this.server.command)throw Error("Command is required for stdio transport");let e={...process.env,...this.server.env};return new nA({command:this.server.command,args:this.server.args,env:e})}case"sse":case"http":if(!this.server.url)throw Error("URL is required for SSE/HTTP transport");return new al(new URL(this.server.url));default:throw Error(`Unsupported transport type: ${e}`)}}ensureConnected(){if(!this.isConnected||!this.client)throw Error("MCP client is not connected")}async withTimeout(e,t,r){return Promise.race([e,new Promise((e,s)=>setTimeout(()=>s(Error(r)),t))])}cleanup(){try{this.transport?.close()}catch{}this.transport=null,this.client=null}}var ac=r(57745);let ad={maxExecutionTimeMs:6e4,maxMemoryBytes:536870912,networkEnabled:!1,maxToolCallsPerSession:100};class ap{constructor(e={}){this.connections=new Map,this.cleanupInterval=null,this.defaultSandbox={...ad,...e.defaultSandbox},this.connectionTimeoutMs=e.connectionTimeoutMs??3e4,this.maxIdleTimeMs=e.maxIdleTimeMs??3e5;let t=e.cleanupIntervalMs??6e4;this.cleanupInterval=setInterval(()=>{this.cleanupIdleConnections()},t)}async dispose(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null),await Promise.all(Array.from(this.connections.values()).map(e=>e.client.disconnect())),this.connections.clear()}async connectServer(e){let t=this.connections.get(e.id);if(t)return t.lastUsedAt=new Date,"connected";let r={...this.defaultSandbox,...e.config?.sandbox??{}};try{let t=new au({server:e,timeoutMs:this.connectionTimeoutMs,requestTimeoutMs:r.maxExecutionTimeMs});return await t.connect(),this.connections.set(e.id,{server:e,client:t,lastUsedAt:new Date,toolCallCount:0,sandbox:r}),await this.updateServerStatus(e.id,"connected"),await this.syncServerTools(e.id),"connected"}catch(r){let t=r instanceof Error?r.message:"Connection failed";return await this.updateServerStatus(e.id,"error",t),"error"}}async disconnectServer(e){let t=this.connections.get(e);t&&(await t.client.disconnect(),this.connections.delete(e)),await this.updateServerStatus(e,"disconnected")}async getClient(e){let t=this.connections.get(e);if(!t){let r=(0,u.V)(),s=await r.query.mcpServers.findFirst({where:(0,ac.eq)(c.i7.id,e)});if(!s||"connected"!==await this.connectServer(s))return null;t=this.connections.get(e)}return t?(t.lastUsedAt=new Date,t.client):null}async executeTool(e,t,r,s){let o=this.connections.get(e);if(!o)return{success:!1,error:`Server ${e} is not connected`,executionTimeMs:0};if(o.sandbox.maxToolCallsPerSession&&o.toolCallCount>=o.sandbox.maxToolCallsPerSession)return{success:!1,error:`Tool call limit exceeded (${o.sandbox.maxToolCallsPerSession} calls per session)`,executionTimeMs:0};if(!o.sandbox.networkEnabled&&Object.values(r).some(e=>"string"==typeof e&&(e.startsWith("http://")||e.startsWith("https://"))))return{success:!1,error:"Network access is disabled for this server",executionTimeMs:0};if(o.sandbox.allowedDomains&&o.sandbox.allowedDomains.length>0){for(let e of Object.values(r))if("string"==typeof e&&e.startsWith("http"))try{let t=new URL(e);if(!o.sandbox.allowedDomains.includes(t.hostname))return{success:!1,error:`Domain ${t.hostname} is not in the allowed list`,executionTimeMs:0}}catch{}}let n=Date.now(),i=o.sandbox.maxExecutionTimeMs;try{let e=new Promise((e,t)=>setTimeout(()=>t(Error(`Tool execution timed out after ${i}ms`)),i)),n=o.client.callTool(t,r,s),a=await Promise.race([n,e]);return o.toolCallCount++,o.lastUsedAt=new Date,{success:a.success,result:a.result,error:a.error,executionTimeMs:a.executionTimeMs}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Tool execution failed",executionTimeMs:Date.now()-n}}}async syncServerTools(e){let t=this.connections.get(e);if(!t)throw Error(`Server ${e} is not connected`);try{let r=await t.client.listTools(),s=(0,u.V)(),o=await s.query.mcpTools.findMany({where:(0,ac.eq)(c.a$.serverId,e)}),n=new Set(o.map(e=>e.name));for(let o of r)n.has(o.name)||await s.insert(c.a$).values({serverId:e,name:o.name,description:o.description,inputSchema:o.inputSchema,isEnabled:!0,isBuiltIn:t.server.isBuiltIn});return await s.update(c.i7).set({toolCount:r.length,lastSyncedAt:new Date}).where((0,ac.eq)(c.i7.id,e)),r}catch(t){throw console.error(`Failed to sync tools for server ${e}:`,t),t}}getConnectionStatus(e){return this.connections.get(e)?"connected":"disconnected"}getConnectedServers(){return Array.from(this.connections.keys())}updateSandboxConfig(e,t){let r=this.connections.get(e);r&&(r.sandbox={...r.sandbox,...t})}async updateServerStatus(e,t,r){try{let s=(0,u.V)();await s.update(c.i7).set({status:t,statusMessage:r??null}).where((0,ac.eq)(c.i7.id,e))}catch(e){console.error("Failed to update server status:",e)}}async cleanupIdleConnections(){let e=Date.now(),t=[];for(let[r,s]of this.connections.entries())e-s.lastUsedAt.getTime()>this.maxIdleTimeMs&&t.push(r);for(let e of t)console.log(`Disconnecting idle server: ${e}`),await this.disconnectServer(e)}}let ah=new ap({defaultSandbox:{maxExecutionTimeMs:6e4,networkEnabled:!1},maxIdleTimeMs:3e5,cleanupIntervalMs:6e4});var af=r(81445),am=r(84770),a_=r.n(am);async function ay(e){try{let{searchParams:t}=new URL(e.url),r="true"===t.get("includeTools"),s=t.get("status"),o=(0,u.V)().query.mcpServers.findMany({where:s?(0,ac.eq)(c.i7.status,s):void 0,with:r?{tools:!0}:void 0,orderBy:[(0,af.C)(c.i7.updatedAt)]}),n=await o;return l.NextResponse.json({servers:n})}catch(e){return console.error("[MCP Servers API] Error listing servers:",e),l.NextResponse.json({error:"Failed to list servers"},{status:500})}}async function av(e){try{let t=await e.json();if(!t.name||!t.transport)return l.NextResponse.json({error:"name and transport are required"},{status:400});if("stdio"===t.transport&&!t.command)return l.NextResponse.json({error:"command is required for stdio transport"},{status:400});if(("sse"===t.transport||"http"===t.transport)&&!t.url)return l.NextResponse.json({error:"url is required for sse/http transport"},{status:400});let r=(0,u.V)(),s=await r.query.userProfiles.findFirst();if(!s)return l.NextResponse.json({error:"User profile not found"},{status:404});let o=a_().randomUUID();await r.insert(c.i7).values({id:o,ownerId:s.id,name:t.name,description:t.description??null,transport:t.transport,command:t.command??null,args:t.args??[],url:t.url??null,env:t.env??{},config:t.config??{},status:"disconnected",isBuiltIn:!1,isEnabled:!0});let n=await r.query.mcpServers.findFirst({where:(0,ac.eq)(c.i7.id,o)});if(n)try{let e=await ah.connectServer({...n,args:n.args??[],env:n.env??{},config:n.config??{}});return l.NextResponse.json({server:{...n,connectionStatus:e},message:"connected"===e?"Server connected and tools synced":"Server registered but connection failed"},{status:201})}catch(e){return l.NextResponse.json({server:n,message:"Server registered but connection failed. Check configuration.",error:e instanceof Error?e.message:"Connection failed"},{status:201})}return l.NextResponse.json({error:"Failed to create server"},{status:500})}catch(e){return console.error("[MCP Servers API] Error creating server:",e),l.NextResponse.json({error:"Failed to create server"},{status:500})}}let ag=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/mcp/servers/route",pathname:"/api/mcp/servers",filename:"route",bundlePath:"app/api/mcp/servers/route"},resolvedPagePath:"C:\\Users\\asher\\PROJECTS\\OMNI-PRIME\\src\\app\\api\\mcp\\servers\\route.ts",nextConfigOutput:"export",userland:o}),{requestAsyncStorage:aw,staticGenerationAsyncStorage:a$,serverHooks:ab}=ag,ak="/api/mcp/servers/route";function aE(){return(0,a.patchFetch)({serverHooks:ab,staticGenerationAsyncStorage:a$})}},50271:(e,t)=>{"use strict";function r(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:r(n,i),time:r(l(!0),u),"date-time":r(p(!0),h),"iso-time":r(l(),c),"iso-date-time":r(p(),f),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return m.test(e)&&_.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if($.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return y.lastIndex=0,y.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=g&&e>=v}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:w},double:{type:"number",validate:w},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,i),time:r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),"date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),"iso-time":r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"iso-date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);let s=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,o=[0,31,28,31,30,31,30,31,31,30,31,30,31];function n(e){var t;let r=s.exec(e);if(!r)return!1;let n=+r[1],i=+r[2],a=+r[3];return i>=1&&i<=12&&a>=1&&a<=(2===i&&(t=n)%4==0&&(t%100!=0||t%400==0)?29:o[i])}function i(e,t){if(e&&t)return e>t?1:e<t?-1:0}let a=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function l(e){return function(t){let r=a.exec(t);if(!r)return!1;let s=+r[1],o=+r[2],n=+r[3],i=r[4],l="-"===r[5]?-1:1,u=+(r[6]||0),c=+(r[7]||0);if(u>23||c>59||e&&!i)return!1;if(s<=23&&o<=59&&n<60)return!0;let d=o-c*l,p=s-u*l-(d<0?1:0);return(23===p||-1===p)&&(59===d||-1===d)&&n<61}}function u(e,t){if(!(e&&t))return;let r=new Date("2020-01-01T"+e).valueOf(),s=new Date("2020-01-01T"+t).valueOf();if(r&&s)return r-s}function c(e,t){if(!(e&&t))return;let r=a.exec(e),s=a.exec(t);if(r&&s)return(e=r[1]+r[2]+r[3])>(t=s[1]+s[2]+s[3])?1:e<t?-1:0}let d=/t|\s/i;function p(e){let t=l(e);return function(e){let r=e.split(d);return 2===r.length&&n(r[0])&&t(r[1])}}function h(e,t){if(!(e&&t))return;let r=new Date(e).valueOf(),s=new Date(t).valueOf();if(r&&s)return r-s}function f(e,t){if(!(e&&t))return;let[r,s]=e.split(d),[o,n]=t.split(d),a=i(r,o);if(void 0!==a)return a||u(s,n)}let m=/\/|:/,_=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,v=-2147483648,g=2147483648-1;function w(){return!0}let $=/[^\\]\\Z/},28586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(50271),o=r(15957),n=r(9173),i=new n.Name("fullFormats"),a=new n.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return u(e,t,s.fullFormats,i),e;let[r,n]="fast"===t.mode?[s.fastFormats,a]:[s.fullFormats,i];return u(e,t.formats||s.formatNames,r,n),t.keywords&&(0,o.default)(e),e};function u(e,t,r,s){var o,i;for(let a of(null!==(o=(i=e.opts.code).formats)&&void 0!==o||(i.formats=(0,n._)`require("ajv-formats/dist/formats").${s}`),t))e.addFormat(a,r[a])}l.get=(e,t="full")=>{let r=("fast"===t?s.fastFormats:s.fullFormats)[e];if(!r)throw Error(`Unknown format "${e}"`);return r},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},15957:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;let s=r(19619),o=r(9173),n=o.operators,i={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}};t.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,o.str)`should be ${i[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,o._)`{comparison: ${i[e].okStr}, limit: ${t}}`},code(e){let{gen:t,data:r,schemaCode:n,keyword:a,it:l}=e,{opts:u,self:c}=l;if(!u.validateFormats)return;let d=new s.KeywordCxt(l,c.RULES.all.format.definition,"format");function p(e){return(0,o._)`${e}.compare(${r}, ${n}) ${i[a].fail} 0`}d.$data?function(){let r=t.scopeValue("formats",{ref:c.formats,code:u.code.formats}),s=t.const("fmt",(0,o._)`${r}[${d.schemaCode}]`);e.fail$data((0,o.or)((0,o._)`typeof ${s} != "object"`,(0,o._)`${s} instanceof RegExp`,(0,o._)`typeof ${s}.compare != "function"`,p(s)))}():function(){let r=d.schema,s=c.formats[r];if(!s||!0===s)return;if("object"!=typeof s||s instanceof RegExp||"function"!=typeof s.compare)throw Error(`"${a}": format "${r}" does not define "compare" function`);let n=t.scopeValue("formats",{key:r,ref:s,code:u.code.formats?(0,o._)`${u.code.formats}${(0,o.getProperty)(r)}`:void 0});e.fail$data(p(n))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},19619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;let s=r(77560),o=r(73124),n=r(16805),i=r(63181),a=["/properties"],l="http://json-schema.org/draft-07/schema";class u extends s.default{_addVocabularies(){super._addVocabularies(),o.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(n.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let e=this.opts.$data?this.$dataMetaSchema(i,a):i;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var c=r(29177);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return c.KeywordCxt}});var d=r(9173);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return d._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return d.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return d.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return d.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return d.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return d.CodeGen}});var p=r(14553);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return p.default}});var h=r(28432);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return h.default}})},16856:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class s extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=s;class o extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof s&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function n(e,...t){let r=[e[0]],s=0;for(;s<t.length;)l(r,t[s]),r.push(e[++s]);return new o(r)}t._Code=o,t.nil=new o(""),t._=n;let i=new o("+");function a(e,...t){let r=[u(e[0])],n=0;for(;n<t.length;)r.push(i),l(r,t[n]),r.push(i,u(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===i){var r,o;let n=(r=e[t-1],'""'===(o=e[t+1])?r:'""'===r?o:"string"==typeof r?o instanceof s||'"'!==r[r.length-1]?void 0:"string"!=typeof o?`${r.slice(0,-1)}${o}"`:'"'===o[0]?r.slice(0,-1)+o.slice(1):void 0:"string"!=typeof o||'"'!==o[0]||r instanceof s?void 0:`"${r}${o.slice(1)}`);if(void 0!==n){e.splice(t-1,3,n);continue}e[t++]="+"}t++}}(r),new o(r)}function l(e,t){t instanceof o?e.push(...t._items):t instanceof s?e.push(t):e.push("number"==typeof t||"boolean"==typeof t||null===t?t:u(Array.isArray(t)?t.join(","):t))}function u(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new o(u(e))},t.safeStringify=u,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new o(`.${e}`):n`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new o(`${e}`);throw Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new o(e.toString())}},9173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;let s=r(16856),o=r(13498);var n=r(16856);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=r(13498);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new s._Code(">"),GTE:new s._Code(">="),LT:new s._Code("<"),LTE:new s._Code("<="),EQ:new s._Code("==="),NEQ:new s._Code("!=="),NOT:new s._Code("!"),OR:new s._Code("||"),AND:new s._Code("&&"),ADD:new s._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){let r=e?o.varKinds.var:this.varKind,s=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${s};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=N(this.rhs,e,t)),this}get names(){return this.rhs instanceof s._CodeOrName?this.rhs.names:{}}}class u extends a{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof s.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=N(this.rhs,e,t),this}get names(){return C(this.lhs instanceof s.Name?{}:{...this.lhs.names},this.rhs)}}class c extends u{constructor(e,t,r,s){super(e,r,s),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class p extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){let t=this.label?` ${this.label}`:"";return`break${t};`+e}}class h extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=N(this.code,e,t),this}get names(){return this.code instanceof s._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){let{nodes:e}=this,t=e.length;for(;t--;){let r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){let{nodes:r}=this,s=r.length;for(;s--;){let o=r[s];o.optimizeNames(e,t)||(function(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}(e,o.names),r.splice(s,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>z(e,t.names),{})}}class _ extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class y extends m{}class v extends _{}v.kind="else";class g extends _{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();let e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){let e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof g?t:t.nodes:this.nodes.length?this:new g(j(e),t instanceof g?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=N(this.condition,e,t),this}get names(){let e=super.names;return C(e,this.condition),this.else&&z(e,this.else.names),e}}g.kind="if";class w extends _{}w.kind="for";class $ extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=N(this.iteration,e,t),this}get names(){return z(super.names,this.iteration.names)}}class b extends w{constructor(e,t,r,s){super(),this.varKind=e,this.name=t,this.from=r,this.to=s}render(e){let t=e.es5?o.varKinds.var:this.varKind,{name:r,from:s,to:n}=this;return`for(${t} ${r}=${s}; ${r}<${n}; ${r}++)`+super.render(e)}get names(){let e=C(super.names,this.from);return C(e,this.to)}}class k extends w{constructor(e,t,r,s){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=s}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=N(this.iterable,e,t),this}get names(){return z(super.names,this.iterable.names)}}class E extends _{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){let t=this.async?"async ":"";return`${t}function ${this.name}(${this.args})`+super.render(e)}}E.kind="func";class S extends m{render(e){return"return "+super.render(e)}}S.kind="return";class T extends _{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,s;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(s=this.finally)||void 0===s||s.optimizeNames(e,t),this}get names(){let e=super.names;return this.catch&&z(e,this.catch.names),this.finally&&z(e,this.finally.names),e}}class P extends _{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}P.kind="catch";class x extends _{render(e){return"finally"+super.render(e)}}x.kind="finally";class I{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new o.Scope({parent:e}),this._nodes=[new y]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){let r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,s){let o=this._scope.toName(t);return void 0!==r&&s&&(this._constants[o.str]=r),this._leafNode(new l(e,o,r)),o}const(e,t,r){return this._def(o.varKinds.const,e,t,r)}let(e,t,r){return this._def(o.varKinds.let,e,t,r)}var(e,t,r){return this._def(o.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new u(e,t,r))}add(e,r){return this._leafNode(new c(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==s.nil&&this._leafNode(new f(e)),this}object(...e){let t=["{"];for(let[r,o]of e)t.length>1&&t.push(","),t.push(r),(r!==o||this.opts.es5)&&(t.push(":"),(0,s.addCodeArg)(t,o));return t.push("}"),new s._Code(t)}if(e,t,r){if(this._blockNode(new g(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new g(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(g,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new $(e),t)}forRange(e,t,r,s,n=this.opts.es5?o.varKinds.var:o.varKinds.let){let i=this._scope.toName(e);return this._for(new b(n,i,t,r),()=>s(i))}forOf(e,t,r,n=o.varKinds.const){let i=this._scope.toName(e);if(this.opts.es5){let e=t instanceof s.Name?t:this.var("_arr",t);return this.forRange("_i",0,(0,s._)`${e}.length`,t=>{this.var(i,(0,s._)`${e}[${t}]`),r(i)})}return this._for(new k("of",n,i,t),()=>r(i))}forIn(e,t,r,n=this.opts.es5?o.varKinds.var:o.varKinds.const){if(this.opts.ownProperties)return this.forOf(e,(0,s._)`Object.keys(${t})`,r);let i=this._scope.toName(e);return this._for(new k("in",n,i,t),()=>r(i))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new d(e))}break(e){return this._leafNode(new p(e))}return(e){let t=new S;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(e,t,r){if(!t&&!r)throw Error('CodeGen: "try" without "catch" and "finally"');let s=new T;if(this._blockNode(s),this.code(e),t){let e=this.name("e");this._currNode=s.catch=new P(e),t(e)}return r&&(this._currNode=s.finally=new x,this.code(r)),this._endBlockNode(P,x)}throw(e){return this._leafNode(new h(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){let t=this._blockStarts.pop();if(void 0===t)throw Error("CodeGen: not in self-balancing block");let r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=s.nil,r,o){return this._blockNode(new E(e,t,r)),o&&this.code(o).endFunc(),this}endFunc(){return this._endBlockNode(E)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){let r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){let t=this._currNode;if(!(t instanceof g))throw Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){let e=this._nodes;return e[e.length-1]}set _currNode(e){let t=this._nodes;t[t.length-1]=e}}function z(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function C(e,t){return t instanceof s._CodeOrName?z(e,t.names):e}function N(e,t,r){if(e instanceof s.Name)return o(e);if(!(e instanceof s._Code&&e._items.some(e=>e instanceof s.Name&&1===t[e.str]&&void 0!==r[e.str])))return e;return new s._Code(e._items.reduce((e,t)=>(t instanceof s.Name&&(t=o(t)),t instanceof s._Code?e.push(...t._items):e.push(t),e),[]));function o(e){let s=r[e.str];return void 0===s||1!==t[e.str]?e:(delete t[e.str],s)}}function j(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:(0,s._)`!${A(e)}`}t.CodeGen=I,t.not=j;let O=M(t.operators.AND);t.and=function(...e){return e.reduce(O)};let R=M(t.operators.OR);function M(e){return(t,r)=>t===s.nil?r:r===s.nil?t:(0,s._)`${A(t)} ${e} ${A(r)}`}function A(e){return e instanceof s.Name?e:(0,s._)`(${e})`}t.or=function(...e){return e.reduce(R)}},13498:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;let o=r(16856);class n extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(s||(t.UsedValueState=s={})),t.varKinds={const:new o.Name("const"),let:new o.Name("let"),var:new o.Name("var")};class i{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof o.Name?e:this.name(e)}name(e){return new o.Name(this._newName(e))}_newName(e){let t=this._names[e]||this._nameGroup(e);return`${e}${t.index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=i;class a extends o.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=(0,o._)`.${new o.Name(t)}[${r}]`}}t.ValueScopeName=a;let l=(0,o._)`\n`;class u extends i{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:o.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw Error("CodeGen: ref must be passed in value");let s=this.toName(e),{prefix:o}=s,n=null!==(r=t.key)&&void 0!==r?r:t.ref,i=this._values[o];if(i){let e=i.get(n);if(e)return e}else i=this._values[o]=new Map;i.set(n,s);let a=this._scope[o]||(this._scope[o]=[]),l=a.length;return a[l]=t.ref,s.setValue(t,{property:o,itemIndex:l}),s}getValue(e,t){let r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw Error(`CodeGen: name "${t}" has no value`);return(0,o._)`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,r,i={},a){let l=o.nil;for(let u in e){let c=e[u];if(!c)continue;let d=i[u]=i[u]||new Map;c.forEach(e=>{if(d.has(e))return;d.set(e,s.Started);let i=r(e);if(i){let r=this.opts.es5?t.varKinds.var:t.varKinds.const;l=(0,o._)`${l}${r} ${e} = ${i};${this.opts._n}`}else if(i=null==a?void 0:a(e))l=(0,o._)`${l}${i}${this.opts._n}`;else throw new n(e);d.set(e,s.Completed)})}return l}}t.ValueScope=u},31948:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;let s=r(9173),o=r(73207),n=r(15830);function i(e,t){let r=e.const("err",t);e.if((0,s._)`${n.default.vErrors} === null`,()=>e.assign(n.default.vErrors,(0,s._)`[${r}]`),(0,s._)`${n.default.vErrors}.push(${r})`),e.code((0,s._)`${n.default.errors}++`)}function a(e,t){let{gen:r,validateName:o,schemaEnv:n}=e;n.$async?r.throw((0,s._)`new ${e.ValidationError}(${t})`):(r.assign((0,s._)`${o}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>(0,s.str)`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,s.str)`"${e}" keyword must be ${t} ($data)`:(0,s.str)`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,o,n){let{it:l}=e,{gen:c,compositeRule:d,allErrors:p}=l,h=u(e,r,o);(null!=n?n:d||p)?i(c,h):a(l,(0,s._)`[${h}]`)},t.reportExtraError=function(e,r=t.keywordError,s){let{it:o}=e,{gen:l,compositeRule:c,allErrors:d}=o;i(l,u(e,r,s)),c||d||a(o,n.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(n.default.errors,t),e.if((0,s._)`${n.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,s._)`${n.default.vErrors}.length`,t),()=>e.assign(n.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:o,errsCount:i,it:a}){if(void 0===i)throw Error("ajv implementation error");let l=e.name("err");e.forRange("i",i,n.default.errors,i=>{e.const(l,(0,s._)`${n.default.vErrors}[${i}]`),e.if((0,s._)`${l}.instancePath === undefined`,()=>e.assign((0,s._)`${l}.instancePath`,(0,s.strConcat)(n.default.instancePath,a.errorPath))),e.assign((0,s._)`${l}.schemaPath`,(0,s.str)`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign((0,s._)`${l}.schema`,r),e.assign((0,s._)`${l}.data`,o))})};let l={keyword:new s.Name("keyword"),schemaPath:new s.Name("schemaPath"),params:new s.Name("params"),propertyName:new s.Name("propertyName"),message:new s.Name("message"),schema:new s.Name("schema"),parentSchema:new s.Name("parentSchema")};function u(e,t,r){let{createErrors:i}=e.it;return!1===i?(0,s._)`{}`:function(e,t,r={}){let{gen:i,it:a}=e,u=[function({errorPath:e},{instancePath:t}){let r=t?(0,s.str)`${e}${(0,o.getErrorPath)(t,o.Type.Str)}`:e;return[n.default.instancePath,(0,s.strConcat)(n.default.instancePath,r)]}(a,r),function({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let i=n?t:(0,s.str)`${t}/${e}`;return r&&(i=(0,s.str)`${i}${(0,o.getErrorPath)(r,o.Type.Str)}`),[l.schemaPath,i]}(e,r)];return function(e,{params:t,message:r},o){let{keyword:i,data:a,schemaValue:u,it:c}=e,{opts:d,propertyName:p,topSchemaRef:h,schemaPath:f}=c;o.push([l.keyword,i],[l.params,"function"==typeof t?t(e):t||(0,s._)`{}`]),d.messages&&o.push([l.message,"function"==typeof r?r(e):r]),d.verbose&&o.push([l.schema,u],[l.parentSchema,(0,s._)`${h}${f}`],[n.default.data,a]),p&&o.push([l.propertyName,p])}(e,t,u),i.object(...u)}(e,t,r)}},64291:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;let s=r(9173),o=r(14553),n=r(15830),i=r(72367),a=r(73207),l=r(29177);class u{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,i.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function c(e){let t,r;let a=p.call(this,e);if(a)return a;let u=(0,i.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:c,lines:d}=this.opts.code,{ownProperties:h}=this.opts,f=new s.CodeGen(this.scope,{es5:c,lines:d,ownProperties:h});e.$async&&(t=f.scopeValue("Error",{ref:o.default,code:(0,s._)`require("ajv/dist/runtime/validation_error").default`}));let m=f.scopeName("validate");e.validateName=m;let _={gen:f,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[s.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:f.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,s.stringify)(e.schema)}:{ref:e.schema}),validateName:m,ValidationError:t,schema:e.schema,schemaEnv:e,rootId:u,baseId:e.baseId||u,schemaPath:s.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,s._)`""`,opts:this.opts,self:this};try{this._compilations.add(e),(0,l.validateFunctionCode)(_),f.optimize(this.opts.code.optimize);let t=f.toString();r=`${f.scopeRefs(n.default.scope)}return ${t}`,this.opts.code.process&&(r=this.opts.code.process(r,e));let o=Function(`${n.default.self}`,`${n.default.scope}`,r)(this,this.scope.get());if(this.scope.value(m,{ref:o}),o.errors=null,o.schema=e.schema,o.schemaEnv=e,e.$async&&(o.$async=!0),!0===this.opts.code.source&&(o.source={validateName:m,validateCode:t,scopeValues:f._values}),this.opts.unevaluated){let{props:e,items:t}=_;o.evaluated={props:e instanceof s.Name?void 0:e,items:t instanceof s.Name?void 0:t,dynamicProps:e instanceof s.Name,dynamicItems:t instanceof s.Name},o.source&&(o.source.evaluated=(0,s.stringify)(o.evaluated))}return e.validate=o,e}catch(t){throw delete e.validate,delete e.validateName,r&&this.logger.error("Error compiling schema, function code:",r),t}finally{this._compilations.delete(e)}}function d(e){return(0,i.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:c.call(this,e)}function p(e){for(let t of this._compilations){if(t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId)return t}}function h(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||f.call(this,e,t)}function f(e,t){let r=this.opts.uriResolver.parse(t),s=(0,i._getFullPath)(this.opts.uriResolver,r),o=(0,i.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&s===o)return _.call(this,r,e);let n=(0,i.normalizeId)(s),a=this.refs[n]||this.schemas[n];if("string"==typeof a){let t=f.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return _.call(this,r,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||c.call(this,a),n===(0,i.normalizeId)(t)){let{schema:t}=a,{schemaId:r}=this.opts,s=t[r];return s&&(o=(0,i.resolveUrl)(this.opts.uriResolver,o,s)),new u({schema:t,schemaId:r,root:e,baseId:o})}return _.call(this,r,a)}}t.SchemaEnv=u,t.compileSchema=c,t.resolveRef=function(e,t,r){var s;r=(0,i.resolveUrl)(this.opts.uriResolver,t,r);let o=e.refs[r];if(o)return o;let n=h.call(this,e,r);if(void 0===n){let o=null===(s=e.localRefs)||void 0===s?void 0:s[r],{schemaId:i}=this.opts;o&&(n=new u({schema:o,schemaId:i,root:e,baseId:t}))}if(void 0!==n)return e.refs[r]=d.call(this,n)},t.getCompilingSchema=p,t.resolveSchema=f;let m=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function _(e,{baseId:t,schema:r,root:s}){var o;let n;if((null===(o=e.fragment)||void 0===o?void 0:o[0])!=="/")return;for(let s of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;let e=r[(0,a.unescapeFragment)(s)];if(void 0===e)return;let o="object"==typeof(r=e)&&r[this.opts.schemaId];!m.has(s)&&o&&(t=(0,i.resolveUrl)(this.opts.uriResolver,t,o))}if("boolean"!=typeof r&&r.$ref&&!(0,a.schemaHasRulesButRef)(r,this.RULES)){let e=(0,i.resolveUrl)(this.opts.uriResolver,t,r.$ref);n=f.call(this,s,e)}let{schemaId:l}=this.opts;if((n=n||new u({schema:r,schemaId:l,root:s,baseId:t})).schema!==n.root.schema)return n}},15830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o={data:new s.Name("data"),valCxt:new s.Name("valCxt"),instancePath:new s.Name("instancePath"),parentData:new s.Name("parentData"),parentDataProperty:new s.Name("parentDataProperty"),rootData:new s.Name("rootData"),dynamicAnchors:new s.Name("dynamicAnchors"),vErrors:new s.Name("vErrors"),errors:new s.Name("errors"),this:new s.Name("this"),self:new s.Name("self"),scope:new s.Name("scope"),json:new s.Name("json"),jsonPos:new s.Name("jsonPos"),jsonLen:new s.Name("jsonLen"),jsonPart:new s.Name("jsonPart")};t.default=o},28432:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(72367);class o extends Error{constructor(e,t,r,o){super(o||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,s.resolveUrl)(e,t,r),this.missingSchema=(0,s.normalizeId)((0,s.getFullPath)(e,this.missingRef))}}t.default=o},72367:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;let s=r(73207),o=r(9083),n=r(72697),i=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!function e(t){for(let r in t){if(a.has(r))return!0;let s=t[r];if(Array.isArray(s)&&s.some(e)||"object"==typeof s&&e(s))return!0}return!1}(e):!!t&&function e(t){let r=0;for(let o in t)if("$ref"===o||(r++,!i.has(o)&&("object"==typeof t[o]&&(0,s.eachItem)(t[o],t=>r+=e(t)),r===1/0)))return 1/0;return r}(e)<=t)};let a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e,t="",r){!1!==r&&(t=d(t));let s=e.parse(t);return u(e,s)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=l,t._getFullPath=u;let c=/#\/?$/;function d(e){return e?e.replace(c,""):""}t.normalizeId=d,t.resolveUrl=function(e,t,r){return r=d(r),e.resolve(t,r)};let p=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};let{schemaId:r,uriResolver:s}=this.opts,i=d(e[r]||t),a={"":i},u=l(s,i,!1),c={},h=new Set;return n(e,{allKeys:!0},(e,t,s,o)=>{if(void 0===o)return;let n=u+t,i=a[o];function l(t){let r=this.opts.uriResolver.resolve;if(t=d(i?r(i,t):t),h.has(t))throw m(t);h.add(t);let s=this.refs[t];return"string"==typeof s&&(s=this.refs[s]),"object"==typeof s?f(e,s.schema,t):t!==d(n)&&("#"===t[0]?(f(e,c[t],t),c[t]=e):this.refs[t]=n),t}function _(e){if("string"==typeof e){if(!p.test(e))throw Error(`invalid anchor "${e}"`);l.call(this,`#${e}`)}}"string"==typeof e[r]&&(i=l.call(this,e[r])),_.call(this,e.$anchor),_.call(this,e.$dynamicAnchor),a[t]=i}),c;function f(e,t,r){if(void 0!==t&&!o(e,t))throw m(r)}function m(e){return Error(`reference "${e}" resolves to more than one schema`)}}},11801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;let r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},73207:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;let o=r(9173),n=r(16856);function i(e,t=e.schema){let{opts:r,self:s}=e;if(!r.strictSchema||"boolean"==typeof t)return;let o=s.RULES.keywords;for(let r in t)o[r]||f(e,`unknown keyword: "${r}"`)}function a(e,t){if("boolean"==typeof e)return!e;for(let r in e)if(t[r])return!0;return!1}function l(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function u(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:s}){return(n,i,a,l)=>{let u=void 0===a?i:a instanceof o.Name?(i instanceof o.Name?e(n,i,a):t(n,i,a),a):i instanceof o.Name?(t(n,a,i),i):r(i,a);return l!==o.Name||u instanceof o.Name?u:s(n,u)}}function d(e,t){if(!0===t)return e.var("props",!0);let r=e.var("props",(0,o._)`{}`);return void 0!==t&&p(e,r,t),r}function p(e,t,r){Object.keys(r).forEach(r=>e.assign((0,o._)`${t}${(0,o.getProperty)(r)}`,!0))}t.toHash=function(e){let t={};for(let r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(i(e,t),!a(t,e.self.RULES.all))},t.checkUnknownRules=i,t.schemaHasRules=a,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(let r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,s,n){if(!n){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return(0,o._)`${r}`}return(0,o._)`${e}${t}${(0,o.getProperty)(s)}`},t.unescapeFragment=function(e){return u(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(l(e))},t.escapeJsonPointer=l,t.unescapeJsonPointer=u,t.eachItem=function(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if((0,o._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,o._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,o._)`${r} || {}`).code((0,o._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,o._)`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,(0,o._)`${r} || {}`),p(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:c({mergeNames:(e,t,r)=>e.if((0,o._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,o._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,o._)`${r} !== true`,()=>e.assign(r,!0===t||(0,o._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=p;let h={};function f(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new n._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(s||(t.Type=s={})),t.getErrorPath=function(e,t,r){if(e instanceof o.Name){let n=t===s.Num;return r?n?(0,o._)`"[" + ${e} + "]"`:(0,o._)`"['" + ${e} + "']"`:n?(0,o._)`"/" + ${e}`:(0,o._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,o.getProperty)(e).toString():"/"+l(e)},t.checkStrictMode=f},70833:(e,t)=>{"use strict";function r(e,t){return t.rules.some(t=>s(e,t))}function s(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},s){let o=t.RULES.types[s];return o&&!0!==o&&r(e,o)},t.shouldUseGroup=r,t.shouldUseRule=s},9896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;let s=r(31948),o=r(9173),n=r(15830),i={message:"boolean schema is false"};function a(e,t){let{gen:r,data:o}=e;(0,s.reportError)({gen:r,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e},i,void 0,t)}t.topBoolOrEmptySchema=function(e){let{gen:t,schema:r,validateName:s}=e;!1===r?a(e,!1):"object"==typeof r&&!0===r.$async?t.return(n.default.data):(t.assign((0,o._)`${s}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){let{gen:r,schema:s}=e;!1===s?(r.var(t,!1),a(e)):r.var(t,!0)}},73943:(e,t,r)=>{"use strict";var s;Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;let o=r(11801),n=r(70833),i=r(31948),a=r(9173),l=r(73207);function u(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(o.isJSONType))return t;throw Error("type must be JSONType or JSONType[]: "+t.join(","))}(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(s||(t.DataType=s={})),t.getSchemaTypes=function(e){let t=u(e.type);if(t.includes("null")){if(!1===e.nullable)throw Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=u,t.coerceAndCheckDataType=function(e,t){var r;let{gen:o,data:i,opts:l}=e,u=(r=l.coerceTypes)?t.filter(e=>c.has(e)||"array"===r&&"array"===e):[],d=t.length>0&&!(0===u.length&&1===t.length&&(0,n.schemaHasRulesForType)(e,t[0]));if(d){let r=p(t,i,l.strictNumbers,s.Wrong);o.if(r,()=>{u.length?function(e,t,r){let{gen:s,data:o,opts:n}=e,i=s.let("dataType",(0,a._)`typeof ${o}`),l=s.let("coerced",(0,a._)`undefined`);for(let e of("array"===n.coerceTypes&&s.if((0,a._)`${i} == 'object' && Array.isArray(${o}) && ${o}.length == 1`,()=>s.assign(o,(0,a._)`${o}[0]`).assign(i,(0,a._)`typeof ${o}`).if(p(t,o,n.strictNumbers),()=>s.assign(l,o))),s.if((0,a._)`${l} !== undefined`),r))(c.has(e)||"array"===e&&"array"===n.coerceTypes)&&function(e){switch(e){case"string":s.elseIf((0,a._)`${i} == "number" || ${i} == "boolean"`).assign(l,(0,a._)`"" + ${o}`).elseIf((0,a._)`${o} === null`).assign(l,(0,a._)`""`);return;case"number":s.elseIf((0,a._)`${i} == "boolean" || ${o} === null
              || (${i} == "string" && ${o} && ${o} == +${o})`).assign(l,(0,a._)`+${o}`);return;case"integer":s.elseIf((0,a._)`${i} === "boolean" || ${o} === null
              || (${i} === "string" && ${o} && ${o} == +${o} && !(${o} % 1))`).assign(l,(0,a._)`+${o}`);return;case"boolean":s.elseIf((0,a._)`${o} === "false" || ${o} === 0 || ${o} === null`).assign(l,!1).elseIf((0,a._)`${o} === "true" || ${o} === 1`).assign(l,!0);return;case"null":s.elseIf((0,a._)`${o} === "" || ${o} === 0 || ${o} === false`),s.assign(l,null);return;case"array":s.elseIf((0,a._)`${i} === "string" || ${i} === "number"
              || ${i} === "boolean" || ${o} === null`).assign(l,(0,a._)`[${o}]`)}}(e);s.else(),f(e),s.endIf(),s.if((0,a._)`${l} !== undefined`,()=>{s.assign(o,l),function({gen:e,parentData:t,parentDataProperty:r},s){e.if((0,a._)`${t} !== undefined`,()=>e.assign((0,a._)`${t}[${r}]`,s))}(e,l)})}(e,t,u):f(e)})}return d};let c=new Set(["string","number","integer","boolean","null"]);function d(e,t,r,o=s.Correct){let n;let i=o===s.Correct?a.operators.EQ:a.operators.NEQ;switch(e){case"null":return(0,a._)`${t} ${i} null`;case"array":n=(0,a._)`Array.isArray(${t})`;break;case"object":n=(0,a._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":n=l((0,a._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":n=l();break;default:return(0,a._)`typeof ${t} ${i} ${e}`}return o===s.Correct?n:(0,a.not)(n);function l(e=a.nil){return(0,a.and)((0,a._)`typeof ${t} == "number"`,e,r?(0,a._)`isFinite(${t})`:a.nil)}}function p(e,t,r,s){let o;if(1===e.length)return d(e[0],t,r,s);let n=(0,l.toHash)(e);if(n.array&&n.object){let e=(0,a._)`typeof ${t} != "object"`;o=n.null?e:(0,a._)`!${t} || ${e}`,delete n.null,delete n.array,delete n.object}else o=a.nil;for(let e in n.number&&delete n.integer,n)o=(0,a.and)(o,d(e,t,r,s));return o}t.checkDataType=d,t.checkDataTypes=p;let h={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?(0,a._)`{type: ${e}}`:(0,a._)`{type: ${t}}`};function f(e){let t=function(e){let{gen:t,data:r,schema:s}=e,o=(0,l.schemaRefOrVal)(e,s,"type");return{gen:t,keyword:"type",data:r,schema:s.type,schemaCode:o,schemaValue:o,parentSchema:s,params:{},it:e}}(e);(0,i.reportError)(t,h)}t.reportTypeError=f},29146:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;let s=r(9173),o=r(73207);function n(e,t,r){let{gen:n,compositeRule:i,data:a,opts:l}=e;if(void 0===r)return;let u=(0,s._)`${a}${(0,s.getProperty)(t)}`;if(i){(0,o.checkStrictMode)(e,`default is ignored for: ${u}`);return}let c=(0,s._)`${u} === undefined`;"empty"===l.useDefaults&&(c=(0,s._)`${c} || ${u} === null || ${u} === ""`),n.if(c,(0,s._)`${u} = ${(0,s.stringify)(r)}`)}t.assignDefaults=function(e,t){let{properties:r,items:s}=e.schema;if("object"===t&&r)for(let t in r)n(e,t,r[t].default);else"array"===t&&Array.isArray(s)&&s.forEach((t,r)=>n(e,r,t.default))}},29177:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;let s=r(9896),o=r(73943),n=r(70833),i=r(73943),a=r(29146),l=r(41466),u=r(33639),c=r(9173),d=r(15830),p=r(72367),h=r(73207),f=r(31948);function m({gen:e,validateName:t,schema:r,schemaEnv:s,opts:o},n){o.code.es5?e.func(t,(0,c._)`${d.default.data}, ${d.default.valCxt}`,s.$async,()=>{e.code((0,c._)`"use strict"; ${_(r,o)}`),function(e,t){e.if(d.default.valCxt,()=>{e.var(d.default.instancePath,(0,c._)`${d.default.valCxt}.${d.default.instancePath}`),e.var(d.default.parentData,(0,c._)`${d.default.valCxt}.${d.default.parentData}`),e.var(d.default.parentDataProperty,(0,c._)`${d.default.valCxt}.${d.default.parentDataProperty}`),e.var(d.default.rootData,(0,c._)`${d.default.valCxt}.${d.default.rootData}`),t.dynamicRef&&e.var(d.default.dynamicAnchors,(0,c._)`${d.default.valCxt}.${d.default.dynamicAnchors}`)},()=>{e.var(d.default.instancePath,(0,c._)`""`),e.var(d.default.parentData,(0,c._)`undefined`),e.var(d.default.parentDataProperty,(0,c._)`undefined`),e.var(d.default.rootData,d.default.data),t.dynamicRef&&e.var(d.default.dynamicAnchors,(0,c._)`{}`)})}(e,o),e.code(n)}):e.func(t,(0,c._)`${d.default.data}, ${(0,c._)`{${d.default.instancePath}="", ${d.default.parentData}, ${d.default.parentDataProperty}, ${d.default.rootData}=${d.default.data}${o.dynamicRef?(0,c._)`, ${d.default.dynamicAnchors}={}`:c.nil}}={}`}`,s.$async,()=>e.code(_(r,o)).code(n))}function _(e,t){let r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,c._)`/*# sourceURL=${r} */`:c.nil}function y({schema:e,self:t}){if("boolean"==typeof e)return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function g(e){(0,h.checkUnknownRules)(e),function(e){let{schema:t,errSchemaPath:r,opts:s,self:o}=e;t.$ref&&s.ignoreKeywordsWithRef&&(0,h.schemaHasRulesButRef)(t,o.RULES)&&o.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function w(e,t){if(e.opts.jtd)return b(e,[],!1,t);let r=(0,o.getSchemaTypes)(e.schema),s=(0,o.coerceAndCheckDataType)(e,r);b(e,r,!s,t)}function $({gen:e,schemaEnv:t,schema:r,errSchemaPath:s,opts:o}){let n=r.$comment;if(!0===o.$comment)e.code((0,c._)`${d.default.self}.logger.log(${n})`);else if("function"==typeof o.$comment){let r=(0,c.str)`${s}/$comment`,o=e.scopeValue("root",{ref:t.root});e.code((0,c._)`${d.default.self}.opts.$comment(${n}, ${r}, ${o}.schema)`)}}function b(e,t,r,s){let{gen:o,schema:a,data:l,allErrors:u,opts:p,self:f}=e,{RULES:m}=f;if(a.$ref&&(p.ignoreKeywordsWithRef||!(0,h.schemaHasRulesButRef)(a,m))){o.block(()=>P(e,"$ref",m.all.$ref.definition));return}function _(h){(0,n.shouldUseGroup)(a,h)&&(h.type?(o.if((0,i.checkDataType)(h.type,l,p.strictNumbers)),k(e,h),1===t.length&&t[0]===h.type&&r&&(o.else(),(0,i.reportTypeError)(e)),o.endIf()):k(e,h),u||o.if((0,c._)`${d.default.errors} === ${s||0}`))}p.jtd||!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(t=>{E(e.dataTypes,t)||S(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){let r=[];for(let s of e.dataTypes)E(t,s)?r.push(s):t.includes("integer")&&"number"===s&&r.push("integer");e.dataTypes=r}(e,t)}}(e,t),e.opts.allowUnionTypes||t.length>1&&!(2===t.length&&t.includes("null"))&&S(e,"use allowUnionTypes to allow union type keyword"),function(e,t){let r=e.self.RULES.all;for(let s in r){let o=r[s];if("object"==typeof o&&(0,n.shouldUseRule)(e.schema,o)){let{type:r}=o.definition;r.length&&!r.some(e=>t.includes(e)||"number"===e&&t.includes("integer"))&&S(e,`missing type "${r.join(",")}" for keyword "${s}"`)}}}(e,e.dataTypes)),o.block(()=>{for(let e of m.rules)_(e);_(m.post)})}function k(e,t){let{gen:r,schema:s,opts:{useDefaults:o}}=e;o&&(0,a.assignDefaults)(e,t.type),r.block(()=>{for(let r of t.rules)(0,n.shouldUseRule)(s,r)&&P(e,r.keyword,r.definition,t.type)})}function E(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function S(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,h.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){if(v(e)&&(g(e),y(e))){(function(e){let{schema:t,opts:r,gen:s}=e;m(e,()=>{r.$comment&&t.$comment&&$(e),function(e){let{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,h.checkStrictMode)(e,"default is ignored in the schema root")}(e),s.let(d.default.vErrors,null),s.let(d.default.errors,0),r.unevaluated&&function(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,c._)`${r}.evaluated`),t.if((0,c._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,c._)`${e.evaluated}.props`,(0,c._)`undefined`)),t.if((0,c._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,c._)`${e.evaluated}.items`,(0,c._)`undefined`))}(e),w(e),function(e){let{gen:t,schemaEnv:r,validateName:s,ValidationError:o,opts:n}=e;r.$async?t.if((0,c._)`${d.default.errors} === 0`,()=>t.return(d.default.data),()=>t.throw((0,c._)`new ${o}(${d.default.vErrors})`)):(t.assign((0,c._)`${s}.errors`,d.default.vErrors),n.unevaluated&&function({gen:e,evaluated:t,props:r,items:s}){r instanceof c.Name&&e.assign((0,c._)`${t}.props`,r),s instanceof c.Name&&e.assign((0,c._)`${t}.items`,s)}(e),t.return((0,c._)`${d.default.errors} === 0`))}(e)})})(e);return}m(e,()=>(0,s.topBoolOrEmptySchema)(e))};class T{constructor(e,t,r){if((0,l.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,h.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",z(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",d.default.errors))}result(e,t,r){this.failResult((0,c.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,c.not)(e),void 0,t)}fail(e){if(void 0===e){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);let{schemaCode:t}=this;this.fail((0,c._)`${t} !== undefined && (${(0,c.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t){this.setParams(t),this._error(e,r),this.setParams({});return}this._error(e,r)}_error(e,t){(e?f.reportExtraError:f.reportError)(this,this.def.error,t)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(void 0===this.errsCount)throw Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=c.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=c.nil,t=c.nil){if(!this.$data)return;let{gen:r,schemaCode:s,schemaType:o,def:n}=this;r.if((0,c.or)((0,c._)`${s} === undefined`,t)),e!==c.nil&&r.assign(e,!0),(o.length||n.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==c.nil&&r.assign(e,!1)),r.else()}invalid$data(){let{gen:e,schemaCode:t,schemaType:r,def:s,it:o}=this;return(0,c.or)(function(){if(r.length){if(!(t instanceof c.Name))throw Error("ajv implementation error");let e=Array.isArray(r)?r:[r];return(0,c._)`${(0,i.checkDataTypes)(e,t,o.opts.strictNumbers,i.DataType.Wrong)}`}return c.nil}(),function(){if(s.validateSchema){let r=e.scopeValue("validate$data",{ref:s.validateSchema});return(0,c._)`!${r}(${t})`}return c.nil}())}subschema(e,t){let r=(0,u.getSubschema)(this.it,e);(0,u.extendSubschemaData)(r,this.it,e),(0,u.extendSubschemaMode)(r,e);let o={...this.it,...r,items:void 0,props:void 0};return function(e,t){if(v(e)&&(g(e),y(e))){(function(e,t){let{schema:r,gen:s,opts:o}=e;o.$comment&&r.$comment&&$(e),function(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,p.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw Error("async schema in sync schema")}(e);let n=s.const("_errs",d.default.errors);w(e,n),s.var(t,(0,c._)`${n} === ${d.default.errors}`)})(e,t);return}(0,s.boolOrEmptySchema)(e,t)}(o,t),o}mergeEvaluated(e,t){let{it:r,gen:s}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=h.mergeEvaluated.props(s,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=h.mergeEvaluated.items(s,e.items,r.items,t)))}mergeValidEvaluated(e,t){let{it:r,gen:s}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return s.if(t,()=>this.mergeEvaluated(e,c.Name)),!0}}function P(e,t,r,s){let o=new T(e,r,t);"code"in r?r.code(o,s):o.$data&&r.validate?(0,l.funcKeywordCode)(o,r):"macro"in r?(0,l.macroKeywordCode)(o,r):(r.compile||r.validate)&&(0,l.funcKeywordCode)(o,r)}t.KeywordCxt=T;let x=/^\/(?:[^~]|~0|~1)*$/,I=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function z(e,{dataLevel:t,dataNames:r,dataPathArr:s}){let o,n;if(""===e)return d.default.rootData;if("/"===e[0]){if(!x.test(e))throw Error(`Invalid JSON-pointer: ${e}`);o=e,n=d.default.rootData}else{let i=I.exec(e);if(!i)throw Error(`Invalid JSON-pointer: ${e}`);let l=+i[1];if("#"===(o=i[2])){if(l>=t)throw Error(a("property/index",l));return s[t-l]}if(l>t)throw Error(a("data",l));if(n=r[t-l],!o)return n}let i=n;for(let e of o.split("/"))e&&(n=(0,c._)`${n}${(0,c.getProperty)((0,h.unescapeJsonPointer)(e))}`,i=(0,c._)`${i} && ${n}`);return i;function a(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=z},41466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;let s=r(9173),o=r(15830),n=r(84054),i=r(31948);function a(e){let{gen:t,data:r,it:o}=e;t.if(o.parentData,()=>t.assign(r,(0,s._)`${o.parentData}[${o.parentDataProperty}]`))}function l(e,t,r){if(void 0===r)throw Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,s.stringify)(r)})}t.macroKeywordCode=function(e,t){let{gen:r,keyword:o,schema:n,parentSchema:i,it:a}=e,u=t.macro.call(a.self,n,i,a),c=l(r,o,u);!1!==a.opts.validateSchema&&a.self.validateSchema(u,!0);let d=r.name("valid");e.subschema({schema:u,schemaPath:s.nil,errSchemaPath:`${a.errSchemaPath}/${o}`,topSchemaRef:c,compositeRule:!0},d),e.pass(d,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var r;let{gen:u,keyword:c,schema:d,parentSchema:p,$data:h,it:f}=e;(function({schemaEnv:e},t){if(t.async&&!e.$async)throw Error("async keyword in sync schema")})(f,t);let m=l(u,c,!h&&t.compile?t.compile.call(f.self,d,p,f):t.validate),_=u.let("valid");function y(r=t.async?(0,s._)`await `:s.nil){let i=f.opts.passContext?o.default.this:o.default.self,a=!("compile"in t&&!h||!1===t.schema);u.assign(_,(0,s._)`${r}${(0,n.callValidateCode)(e,m,i,a)}`,t.modifying)}function v(e){var r;u.if((0,s.not)(null!==(r=t.valid)&&void 0!==r?r:_),e)}e.block$data(_,function(){if(!1===t.errors)y(),t.modifying&&a(e),v(()=>e.error());else{let r=t.async?function(){let e=u.let("ruleErrs",null);return u.try(()=>y((0,s._)`await `),t=>u.assign(_,!1).if((0,s._)`${t} instanceof ${f.ValidationError}`,()=>u.assign(e,(0,s._)`${t}.errors`),()=>u.throw(t))),e}():function(){let e=(0,s._)`${m}.errors`;return u.assign(e,null),y(s.nil),e}();t.modifying&&a(e),v(()=>(function(e,t){let{gen:r}=e;r.if((0,s._)`Array.isArray(${t})`,()=>{r.assign(o.default.vErrors,(0,s._)`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`).assign(o.default.errors,(0,s._)`${o.default.vErrors}.length`),(0,i.extendErrors)(e)},()=>e.error())})(e,r))}}),e.ok(null!==(r=t.valid)&&void 0!==r?r:_)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:s},o,n){if(Array.isArray(o.keyword)?!o.keyword.includes(n):o.keyword!==n)throw Error("ajv implementation error");let i=o.dependencies;if(null==i?void 0:i.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw Error(`parent schema must have dependencies of ${n}: ${i.join(",")}`);if(o.validateSchema&&!o.validateSchema(e[n])){let e=`keyword "${n}" value is invalid at path "${s}": `+r.errorsText(o.validateSchema.errors);if("log"===t.validateSchema)r.logger.error(e);else throw Error(e)}}},33639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;let s=r(9173),o=r(73207);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==n)throw Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){let n=e.schema[t];return void 0===r?{schema:n,schemaPath:(0,s._)`${e.schemaPath}${(0,s.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:n[r],schemaPath:(0,s._)`${e.schemaPath}${(0,s.getProperty)(t)}${(0,s.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,o.escapeFragment)(r)}`}}if(void 0!==n){if(void 0===i||void 0===a||void 0===l)throw Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:l,errSchemaPath:a}}throw Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:n,data:i,dataTypes:a,propertyName:l}){if(void 0!==i&&void 0!==r)throw Error('both "data" and "dataProp" passed, only one allowed');let{gen:u}=t;if(void 0!==r){let{errorPath:i,dataPathArr:a,opts:l}=t;c(u.let("data",(0,s._)`${t.data}${(0,s.getProperty)(r)}`,!0)),e.errorPath=(0,s.str)`${i}${(0,o.getErrorPath)(r,n,l.jsPropertySyntax)}`,e.parentDataProperty=(0,s._)`${r}`,e.dataPathArr=[...a,e.parentDataProperty]}function c(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==i&&(c(i instanceof s.Name?i:u.let("data",i,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:s,createErrors:o,allErrors:n}){void 0!==s&&(e.compositeRule=s),void 0!==o&&(e.createErrors=o),void 0!==n&&(e.allErrors=n),e.jtdDiscriminator=t,e.jtdMetadata=r}},77560:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var s=r(29177);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return s.KeywordCxt}});var o=r(9173);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return o.CodeGen}});let n=r(14553),i=r(28432),a=r(11801),l=r(64291),u=r(9173),c=r(72367),d=r(73943),p=r(73207),h=r(11170),f=r(47774),m=(e,t)=>new RegExp(e,t);m.code="new RegExp";let _=["removeAdditional","useDefaults","coerceTypes"],y=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},g={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};class w{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...function(e){var t,r,s,o,n,i,a,l,u,c,d,p,h,_,y,v,g,w,$,b,k,E,S,T,P;let x=e.strict,I=null===(t=e.code)||void 0===t?void 0:t.optimize,z=!0===I||void 0===I?1:I||0,C=null!==(s=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==s?s:m,N=null!==(o=e.uriResolver)&&void 0!==o?o:f.default;return{strictSchema:null===(i=null!==(n=e.strictSchema)&&void 0!==n?n:x)||void 0===i||i,strictNumbers:null===(l=null!==(a=e.strictNumbers)&&void 0!==a?a:x)||void 0===l||l,strictTypes:null!==(c=null!==(u=e.strictTypes)&&void 0!==u?u:x)&&void 0!==c?c:"log",strictTuples:null!==(p=null!==(d=e.strictTuples)&&void 0!==d?d:x)&&void 0!==p?p:"log",strictRequired:null!==(_=null!==(h=e.strictRequired)&&void 0!==h?h:x)&&void 0!==_&&_,code:e.code?{...e.code,optimize:z,regExp:C}:{optimize:z,regExp:C},loopRequired:null!==(y=e.loopRequired)&&void 0!==y?y:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(g=e.meta)||void 0===g||g,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===($=e.inlineRefs)||void 0===$||$,schemaId:null!==(b=e.schemaId)&&void 0!==b?b:"$id",addUsedSchema:null===(k=e.addUsedSchema)||void 0===k||k,validateSchema:null===(E=e.validateSchema)||void 0===E||E,validateFormats:null===(S=e.validateFormats)||void 0===S||S,unicodeRegExp:null===(T=e.unicodeRegExp)||void 0===T||T,int32range:null===(P=e.int32range)||void 0===P||P,uriResolver:N}}(e)};let{es5:t,lines:r}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:y,es5:t,lines:r}),this.logger=function(e){if(!1===e)return P;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw Error("logger must implement log, warn and error methods")}(e.logger);let s=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),$.call(this,v,e,"NOT SUPPORTED"),$.call(this,g,e,"DEPRECATED","warn"),this._metaOpts=T.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&S.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),k.call(this),e.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:e,meta:t,schemaId:r}=this.opts,s=h;"id"===r&&((s={...h}).id=s.$id,delete s.$id),t&&e&&this.addMetaSchema(s,s[r],!1)}defaultMeta(){let{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(!(r=this.getSchema(e)))throw Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);let s=r(t);return"$async"in r||(this.errors=r.errors),s}compile(e,t){let r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw Error("options.loadSchema should be a function");let{loadSchema:r}=this.opts;return s.call(this,e,t);async function s(e,t){await o.call(this,e.$schema);let r=this._addSchema(e,t);return r.validate||n.call(this,r)}async function o(e){e&&!this.getSchema(e)&&await s.call(this,{$ref:e},!0)}async function n(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof i.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),n.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){let r=await u.call(this,e);this.refs[e]||await o.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function u(e){let t=this._loading[e];if(t)return t;try{return await (this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,s=this.opts.validateSchema){let o;if(Array.isArray(e)){for(let t of e)this.addSchema(t,void 0,r,s);return this}if("object"==typeof e){let{schemaId:t}=this.opts;if(void 0!==(o=e[t])&&"string"!=typeof o)throw Error(`schema ${t} must be string`)}return t=(0,c.normalizeId)(t||o),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,s,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){let r;if("boolean"==typeof e)return!0;if(void 0!==(r=e.$schema)&&"string"!=typeof r)throw Error("$schema must be a string");if(!(r=r||this.opts.defaultMeta||this.defaultMeta()))return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(r,e);if(!s&&t){let e="schema is invalid: "+this.errorsText();if("log"===this.opts.validateSchema)this.logger.error(e);else throw Error(e)}return s}getSchema(e){let t;for(;"string"==typeof(t=b.call(this,e));)e=t;if(void 0===t){let{schemaId:r}=this.opts,s=new l.SchemaEnv({schema:{},schemaId:r});if(!(t=l.resolveSchema.call(this,s,e)))return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let t=b.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{this._cache.delete(e);let t=e[this.opts.schemaId];return t&&(t=(0,c.normalizeId)(t),delete this.schemas[t],delete this.refs[t]),this}default:throw Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(let t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else if("object"==typeof e&&void 0===t){if(Array.isArray(r=(t=e).keyword)&&!r.length)throw Error("addKeywords: keyword must be string or non-empty array")}else throw Error("invalid addKeywords parameters");if(I.call(this,r,t),!t)return(0,p.eachItem)(r,e=>z.call(this,e)),this;N.call(this,t);let s={...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)};return(0,p.eachItem)(r,0===s.type.length?e=>z.call(this,e,s):e=>s.type.forEach(t=>z.call(this,e,s,t))),this}getKeyword(e){let t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){let{RULES:t}=this;for(let r of(delete t.keywords[e],delete t.all[e],t.rules)){let t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){let r=this.RULES.all;for(let s of(e=JSON.parse(JSON.stringify(e)),t)){let t=s.split("/").slice(1),o=e;for(let e of t)o=o[e];for(let e in r){let t=r[e];if("object"!=typeof t)continue;let{$data:s}=t.definition,n=o[e];s&&n&&(o[e]=O(n))}}return e}_removeAllSchemas(e,t){for(let r in e){let s=e[r];(!t||t.test(r))&&("string"==typeof s?delete e[r]:s&&!s.meta&&(this._cache.delete(s.schema),delete e[r]))}}_addSchema(e,t,r,s=this.opts.validateSchema,o=this.opts.addUsedSchema){let n;let{schemaId:i}=this.opts;if("object"==typeof e)n=e[i];else{if(this.opts.jtd)throw Error("schema must be object");if("boolean"!=typeof e)throw Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;r=(0,c.normalizeId)(n||r);let u=c.getSchemaRefs.call(this,e,r);return a=new l.SchemaEnv({schema:e,schemaId:i,meta:t,baseId:r,localRefs:u}),this._cache.set(a.schema,a),o&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=a),s&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw Error("ajv implementation error");return e.validate}_compileMetaSchema(e){let t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function $(e,t,r,s="error"){for(let o in e)o in t&&this.logger[s](`${r}: option ${o}. ${e[o]}`)}function b(e){return e=(0,c.normalizeId)(e),this.schemas[e]||this.refs[e]}function k(){let e=this.opts.schemas;if(e){if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}}function E(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function S(e){if(Array.isArray(e)){this.addVocabulary(e);return}for(let t in this.logger.warn("keywords option as map is deprecated, pass array"),e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function T(){let e={...this.opts};for(let t of _)delete e[t];return e}w.ValidationError=n.default,w.MissingRefError=i.default,t.default=w;let P={log(){},warn(){},error(){}},x=/^[a-z_$][a-z0-9_$:-]*$/i;function I(e,t){let{RULES:r}=this;if((0,p.eachItem)(e,e=>{if(r.keywords[e])throw Error(`Keyword ${e} is already defined`);if(!x.test(e))throw Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t||"validate"in t))throw Error('$data keyword must have "code" or "validate" function')}function z(e,t,r){var s;let o=null==t?void 0:t.post;if(r&&o)throw Error('keyword with "post" flag cannot have "type"');let{RULES:n}=this,i=o?n.post:n.rules.find(({type:e})=>e===r);if(i||(i={type:r,rules:[]},n.rules.push(i)),n.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,d.getJSONTypes)(t.type),schemaType:(0,d.getJSONTypes)(t.schemaType)}};t.before?C.call(this,i,a,t.before):i.rules.push(a),n.all[e]=a,null===(s=t.implements)||void 0===s||s.forEach(e=>this.addKeyword(e))}function C(e,t,r){let s=e.rules.findIndex(e=>e.keyword===r);s>=0?e.rules.splice(s,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function N(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=O(t)),e.validateSchema=this.compile(t,!0))}let j={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function O(e){return{anyOf:[e,j]}}},95300:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9083);s.code='require("ajv/dist/runtime/equal").default',t.default=s},17545:(e,t)=>{"use strict";function r(e){let t;let r=e.length,s=0,o=0;for(;o<r;)s++,(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<r&&(64512&(t=e.charCodeAt(o)))==56320&&o++;return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},47774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(30010);s.code='require("ajv/dist/runtime/uri").default',t.default=s},14553:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},15595:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;let s=r(9173),o=r(73207);function n(e,t){let{gen:r,schema:n,data:i,keyword:a,it:l}=e;l.items=!0;let u=r.const("len",(0,s._)`${i}.length`);if(!1===n)e.setParams({len:t.length}),e.pass((0,s._)`${u} <= ${t.length}`);else if("object"==typeof n&&!(0,o.alwaysValidSchema)(l,n)){let n=r.var("valid",(0,s._)`${u} <= ${t.length}`);r.if((0,s.not)(n),()=>{r.forRange("i",t.length,u,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:o.Type.Num},n),l.allErrors||r.if((0,s.not)(n),()=>r.break())})}),e.ok(n)}}t.validateAdditionalItems=n,t.default={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,s.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,s._)`{limit: ${e}}`},code(e){let{parentSchema:t,it:r}=e,{items:s}=t;if(!Array.isArray(s)){(0,o.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}n(e,s)}}},65462:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(84054),o=r(9173),n=r(15830),i=r(73207);t.default={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>(0,o._)`{additionalProperty: ${e.additionalProperty}}`},code(e){let{gen:t,schema:r,parentSchema:a,data:l,errsCount:u,it:c}=e;if(!u)throw Error("ajv implementation error");let{allErrors:d,opts:p}=c;if(c.props=!0,"all"!==p.removeAdditional&&(0,i.alwaysValidSchema)(c,r))return;let h=(0,s.allSchemaProperties)(a.properties),f=(0,s.allSchemaProperties)(a.patternProperties);function m(e){t.code((0,o._)`delete ${l}[${e}]`)}function _(s){if("all"===p.removeAdditional||p.removeAdditional&&!1===r){m(s);return}if(!1===r){e.setParams({additionalProperty:s}),e.error(),d||t.break();return}if("object"==typeof r&&!(0,i.alwaysValidSchema)(c,r)){let r=t.name("valid");"failing"===p.removeAdditional?(y(s,r,!1),t.if((0,o.not)(r),()=>{e.reset(),m(s)})):(y(s,r),d||t.if((0,o.not)(r),()=>t.break()))}}function y(t,r,s){let o={keyword:"additionalProperties",dataProp:t,dataPropType:i.Type.Str};!1===s&&Object.assign(o,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(o,r)}t.forIn("key",l,r=>{h.length||f.length?t.if(function(r){let n;if(h.length>8){let e=(0,i.schemaRefOrVal)(c,a.properties,"properties");n=(0,s.isOwnProperty)(t,e,r)}else n=h.length?(0,o.or)(...h.map(e=>(0,o._)`${r} === ${e}`)):o.nil;return f.length&&(n=(0,o.or)(n,...f.map(t=>(0,o._)`${(0,s.usePattern)(e,t)}.test(${r})`))),(0,o.not)(n)}(r),()=>_(r)):_(r)}),e.ok((0,o._)`${u} === ${n.default.errors}`)}}},89262:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(73207);t.default={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:o}=e;if(!Array.isArray(r))throw Error("ajv implementation error");let n=t.name("valid");r.forEach((t,r)=>{if((0,s.alwaysValidSchema)(o,t))return;let i=e.subschema({keyword:"allOf",schemaProp:r},n);e.ok(n),e.mergeEvaluated(i)})}}},52474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(84054).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=s},17664:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207);t.default={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?(0,s.str)`must contain at least ${e} valid item(s)`:(0,s.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?(0,s._)`{minContains: ${e}}`:(0,s._)`{minContains: ${e}, maxContains: ${t}}`},code(e){let t,r;let{gen:n,schema:i,parentSchema:a,data:l,it:u}=e,{minContains:c,maxContains:d}=a;u.opts.next?(t=void 0===c?1:c,r=d):t=1;let p=n.const("len",(0,s._)`${l}.length`);if(e.setParams({min:t,max:r}),void 0===r&&0===t){(0,o.checkStrictMode)(u,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(void 0!==r&&t>r){(0,o.checkStrictMode)(u,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,o.alwaysValidSchema)(u,i)){let o=(0,s._)`${p} >= ${t}`;void 0!==r&&(o=(0,s._)`${o} && ${p} <= ${r}`),e.pass(o);return}u.items=!0;let h=n.name("valid");function f(){let e=n.name("_valid"),o=n.let("count",0);m(e,()=>n.if(e,()=>{n.code((0,s._)`${o}++`),void 0===r?n.if((0,s._)`${o} >= ${t}`,()=>n.assign(h,!0).break()):(n.if((0,s._)`${o} > ${r}`,()=>n.assign(h,!1).break()),1===t?n.assign(h,!0):n.if((0,s._)`${o} >= ${t}`,()=>n.assign(h,!0)))}))}function m(t,r){n.forRange("i",0,p,s=>{e.subschema({keyword:"contains",dataProp:s,dataPropType:o.Type.Num,compositeRule:!0},t),r()})}void 0===r&&1===t?m(h,()=>n.if(h,()=>n.break())):0===t?(n.let(h,!0),void 0!==r&&n.if((0,s._)`${l}.length > 0`,f)):(n.let(h,!1),f()),e.result(h,()=>e.reset())}}},44863:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;let s=r(9173),o=r(73207),n=r(84054);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>(0,s.str)`must have ${1===t?"property":"properties"} ${r} when property ${e} is present`,params:({params:{property:e,depsCount:t,deps:r,missingProperty:o}})=>(0,s._)`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${r}}`};let i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){let[t,r]=function({schema:e}){let t={},r={};for(let s in e)"__proto__"!==s&&((Array.isArray(e[s])?t:r)[s]=e[s]);return[t,r]}(e);a(e,t),l(e,r)}};function a(e,t=e.schema){let{gen:r,data:o,it:i}=e;if(0===Object.keys(t).length)return;let a=r.let("missing");for(let l in t){let u=t[l];if(0===u.length)continue;let c=(0,n.propertyInData)(r,o,l,i.opts.ownProperties);e.setParams({property:l,depsCount:u.length,deps:u.join(", ")}),i.allErrors?r.if(c,()=>{for(let t of u)(0,n.checkReportMissingProp)(e,t)}):(r.if((0,s._)`${c} && (${(0,n.checkMissingProp)(e,u,a)})`),(0,n.reportMissingProp)(e,a),r.else())}}function l(e,t=e.schema){let{gen:r,data:s,keyword:i,it:a}=e,l=r.name("valid");for(let u in t)(0,o.alwaysValidSchema)(a,t[u])||(r.if((0,n.propertyInData)(r,s,u,a.opts.ownProperties),()=>{let t=e.subschema({keyword:i,schemaProp:u},l);e.mergeValidEvaluated(t,l)},()=>r.var(l,!0)),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=i},65516:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207);function n(e,t){let r=e.schema[t];return void 0!==r&&!(0,o.alwaysValidSchema)(e,r)}t.default={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>(0,s.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,s._)`{failingKeyword: ${e.ifClause}}`},code(e){let{gen:t,parentSchema:r,it:i}=e;void 0===r.then&&void 0===r.else&&(0,o.checkStrictMode)(i,'"if" without "then" and "else" is ignored');let a=n(i,"then"),l=n(i,"else");if(!a&&!l)return;let u=t.let("valid",!0),c=t.name("_valid");if(function(){let t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},c);e.mergeEvaluated(t)}(),e.reset(),a&&l){let r=t.let("ifClause");e.setParams({ifClause:r}),t.if(c,d("then",r),d("else",r))}else a?t.if(c,d("then")):t.if((0,s.not)(c),d("else"));function d(r,o){return()=>{let n=e.subschema({keyword:r},c);t.assign(u,c),e.mergeValidEvaluated(n,u),o?t.assign(o,(0,s._)`${r}`):e.setParams({ifClause:r})}}e.pass(u,()=>e.error(!0))}}},71488:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(15595),o=r(3038),n=r(60767),i=r(19483),a=r(17664),l=r(44863),u=r(84515),c=r(65462),d=r(11927),p=r(99099),h=r(13106),f=r(52474),m=r(3495),_=r(89262),y=r(65516),v=r(75683);t.default=function(e=!1){let t=[h.default,f.default,m.default,_.default,y.default,v.default,u.default,c.default,l.default,d.default,p.default];return e?t.push(o.default,i.default):t.push(s.default,n.default),t.push(a.default),t}},60767:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;let s=r(9173),o=r(73207),n=r(84054);function i(e,t,r=e.schema){let{gen:n,parentSchema:i,data:a,keyword:l,it:u}=e;(function(e){let{opts:s,errSchemaPath:n}=u,i=r.length,a=i===e.minItems&&(i===e.maxItems||!1===e[t]);if(s.strictTuples&&!a){let e=`"${l}" is ${i}-tuple, but minItems or maxItems/${t} are not specified or different at path "${n}"`;(0,o.checkStrictMode)(u,e,s.strictTuples)}})(i),u.opts.unevaluated&&r.length&&!0!==u.items&&(u.items=o.mergeEvaluated.items(n,r.length,u.items));let c=n.name("valid"),d=n.const("len",(0,s._)`${a}.length`);r.forEach((t,r)=>{(0,o.alwaysValidSchema)(u,t)||(n.if((0,s._)`${d} > ${r}`,()=>e.subschema({keyword:l,schemaProp:r,dataProp:r},c)),e.ok(c))})}t.validateTuple=i,t.default={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return i(e,"additionalItems",t);r.items=!0,(0,o.alwaysValidSchema)(r,t)||e.ok((0,n.validateArray)(e))}}},19483:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207),n=r(84054),i=r(15595);t.default={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>(0,s.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,s._)`{limit: ${e}}`},code(e){let{schema:t,parentSchema:r,it:s}=e,{prefixItems:a}=r;s.items=!0,(0,o.alwaysValidSchema)(s,t)||(a?(0,i.validateAdditionalItems)(e,a):e.ok((0,n.validateArray)(e)))}}},13106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(73207);t.default={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:o}=e;if((0,s.alwaysValidSchema)(o,r)){e.fail();return}let n=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}}},3495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207);t.default={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>(0,s._)`{passingSchemas: ${e.passing}}`},code(e){let{gen:t,schema:r,parentSchema:n,it:i}=e;if(!Array.isArray(r))throw Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let a=t.let("valid",!1),l=t.let("passing",null),u=t.name("_valid");e.setParams({passing:l}),t.block(function(){r.forEach((r,n)=>{let c;(0,o.alwaysValidSchema)(i,r)?t.var(u,!0):c=e.subschema({keyword:"oneOf",schemaProp:n,compositeRule:!0},u),n>0&&t.if((0,s._)`${u} && ${a}`).assign(a,!1).assign(l,(0,s._)`[${l}, ${n}]`).else(),t.if(u,()=>{t.assign(a,!0),t.assign(l,n),c&&e.mergeEvaluated(c,s.Name)})})}),e.result(a,()=>e.reset(),()=>e.error(!0))}}},99099:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(84054),o=r(9173),n=r(73207),i=r(73207);t.default={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:a,parentSchema:l,it:u}=e,{opts:c}=u,d=(0,s.allSchemaProperties)(r),p=d.filter(e=>(0,n.alwaysValidSchema)(u,r[e]));if(0===d.length||p.length===d.length&&(!u.opts.unevaluated||!0===u.props))return;let h=c.strictSchema&&!c.allowMatchingProperties&&l.properties,f=t.name("valid");!0===u.props||u.props instanceof o.Name||(u.props=(0,i.evaluatedPropsToName)(t,u.props));let{props:m}=u;function _(r){t.forIn("key",a,n=>{t.if((0,o._)`${(0,s.usePattern)(e,r)}.test(${n})`,()=>{let s=p.includes(r);s||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:n,dataPropType:i.Type.Str},f),u.opts.unevaluated&&!0!==m?t.assign((0,o._)`${m}[${n}]`,!0):s||u.allErrors||t.if((0,o.not)(f),()=>t.break())})})}(function(){for(let e of d)h&&function(e){for(let t in h)new RegExp(e).test(t)&&(0,n.checkStrictMode)(u,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}(e),u.allErrors?_(e):(t.var(f,!0),_(e),t.if(f))})()}}},3038:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(60767);t.default={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,s.validateTuple)(e,"items")}},11927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(29177),o=r(84054),n=r(73207),i=r(65462);t.default={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:a,data:l,it:u}=e;"all"===u.opts.removeAdditional&&void 0===a.additionalProperties&&i.default.code(new s.KeywordCxt(u,i.default,"additionalProperties"));let c=(0,o.allSchemaProperties)(r);for(let e of c)u.definedProperties.add(e);u.opts.unevaluated&&c.length&&!0!==u.props&&(u.props=n.mergeEvaluated.props(t,(0,n.toHash)(c),u.props));let d=c.filter(e=>!(0,n.alwaysValidSchema)(u,r[e]));if(0===d.length)return;let p=t.name("valid");for(let s of d)u.opts.useDefaults&&!u.compositeRule&&void 0!==r[s].default?h(s):(t.if((0,o.propertyInData)(t,l,s,u.opts.ownProperties)),h(s),u.allErrors||t.else().var(p,!0),t.endIf()),e.it.definedProperties.add(s),e.ok(p);function h(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},p)}}}},84515:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207);t.default={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>(0,s._)`{propertyName: ${e.propertyName}}`},code(e){let{gen:t,schema:r,data:n,it:i}=e;if((0,o.alwaysValidSchema)(i,r))return;let a=t.name("valid");t.forIn("key",n,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},a),t.if((0,s.not)(a),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(a)}}},75683:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(73207);t.default={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,s.checkStrictMode)(r,`"${e}" without "if" is ignored`)}}},84054:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;let s=r(9173),o=r(73207),n=r(15830),i=r(73207);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,s._)`Object.prototype.hasOwnProperty`})}function l(e,t,r){return(0,s._)`${a(e)}.call(${t}, ${r})`}function u(e,t,r,o){let n=(0,s._)`${t}${(0,s.getProperty)(r)} === undefined`;return o?(0,s.or)(n,(0,s.not)(l(e,t,r))):n}function c(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){let{gen:r,data:o,it:n}=e;r.if(u(r,o,t,n.opts.ownProperties),()=>{e.setParams({missingProperty:(0,s._)`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},o,n){return(0,s.or)(...o.map(o=>(0,s.and)(u(e,t,o,r.ownProperties),(0,s._)`${n} = ${o}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,r,o){let n=(0,s._)`${t}${(0,s.getProperty)(r)} !== undefined`;return o?(0,s._)`${n} && ${l(e,t,r)}`:n},t.noPropertyInData=u,t.allSchemaProperties=c,t.schemaProperties=function(e,t){return c(t).filter(r=>!(0,o.alwaysValidSchema)(e,t[r]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:o,schemaPath:i,errorPath:a},it:l},u,c,d){let p=d?(0,s._)`${e}, ${t}, ${o}${i}`:t,h=[[n.default.instancePath,(0,s.strConcat)(n.default.instancePath,a)],[n.default.parentData,l.parentData],[n.default.parentDataProperty,l.parentDataProperty],[n.default.rootData,n.default.rootData]];l.opts.dynamicRef&&h.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);let f=(0,s._)`${p}, ${r.object(...h)}`;return c!==s.nil?(0,s._)`${u}.call(${c}, ${f})`:(0,s._)`${u}(${f})`};let d=(0,s._)`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){let o=t.unicodeRegExp?"u":"",{regExp:n}=t.code,a=n(r,o);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:(0,s._)`${"new RegExp"===n.code?d:(0,i.useFunc)(e,n)}(${r}, ${o})`})},t.validateArray=function(e){let{gen:t,data:r,keyword:n,it:i}=e,a=t.name("valid");if(i.allErrors){let e=t.let("valid",!0);return l(()=>t.assign(e,!1)),e}return t.var(a,!0),l(()=>t.break()),a;function l(i){let l=t.const("len",(0,s._)`${r}.length`);t.forRange("i",0,l,r=>{e.subschema({keyword:n,dataProp:r,dataPropType:o.Type.Num},a),t.if((0,s.not)(a),i)})}},t.validateUnion=function(e){let{gen:t,schema:r,keyword:n,it:i}=e;if(!Array.isArray(r))throw Error("ajv implementation error");if(r.some(e=>(0,o.alwaysValidSchema)(i,e))&&!i.opts.unevaluated)return;let a=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((r,o)=>{let i=e.subschema({keyword:n,schemaProp:o,compositeRule:!0},l);t.assign(a,(0,s._)`${a} || ${l}`),e.mergeValidEvaluated(i,l)||t.if((0,s.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}},14356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={keyword:"id",code(){throw Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}}},99237:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(14356),o=r(69995),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",s.default,o.default];t.default=n},69995:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;let s=r(28432),o=r(84054),n=r(9173),i=r(15830),a=r(64291),l=r(73207);function u(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,n._)`${r.scopeValue("wrapper",{ref:t})}.validate`}function c(e,t,r,s){let{gen:a,it:u}=e,{allErrors:c,schemaEnv:d,opts:p}=u,h=p.passContext?i.default.this:n.nil;function f(e){let t=(0,n._)`${e}.errors`;a.assign(i.default.vErrors,(0,n._)`${i.default.vErrors} === null ? ${t} : ${i.default.vErrors}.concat(${t})`),a.assign(i.default.errors,(0,n._)`${i.default.vErrors}.length`)}function m(e){var t;if(!u.opts.unevaluated)return;let s=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==u.props){if(s&&!s.dynamicProps)void 0!==s.props&&(u.props=l.mergeEvaluated.props(a,s.props,u.props));else{let t=a.var("props",(0,n._)`${e}.evaluated.props`);u.props=l.mergeEvaluated.props(a,t,u.props,n.Name)}}if(!0!==u.items){if(s&&!s.dynamicItems)void 0!==s.items&&(u.items=l.mergeEvaluated.items(a,s.items,u.items));else{let t=a.var("items",(0,n._)`${e}.evaluated.items`);u.items=l.mergeEvaluated.items(a,t,u.items,n.Name)}}}s?function(){if(!d.$async)throw Error("async schema referenced by sync schema");let r=a.let("valid");a.try(()=>{a.code((0,n._)`await ${(0,o.callValidateCode)(e,t,h)}`),m(t),c||a.assign(r,!0)},e=>{a.if((0,n._)`!(${e} instanceof ${u.ValidationError})`,()=>a.throw(e)),f(e),c||a.assign(r,!1)}),e.ok(r)}():e.result((0,o.callValidateCode)(e,t,h),()=>m(t),()=>f(t))}t.getValidate=u,t.callRef=c,t.default={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:o}=e,{baseId:i,schemaEnv:l,validateName:d,opts:p,self:h}=o,{root:f}=l;if(("#"===r||"#/"===r)&&i===f.baseId)return function(){if(l===f)return c(e,d,l,l.$async);let r=t.scopeValue("root",{ref:f});return c(e,(0,n._)`${r}.validate`,f,f.$async)}();let m=a.resolveRef.call(h,f,i,r);if(void 0===m)throw new s.default(o.opts.uriResolver,i,r);return m instanceof a.SchemaEnv?function(t){let r=u(e,t);c(e,r,t,t.$async)}(m):function(s){let o=t.scopeValue("schema",!0===p.code.source?{ref:s,code:(0,n.stringify)(s)}:{ref:s}),i=t.name("valid"),a=e.subschema({schema:s,dataTypes:[],schemaPath:n.nil,topSchemaRef:o,errSchemaPath:r},i);e.mergeEvaluated(a),e.ok(i)}(m)}}},16805:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(64483),n=r(64291),i=r(28432),a=r(73207);t.default={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===o.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,s._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){let{gen:t,data:r,schema:l,parentSchema:u,it:c}=e,{oneOf:d}=u;if(!c.opts.discriminator)throw Error("discriminator: requires discriminator option");let p=l.propertyName;if("string"!=typeof p)throw Error("discriminator: requires propertyName");if(l.mapping)throw Error("discriminator: mapping is not supported");if(!d)throw Error("discriminator: requires oneOf keyword");let h=t.let("valid",!1),f=t.const("tag",(0,s._)`${r}${(0,s.getProperty)(p)}`);t.if((0,s._)`typeof ${f} == "string"`,()=>(function(){let r=function(){var e;let t={},r=o(u),s=!0;for(let t=0;t<d.length;t++){let u=d[t];if((null==u?void 0:u.$ref)&&!(0,a.schemaHasRulesButRef)(u,c.self.RULES)){let e=u.$ref;if((u=n.resolveRef.call(c.self,c.schemaEnv.root,c.baseId,e))instanceof n.SchemaEnv&&(u=u.schema),void 0===u)throw new i.default(c.opts.uriResolver,c.baseId,e)}let h=null===(e=null==u?void 0:u.properties)||void 0===e?void 0:e[p];if("object"!=typeof h)throw Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);s=s&&(r||o(u)),function(e,t){if(e.const)l(e.const,t);else if(e.enum)for(let r of e.enum)l(r,t);else throw Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}(h,t)}if(!s)throw Error(`discriminator: "${p}" must be required`);return t;function o({required:e}){return Array.isArray(e)&&e.includes(p)}function l(e,r){if("string"!=typeof e||e in t)throw Error(`discriminator: "${p}" values must be unique strings`);t[e]=r}}();for(let o in t.if(!1),r)t.elseIf((0,s._)`${f} === ${o}`),t.assign(h,function(r){let o=t.name("valid"),n=e.subschema({keyword:"oneOf",schemaProp:r},o);return e.mergeEvaluated(n,s.Name),o}(r[o]));t.else(),e.error(!1,{discrError:o.DiscrError.Mapping,tag:f,tagName:p}),t.endIf()})(),()=>e.error(!1,{discrError:o.DiscrError.Tag,tag:f,tagName:p})),e.ok(h)}}},64483:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},73124:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(99237),o=r(88982),n=r(71488),i=r(41306),a=r(29111),l=[s.default,o.default,(0,n.default)(),i.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},39605:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173);t.default={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,s.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,s._)`{format: ${e}}`},code(e,t){let{gen:r,data:o,$data:n,schema:i,schemaCode:a,it:l}=e,{opts:u,errSchemaPath:c,schemaEnv:d,self:p}=l;u.validateFormats&&(n?function(){let n=r.scopeValue("formats",{ref:p.formats,code:u.code.formats}),i=r.const("fDef",(0,s._)`${n}[${a}]`),l=r.let("fType"),c=r.let("format");r.if((0,s._)`typeof ${i} == "object" && !(${i} instanceof RegExp)`,()=>r.assign(l,(0,s._)`${i}.type || "string"`).assign(c,(0,s._)`${i}.validate`),()=>r.assign(l,(0,s._)`"string"`).assign(c,i)),e.fail$data((0,s.or)(!1===u.strictSchema?s.nil:(0,s._)`${a} && !${c}`,function(){let e=d.$async?(0,s._)`(${i}.async ? await ${c}(${o}) : ${c}(${o}))`:(0,s._)`${c}(${o})`,r=(0,s._)`(typeof ${c} == "function" ? ${e} : ${c}.test(${o}))`;return(0,s._)`${c} && ${c} !== true && ${l} === ${t} && !${r}`}()))}():function(){let n=p.formats[i];if(!n){(function(){if(!1===u.strictSchema){p.logger.warn(e());return}throw Error(e());function e(){return`unknown format "${i}" ignored in schema at path "${c}"`}})();return}if(!0===n)return;let[a,l,h]=function(e){let t=e instanceof RegExp?(0,s.regexpCode)(e):u.code.formats?(0,s._)`${u.code.formats}${(0,s.getProperty)(i)}`:void 0,o=r.scopeValue("formats",{key:i,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,o]:[e.type||"string",e.validate,(0,s._)`${o}.validate`]}(n);a===t&&e.pass(function(){if("object"==typeof n&&!(n instanceof RegExp)&&n.async){if(!d.$async)throw Error("async format in sync schema");return(0,s._)`await ${h}(${o})`}return"function"==typeof l?(0,s._)`${h}(${o})`:(0,s._)`${h}.test(${o})`}())}())}}},41306:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=[r(39605).default];t.default=s},29111:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},6584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207),n=r(95300);t.default={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>(0,s._)`{allowedValue: ${e}}`},code(e){let{gen:t,data:r,$data:i,schemaCode:a,schema:l}=e;i||l&&"object"==typeof l?e.fail$data((0,s._)`!${(0,o.useFunc)(t,n.default)}(${r}, ${a})`):e.fail((0,s._)`${l} !== ${r}`)}}},73745:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207),n=r(95300);t.default={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,s._)`{allowedValues: ${e}}`},code(e){let t,r;let{gen:i,data:a,$data:l,schema:u,schemaCode:c,it:d}=e;if(!l&&0===u.length)throw Error("enum must have non-empty array");let p=u.length>=d.opts.loopEnum,h=()=>null!=t?t:t=(0,o.useFunc)(i,n.default);if(p||l)r=i.let("valid"),e.block$data(r,function(){i.assign(r,!1),i.forOf("v",c,e=>i.if((0,s._)`${h()}(${a}, ${e})`,()=>i.assign(r,!0).break()))});else{if(!Array.isArray(u))throw Error("ajv implementation error");let e=i.const("vSchema",c);r=(0,s.or)(...u.map((t,r)=>(function(e,t){let r=u[t];return"object"==typeof r&&null!==r?(0,s._)`${h()}(${a}, ${e}[${t}])`:(0,s._)`${a} === ${r}`})(e,r)))}e.pass(r)}}},88982:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(72027),o=r(26217),n=r(57869),i=r(67463),a=r(51062),l=r(21366),u=r(23040),c=r(29885),d=r(6584),p=r(73745),h=[s.default,o.default,n.default,i.default,a.default,l.default,u.default,c.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},d.default,p.default];t.default=h},23040:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173);t.default={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must NOT have ${"maxItems"===e?"more":"fewer"} than ${t} items`,params:({schemaCode:e})=>(0,s._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e,n="maxItems"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)`${r}.length ${n} ${o}`)}}},57869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=r(73207),n=r(17545);t.default={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must NOT have ${"maxLength"===e?"more":"fewer"} than ${t} characters`,params:({schemaCode:e})=>(0,s._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:i,it:a}=e,l="maxLength"===t?s.operators.GT:s.operators.LT,u=!1===a.opts.unicode?(0,s._)`${r}.length`:(0,s._)`${(0,o.useFunc)(e.gen,n.default)}(${r})`;e.fail$data((0,s._)`${u} ${l} ${i}`)}}},72027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173),o=s.operators,n={maximum:{okStr:"<=",ok:o.LTE,fail:o.GT},minimum:{okStr:">=",ok:o.GTE,fail:o.LT},exclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},exclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must be ${n[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,s._)`{comparison: ${n[e].okStr}, limit: ${t}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e;e.fail$data((0,s._)`${r} ${n[t].fail} ${o} || isNaN(${r})`)}};t.default=i},51062:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173);t.default={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message:({keyword:e,schemaCode:t})=>(0,s.str)`must NOT have ${"maxProperties"===e?"more":"fewer"} than ${t} properties`,params:({schemaCode:e})=>(0,s._)`{limit: ${e}}`},code(e){let{keyword:t,data:r,schemaCode:o}=e,n="maxProperties"===t?s.operators.GT:s.operators.LT;e.fail$data((0,s._)`Object.keys(${r}).length ${n} ${o}`)}}},26217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(9173);t.default={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>(0,s.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,s._)`{multipleOf: ${e}}`},code(e){let{gen:t,data:r,schemaCode:o,it:n}=e,i=n.opts.multipleOfPrecision,a=t.let("res"),l=i?(0,s._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${i}`:(0,s._)`${a} !== parseInt(${a})`;e.fail$data((0,s._)`(${o} === 0 || (${a} = ${r}/${o}, ${l}))`)}}},67463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(84054),o=r(73207),n=r(9173);t.default={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>(0,n.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,n._)`{pattern: ${e}}`},code(e){let{gen:t,data:r,$data:i,schema:a,schemaCode:l,it:u}=e,c=u.opts.unicodeRegExp?"u":"";if(i){let{regExp:s}=u.opts.code,i="new RegExp"===s.code?(0,n._)`new RegExp`:(0,o.useFunc)(t,s),a=t.let("valid");t.try(()=>t.assign(a,(0,n._)`${i}(${l}, ${c}).test(${r})`),()=>t.assign(a,!1)),e.fail$data((0,n._)`!${a}`)}else{let t=(0,s.usePattern)(e,a);e.fail$data((0,n._)`!${t}.test(${r})`)}}}},21366:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(84054),o=r(9173),n=r(73207);t.default={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>(0,o.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,o._)`{missingProperty: ${e}}`},code(e){let{gen:t,schema:r,schemaCode:i,data:a,$data:l,it:u}=e,{opts:c}=u;if(!l&&0===r.length)return;let d=r.length>=c.loopRequired;if(u.allErrors?function(){if(d||l)e.block$data(o.nil,p);else for(let t of r)(0,s.checkReportMissingProp)(e,t)}():function(){let n=t.let("missing");if(d||l){let r=t.let("valid",!0);e.block$data(r,()=>{e.setParams({missingProperty:n}),t.forOf(n,i,()=>{t.assign(r,(0,s.propertyInData)(t,a,n,c.ownProperties)),t.if((0,o.not)(r),()=>{e.error(),t.break()})},o.nil)}),e.ok(r)}else t.if((0,s.checkMissingProp)(e,r,n)),(0,s.reportMissingProp)(e,n),t.else()}(),c.strictRequired){let t=e.parentSchema.properties,{definedProperties:s}=e.it;for(let e of r)if((null==t?void 0:t[e])===void 0&&!s.has(e)){let t=u.schemaEnv.baseId+u.errSchemaPath,r=`required property "${e}" is not defined at "${t}" (strictRequired)`;(0,n.checkStrictMode)(u,r,u.opts.strictRequired)}}function p(){t.forOf("prop",i,r=>{e.setParams({missingProperty:r}),t.if((0,s.noPropertyInData)(t,a,r,c.ownProperties),()=>e.error())})}}}},29885:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let s=r(73943),o=r(9173),n=r(73207),i=r(95300);t.default={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>(0,o.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,o._)`{i: ${e}, j: ${t}}`},code(e){let{gen:t,data:r,$data:a,schema:l,parentSchema:u,schemaCode:c,it:d}=e;if(!a&&!l)return;let p=t.let("valid"),h=u.items?(0,s.getSchemaTypes)(u.items):[];e.block$data(p,function(){let a=t.let("i",(0,o._)`${r}.length`),l=t.let("j");e.setParams({i:a,j:l}),t.assign(p,!0),t.if((0,o._)`${a} > 1`,()=>(h.length>0&&!h.some(e=>"object"===e||"array"===e)?function(n,i){let a=t.name("item"),l=(0,s.checkDataTypes)(h,a,d.opts.strictNumbers,s.DataType.Wrong),u=t.const("indices",(0,o._)`{}`);t.for((0,o._)`;${n}--;`,()=>{t.let(a,(0,o._)`${r}[${n}]`),t.if(l,(0,o._)`continue`),h.length>1&&t.if((0,o._)`typeof ${a} == "string"`,(0,o._)`${a} += "_"`),t.if((0,o._)`typeof ${u}[${a}] == "number"`,()=>{t.assign(i,(0,o._)`${u}[${a}]`),e.error(),t.assign(p,!1).break()}).code((0,o._)`${u}[${a}] = ${n}`)})}:function(s,a){let l=(0,n.useFunc)(t,i.default),u=t.name("outer");t.label(u).for((0,o._)`;${s}--;`,()=>t.for((0,o._)`${a} = ${s}; ${a}--;`,()=>t.if((0,o._)`${l}(${r}[${s}], ${r}[${a}])`,()=>{e.error(),t.assign(p,!1).break(u)})))})(a,l))},(0,o._)`${c} === false`),e.ok(p)}}},56916:(e,t,r)=>{"use strict";let s=r(61282),o=r(66806),n=r(86213);function i(e,t,r){let i=o(e,t,r),a=s.spawn(i.command,i.args,i.options);return n.hookChildProcess(a,i),a}e.exports=i,e.exports.spawn=i,e.exports.sync=function(e,t,r){let i=o(e,t,r),a=s.spawnSync(i.command,i.args,i.options);return a.error=a.error||n.verifyENOENTSync(a.status,i),a},e.exports._parse=o,e.exports._enoent=n},86213:e=>{"use strict";let t="win32"===process.platform;function r(e,t){return Object.assign(Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function s(e,s){return t&&1===e&&!s.file?r(s.original,"spawn"):null}e.exports={hookChildProcess:function(e,r){if(!t)return;let o=e.emit;e.emit=function(t,n){if("exit"===t){let t=s(n,r);if(t)return o.call(e,"error",t)}return o.apply(e,arguments)}},verifyENOENT:s,verifyENOENTSync:function(e,s){return t&&1===e&&!s.file?r(s.original,"spawnSync"):null},notFoundError:r}},66806:(e,t,r)=>{"use strict";let s=r(55315),o=r(7677),n=r(54917),i=r(28426),a="win32"===process.platform,l=/\.(?:com|exe)$/i,u=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;e.exports=function(e,t,r){t&&!Array.isArray(t)&&(r=t,t=null);let c={command:e,args:t=t?t.slice(0):[],options:r=Object.assign({},r),file:void 0,original:{command:e,args:t}};return r.shell?c:function(e){if(!a)return e;let t=function(e){e.file=o(e);let t=e.file&&i(e.file);return t?(e.args.unshift(e.file),e.command=t,o(e)):e.file}(e),r=!l.test(t);if(e.options.forceShell||r){let r=u.test(t);e.command=s.normalize(e.command),e.command=n.command(e.command),e.args=e.args.map(e=>n.argument(e,r));let o=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${o}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}(c)}},54917:e=>{"use strict";let t=/([()\][%!^"`<>&|;, *?])/g;e.exports.command=function(e){return e=e.replace(t,"^$1")},e.exports.argument=function(e,r){return e=(e=(e=`${e}`).replace(/(?=(\\+?)?)\1"/g,'$1$1\\"')).replace(/(?=(\\+?)?)\1$/,"$1$1"),e=(e=`"${e}"`).replace(t,"^$1"),r&&(e=e.replace(t,"^$1")),e}},28426:(e,t,r)=>{"use strict";let s=r(92048),o=r(66173);e.exports=function(e){let t;let r=Buffer.alloc(150);try{t=s.openSync(e,"r"),s.readSync(t,r,0,150,0),s.closeSync(t)}catch(e){}return o(r.toString())}},7677:(e,t,r)=>{"use strict";let s=r(55315),o=r(60224),n=r(74387);function i(e,t){let r;let i=e.options.env||process.env,a=process.cwd(),l=null!=e.options.cwd,u=l&&void 0!==process.chdir&&!process.chdir.disabled;if(u)try{process.chdir(e.options.cwd)}catch(e){}try{r=o.sync(e.command,{path:i[n({env:i})],pathExt:t?s.delimiter:void 0})}catch(e){}finally{u&&process.chdir(a)}return r&&(r=s.resolve(l?e.options.cwd:"",r)),r}e.exports=function(e){return i(e)||i(e,!0)}},9083:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((s=t.length)!=r.length)return!1;for(o=s;0!=o--;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((s=(n=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(o=s;0!=o--;)if(!Object.prototype.hasOwnProperty.call(r,n[o]))return!1;for(o=s;0!=o--;){var s,o,n,i=n[o];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r}},97493:(e,t,r)=>{var s;function o(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw TypeError("callback not provided");return new Promise(function(r,s){o(e,t||{},function(e,t){e?s(e):r(t)})})}s(e,t||{},function(e,s){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,s=!1),r(e,s)})}r(92048),"win32"===process.platform||global.TESTING_WINDOWS?s=r(80492):s=r(34135),e.exports=o,o.sync=function(e,t){try{return s.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},34135:(e,t,r)=>{e.exports=o,o.sync=function(e,t){return n(s.statSync(e),t)};var s=r(92048);function o(e,t,r){s.stat(e,function(e,s){r(e,!e&&n(s,t))})}function n(e,t){var r,s,o,n,i,a,l;return e.isFile()&&(r=e.mode,s=e.uid,o=e.gid,n=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),i=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),a=parseInt("100",8),l=parseInt("010",8),r&parseInt("001",8)||r&l&&o===i||r&a&&s===n||r&(a|l)&&0===n)}},80492:(e,t,r)=>{e.exports=n,n.sync=function(e,t){return o(s.statSync(e),e,t)};var s=r(92048);function o(e,t,r){return!!(e.isSymbolicLink()||e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r||-1!==(r=r.split(";")).indexOf(""))return!0;for(var s=0;s<r.length;s++){var o=r[s].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,r)}function n(e,t,r){s.stat(e,function(s,n){r(s,!s&&o(n,e,t))})}},72697:e=>{"use strict";var t=e.exports=function(e,r,s){"function"==typeof r&&(s=r,r={});var o="function"==typeof(s=r.cb||s)?s:s.pre||function(){};(function e(r,s,o,n,i,a,l,u,c,d){if(n&&"object"==typeof n&&!Array.isArray(n)){for(var p in s(n,i,a,l,u,c,d),n){var h=n[p];if(Array.isArray(h)){if(p in t.arrayKeywords)for(var f=0;f<h.length;f++)e(r,s,o,h[f],i+"/"+p+"/"+f,a,i,p,n,f)}else if(p in t.propsKeywords){if(h&&"object"==typeof h)for(var m in h)e(r,s,o,h[m],i+"/"+p+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,i,p,n,m)}else(p in t.keywords||r.allKeys&&!(p in t.skipKeywords))&&e(r,s,o,h,i+"/"+p,a,i,p,n)}o(n,i,a,l,u,c,d)}})(r,o,s.post||function(){},e,"",e)};t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},74387:e=>{"use strict";let t=(e={})=>{let t=e.env||process.env;return"win32"!==(e.platform||process.platform)?"PATH":Object.keys(t).reverse().find(e=>"PATH"===e.toUpperCase())||"Path"};e.exports=t,e.exports.default=t},66173:(e,t,r)=>{"use strict";let s=r(69877);e.exports=(e="")=>{let t=e.match(s);if(!t)return null;let[r,o]=t[0].replace(/#! ?/,"").split(" "),n=r.split("/").pop();return"env"===n?o:o?`${n} ${o}`:n}},69877:e=>{"use strict";e.exports=/^#!(.*)/},60224:(e,t,r)=>{let s="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=r(55315),n=s?";":":",i=r(97493),a=e=>Object.assign(Error(`not found: ${e}`),{code:"ENOENT"}),l=(e,t)=>{let r=t.colon||n,o=e.match(/\//)||s&&e.match(/\\/)?[""]:[...s?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],i=s?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",a=s?i.split(r):[""];return s&&-1!==e.indexOf(".")&&""!==a[0]&&a.unshift(""),{pathEnv:o,pathExt:a,pathExtExe:i}},u=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});let{pathEnv:s,pathExt:n,pathExtExe:u}=l(e,t),c=[],d=r=>new Promise((n,i)=>{if(r===s.length)return t.all&&c.length?n(c):i(a(e));let l=s[r],u=/^".*"$/.test(l)?l.slice(1,-1):l,d=o.join(u,e);n(p(!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d,r,0))}),p=(e,r,s)=>new Promise((o,a)=>{if(s===n.length)return o(d(r+1));let l=n[s];i(e+l,{pathExt:u},(n,i)=>{if(!n&&i){if(!t.all)return o(e+l);c.push(e+l)}return o(p(e,r,s+1))})});return r?d(0).then(e=>r(null,e),r):d(0)};e.exports=u,u.sync=(e,t)=>{let{pathEnv:r,pathExt:s,pathExtExe:n}=l(e,t=t||{}),u=[];for(let a=0;a<r.length;a++){let l=r[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,d=o.join(c,e),p=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let e=0;e<s.length;e++){let r=p+s[e];try{if(i.sync(r,{pathExt:n})){if(!t.all)return r;u.push(r)}}catch(e){}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw a(e)}},30010:(e,t,r)=>{"use strict";let{normalizeIPv6:s,removeDotSegments:o,recomposeAuthority:n,normalizeComponentEncoding:i,isIPv4:a,nonSimpleDomain:l}=r(78251),{SCHEMES:u,getSchemeHandler:c}=r(42674);function d(e,t,r,s){let n={};return s||(e=f(p(e,r),r),t=f(p(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=o(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=o(t.path||""),n.query=t.query):(t.path?("/"===t.path[0]?n.path=o(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=o(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function p(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},s=Object.assign({},t),i=[],a=c(s.scheme||r.scheme);a&&a.serialize&&a.serialize(r,s),void 0!==r.path&&(s.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==s.reference&&r.scheme&&i.push(r.scheme,":");let l=n(r);if(void 0!==l&&("suffix"!==s.reference&&i.push("//"),i.push(l),r.path&&"/"!==r.path[0]&&i.push("/")),void 0!==r.path){let e=r.path;s.absolutePath||a&&a.absolutePath||(e=o(e)),void 0===l&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),i.push(e)}return void 0!==r.query&&i.push("?",r.query),void 0!==r.fragment&&i.push("#",r.fragment),i.join("")}let h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function f(e,t){let r=Object.assign({},t),o={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=!1;"suffix"===r.reference&&(e=r.scheme?r.scheme+":"+e:"//"+e);let i=e.match(h);if(i){if(o.scheme=i[1],o.userinfo=i[3],o.host=i[4],o.port=parseInt(i[5],10),o.path=i[6]||"",o.query=i[7],o.fragment=i[8],isNaN(o.port)&&(o.port=i[5]),o.host){if(!1===a(o.host)){let e=s(o.host);o.host=e.host.toLowerCase(),n=e.isIPV6}else n=!0}void 0!==o.scheme||void 0!==o.userinfo||void 0!==o.host||void 0!==o.port||void 0!==o.query||o.path?void 0===o.scheme?o.reference="relative":void 0===o.fragment?o.reference="absolute":o.reference="uri":o.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==o.reference&&(o.error=o.error||"URI is not a "+r.reference+" reference.");let t=c(r.scheme||o.scheme);if(!r.unicodeSupport&&(!t||!t.unicodeSupport)&&o.host&&(r.domainHost||t&&t.domainHost)&&!1===n&&l(o.host))try{o.host=URL.domainToASCII(o.host.toLowerCase())}catch(e){o.error=o.error||"Host's domain name can not be converted to ASCII: "+e}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==o.scheme&&(o.scheme=unescape(o.scheme)),void 0!==o.host&&(o.host=unescape(o.host))),o.path&&(o.path=escape(unescape(o.path))),o.fragment&&(o.fragment=encodeURI(decodeURIComponent(o.fragment)))),t&&t.parse&&t.parse(o,r)}else o.error=o.error||"URI can not be parsed.";return o}let m={SCHEMES:u,normalize:function(e,t){return"string"==typeof e?e=p(f(e,t),t):"object"==typeof e&&(e=f(p(e,t),t)),e},resolve:function(e,t,r){let s=r?Object.assign({scheme:"null"},r):{scheme:"null"},o=d(f(e,s),f(t,s),s,!0);return s.skipEscape=!0,p(o,s)},resolveComponent:d,equal:function(e,t,r){return"string"==typeof e?e=p(i(f(e=unescape(e),r),!0),{...r,skipEscape:!0}):"object"==typeof e&&(e=p(i(e,!0),{...r,skipEscape:!0})),"string"==typeof t?t=p(i(f(t=unescape(t),r),!0),{...r,skipEscape:!0}):"object"==typeof t&&(t=p(i(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:p,parse:f};e.exports=m,e.exports.default=m,e.exports.fastUri=m},42674:(e,t,r)=>{"use strict";let{isUUID:s}=r(78251),o=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,n=["http","https","ws","wss","urn","urn:uuid"];function i(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&3===e.scheme.length&&("w"===e.scheme[0]||"W"===e.scheme[0])&&("s"===e.scheme[1]||"S"===e.scheme[1])&&("s"===e.scheme[2]||"S"===e.scheme[2])}function a(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function l(e){let t="https"===String(e.scheme).toLowerCase();return(e.port===(t?443:80)||""===e.port)&&(e.port=void 0),e.path||(e.path="/"),e}let u={scheme:"http",domainHost:!0,parse:a,serialize:l},c={scheme:"https",domainHost:u.domainHost,parse:a,serialize:l},d={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=i(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if((e.port===(i(e)?443:80)||""===e.port)&&(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},p={scheme:"wss",domainHost:d.domainHost,parse:d.parse,serialize:d.serialize},h={http:u,https:c,ws:d,wss:p,urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(o);if(r){let s=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let o=f(`${s}:${t.nid||e.nid}`);e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw Error("URN without nid cannot be serialized");let r=t.scheme||e.scheme||"urn",s=e.nid.toLowerCase(),o=f(`${r}:${t.nid||s}`);o&&(e=o.serialize(e,t));let n=e,i=e.nss;return n.path=`${s||t.nid}:${i}`,t.skipEscape=!0,n},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){return e.uuid=e.nss,e.nss=void 0,t.tolerant||e.uuid&&s(e.uuid)||(e.error=e.error||"UUID is not valid."),e},serialize:function(e){return e.nss=(e.uuid||"").toLowerCase(),e},skipNormalize:!0}};function f(e){return e&&(h[e]||h[e.toLowerCase()])||void 0}Object.setPrototypeOf(h,null),e.exports={wsIsSecure:i,SCHEMES:h,isValidSchemeName:function(e){return -1!==n.indexOf(e)},getSchemeHandler:f}},78251:e=>{"use strict";let t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),r=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function s(e){let t="",r=0,s=0;for(s=0;s<e.length;s++)if(48!==(r=e[s].charCodeAt(0))){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[s];break}for(s+=1;s<e.length;s++){if(!((r=e[s].charCodeAt(0))>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[s]}return t}let o=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function n(e){return e.length=0,!0}function i(e,t,r){if(e.length){let o=s(e);if(""===o)return r.error=!0,!1;t.push(o),e.length=0}return!0}function a(e){if(2>function(e,t){let r=0;for(let t=0;t<e.length;t++)":"===e[t]&&r++;return r}(e,0))return{host:e,isIPV6:!1};let t=function(e){let t=0,r={error:!1,address:"",zone:""},o=[],a=[],l=!1,u=!1,c=i;for(let s=0;s<e.length;s++){let i=e[s];if("["!==i&&"]"!==i){if(":"===i){if(!0===l&&(u=!0),!c(a,o,r))break;if(++t>7){r.error=!0;break}s>0&&":"===e[s-1]&&(l=!0),o.push(":");continue}if("%"===i){if(!c(a,o,r))break;c=n}else{a.push(i);continue}}}return a.length&&(c===n?r.zone=a.join(""):u?o.push(a.join("")):o.push(s(a))),r.address=o.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:r}}}e.exports={nonSimpleDomain:o,recomposeAuthority:function(e){let t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let s=unescape(e.host);if(!r(s)){let t=a(s);s=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(s)}return("number"==typeof e.port||"string"==typeof e.port)&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){let r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){let t=e,r=[],s=-1,o=0;for(;o=t.length;){if(1===o){if("."===t)break;if("/"===t){r.push("/");break}r.push(t);break}if(2===o){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){r.push("/");break}}else if(3===o&&"/.."===t){0!==r.length&&r.pop(),r.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==r.length&&r.pop();continue}}if(-1===(s=t.indexOf("/",1))){r.push(t);break}r.push(t.slice(0,s)),t=t.slice(s)}return r.join("")},isIPv4:r,isUUID:t,normalizeIPv6:a,stringArrayToHexStripped:s}},57745:(e,t,r)=>{"use strict";r.d(t,{eq:()=>a,xD:()=>l});var s=r(83596),o=r(19326),n=r(80298),i=r(22070);let a=(e,t)=>(0,i.i6)`${e} = ${(function(e,t){return!(0,i._B)(t)||(0,i.zl)(e)||(0,o.is)(e,i.dO)||(0,o.is)(e,i.Vm)||(0,o.is)(e,s.s)||(0,o.is)(e,n.iA)||(0,o.is)(e,i.G7)?e:new i.dO(e,t)})(t,e)}`;function l(...e){let t=e.filter(e=>void 0!==e);return 0===t.length?void 0:new i.$s(1===t.length?t:[new i.Zm("("),i.i6.join(t,new i.Zm(" and ")),new i.Zm(")")])}},81445:(e,t,r)=>{"use strict";r.d(t,{C:()=>o});var s=r(22070);function o(e){return(0,s.i6)`${e} desc`}},11170:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},63181:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,656,70,148],()=>r(1950));module.exports=s})();